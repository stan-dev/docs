<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Compiling a Stan Program | CmdStan User’s Guide</title>
  <meta name="description" content="CmdStan user’s guide." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Compiling a Stan Program | CmdStan User’s Guide" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="img/logo-tm.pdf" />
  <meta property="og:description" content="CmdStan user’s guide." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Compiling a Stan Program | CmdStan User’s Guide" />
  
  <meta name="twitter:description" content="CmdStan user’s guide." />
  <meta name="twitter:image" content="img/logo-tm.pdf" />

<meta name="author" content="Stan Development Team" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="example-model-and-data.html"/>
<link rel="next" href="mcmc-intro.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>



<link rel="stylesheet" href="stan-manual.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li style="font-size:110%; font-weight:400; font-family: Verdana, Helvetica, sans; line-height:1.4; margin: 0.5em 0 0 1em"><a href="https://mc-stan.org/docs/cmdstan-guide/index.html" style="color:#4183C4">CmdStan User's Guide</a></li>

<li class="divider"></li>
<li><a href="index.html#introduction"><i style='font-size: 110%; color:#990017;'>Introduction</i></a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Stan Home Page</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#licensing"><i class="fa fa-check"></i>Licensing</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#stan-documentation-users-guide-and-reference-manuals"><i class="fa fa-check"></i>Stan Documentation: User’s Guide and Reference Manuals</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#benefits-of-cmdstan"><i class="fa fa-check"></i>Benefits of CmdStan</a></li>
</ul></li>
<li><a href="quickstart-guide.html#quickstart-guide"><i style='font-size: 110%; color:#990017;'>QuickStart Guide</i></a></li>
<li class="chapter" data-level="1" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html"><i class="fa fa-check"></i><b>1</b> CmdStan Installation</a>
<ul>
<li class="chapter" data-level="1.1" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html#gnu-make-utility"><i class="fa fa-check"></i><b>1.1</b> GNU-Make Utility</a></li>
<li class="chapter" data-level="1.2" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html#building-cmdstan"><i class="fa fa-check"></i><b>1.2</b> Building CmdStan</a></li>
<li class="chapter" data-level="1.3" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html#git-clone.section"><i class="fa fa-check"></i><b>1.3</b> Clone the GitHub CmdStan Repository</a></li>
<li class="chapter" data-level="1.4" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html#trouble-shooting-the-installation"><i class="fa fa-check"></i><b>1.4</b> Trouble-shooting the installation</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="example-model-and-data.html"><a href="example-model-and-data.html"><i class="fa fa-check"></i><b>2</b> Example Model and Data</a></li>
<li class="chapter" data-level="3" data-path="compiling-a-stan-program.html"><a href="compiling-a-stan-program.html"><i class="fa fa-check"></i><b>3</b> Compiling a Stan Program</a>
<ul>
<li class="chapter" data-level="3.1" data-path="compiling-a-stan-program.html"><a href="compiling-a-stan-program.html#invoking-the-make-utility"><i class="fa fa-check"></i><b>3.1</b> Invoking the Make Utility</a></li>
<li class="chapter" data-level="3.2" data-path="compiling-a-stan-program.html"><a href="compiling-a-stan-program.html#dependencies"><i class="fa fa-check"></i><b>3.2</b> Dependencies</a></li>
<li class="chapter" data-level="3.3" data-path="compiling-a-stan-program.html"><a href="compiling-a-stan-program.html#compiler-errors"><i class="fa fa-check"></i><b>3.3</b> Compiler Errors</a></li>
<li class="chapter" data-level="3.4" data-path="compiling-a-stan-program.html"><a href="compiling-a-stan-program.html#troubleshooting-c-compiler-or-linker-errors"><i class="fa fa-check"></i><b>3.4</b> Troubleshooting C++ Compiler or Linker Errors</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="mcmc-intro.html"><a href="mcmc-intro.html"><i class="fa fa-check"></i><b>4</b> MCMC Sampling</a>
<ul>
<li class="chapter" data-level="4.1" data-path="mcmc-intro.html"><a href="mcmc-intro.html#running-the-sampler"><i class="fa fa-check"></i><b>4.1</b> Running the Sampler</a></li>
<li class="chapter" data-level="4.2" data-path="mcmc-intro.html"><a href="mcmc-intro.html#running-multiple-chains"><i class="fa fa-check"></i><b>4.2</b> Running Multiple Chains</a></li>
<li class="chapter" data-level="4.3" data-path="mcmc-intro.html"><a href="mcmc-intro.html#stan-csv-output-file"><i class="fa fa-check"></i><b>4.3</b> Stan CSV Output File</a></li>
<li class="chapter" data-level="4.4" data-path="mcmc-intro.html"><a href="mcmc-intro.html#summarizing-sampler-outputs-with-stansummary"><i class="fa fa-check"></i><b>4.4</b> Summarizing Sampler Output(s) with <code>stansummary</code></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="optimization.html"><a href="optimization.html"><i class="fa fa-check"></i><b>5</b> Optimization</a></li>
<li class="chapter" data-level="6" data-path="variational-inference.html"><a href="variational-inference.html"><i class="fa fa-check"></i><b>6</b> Variational Inference</a></li>
<li class="chapter" data-level="7" data-path="generating-quantities-of-interest-from-a-fitted-model.html"><a href="generating-quantities-of-interest-from-a-fitted-model.html"><i class="fa fa-check"></i><b>7</b> Generating Quantities of Interest from a Fitted Model</a></li>
<li><a href="cmdstan-reference.html#cmdstan-reference"><i style='font-size: 110%; color:#990017;'>CmdStan Reference</i></a></li>
<li class="chapter" data-level="8" data-path="command-line-interface-overview.html"><a href="command-line-interface-overview.html"><i class="fa fa-check"></i><b>8</b> Command-Line Interface Overview</a>
<ul>
<li class="chapter" data-level="8.1" data-path="command-line-interface-overview.html"><a href="command-line-interface-overview.html#input-data-argument"><i class="fa fa-check"></i><b>8.1</b> Input Data Argument</a></li>
<li class="chapter" data-level="8.2" data-path="command-line-interface-overview.html"><a href="command-line-interface-overview.html#output-control-arguments"><i class="fa fa-check"></i><b>8.2</b> Output Control Arguments</a></li>
<li class="chapter" data-level="8.3" data-path="command-line-interface-overview.html"><a href="command-line-interface-overview.html#initialize-model-parameters-argument"><i class="fa fa-check"></i><b>8.3</b> Initialize Model Parameters Argument</a></li>
<li class="chapter" data-level="8.4" data-path="command-line-interface-overview.html"><a href="command-line-interface-overview.html#random-number-generator-arguments"><i class="fa fa-check"></i><b>8.4</b> Random Number Generator Arguments</a></li>
<li class="chapter" data-level="8.5" data-path="command-line-interface-overview.html"><a href="command-line-interface-overview.html#chain-identifier-argument-id"><i class="fa fa-check"></i><b>8.5</b> Chain Identifier Argument: <code>id</code></a></li>
<li class="chapter" data-level="8.6" data-path="command-line-interface-overview.html"><a href="command-line-interface-overview.html#command-line-help"><i class="fa fa-check"></i><b>8.6</b> Command Line Help</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="mcmc-config.html"><a href="mcmc-config.html"><i class="fa fa-check"></i><b>9</b> MCMC Sampling using Hamiltonian Monte Carlo</a>
<ul>
<li class="chapter" data-level="9.1" data-path="mcmc-config.html"><a href="mcmc-config.html#iterations"><i class="fa fa-check"></i><b>9.1</b> Iterations</a></li>
<li class="chapter" data-level="9.2" data-path="mcmc-config.html"><a href="mcmc-config.html#adaptation"><i class="fa fa-check"></i><b>9.2</b> Adaptation</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="mcmc-config.html"><a href="mcmc-config.html#step-size-optimization-configuration"><i class="fa fa-check"></i><b>9.2.1</b> Step size optimization configuration</a></li>
<li class="chapter" data-level="9.2.2" data-path="mcmc-config.html"><a href="mcmc-config.html#warmup-schedule-configuration"><i class="fa fa-check"></i><b>9.2.2</b> Warmup schedule configuration</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="mcmc-config.html"><a href="mcmc-config.html#algorithm"><i class="fa fa-check"></i><b>9.3</b> Algorithm</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="mcmc-config.html"><a href="mcmc-config.html#samples-from-a-set-of-fixed-parameters"><i class="fa fa-check"></i><b>9.3.1</b> Samples from a set of fixed parameters</a></li>
<li class="chapter" data-level="9.3.2" data-path="mcmc-config.html"><a href="mcmc-config.html#hmc-samplers"><i class="fa fa-check"></i><b>9.3.2</b> HMC samplers</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="mcmc-config.html"><a href="mcmc-config.html#sampler-diagnostic-file"><i class="fa fa-check"></i><b>9.4</b> Sampler Diagnostic File</a></li>
<li class="chapter" data-level="9.5" data-path="mcmc-config.html"><a href="mcmc-config.html#examples"><i class="fa fa-check"></i><b>9.5</b> Examples</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="mcmc-config.html"><a href="mcmc-config.html#running-multiple-chains-with-a-specified-rng-seed"><i class="fa fa-check"></i><b>9.5.1</b> Running multiple chains with a specified RNG seed</a></li>
<li class="chapter" data-level="9.5.2" data-path="mcmc-config.html"><a href="mcmc-config.html#changing-the-default-warmup-and-sampling-iterations"><i class="fa fa-check"></i><b>9.5.2</b> Changing the default warmup and sampling iterations</a></li>
<li class="chapter" data-level="9.5.3" data-path="mcmc-config.html"><a href="mcmc-config.html#saving-warmup-draws"><i class="fa fa-check"></i><b>9.5.3</b> Saving warmup draws</a></li>
<li class="chapter" data-level="9.5.4" data-path="mcmc-config.html"><a href="mcmc-config.html#initializing-parameters"><i class="fa fa-check"></i><b>9.5.4</b> Initializing parameters</a></li>
<li class="chapter" data-level="9.5.5" data-path="mcmc-config.html"><a href="mcmc-config.html#specifying-the-metric-and-stepsize"><i class="fa fa-check"></i><b>9.5.5</b> Specifying the metric and stepsize</a></li>
<li class="chapter" data-level="9.5.6" data-path="mcmc-config.html"><a href="mcmc-config.html#changing-the-nuts-hmc-adaptation-parameters"><i class="fa fa-check"></i><b>9.5.6</b> Changing the NUTS-HMC adaptation parameters</a></li>
<li class="chapter" data-level="9.5.7" data-path="mcmc-config.html"><a href="mcmc-config.html#increasing-the-tree-depth"><i class="fa fa-check"></i><b>9.5.7</b> Increasing the tree-depth</a></li>
<li class="chapter" data-level="9.5.8" data-path="mcmc-config.html"><a href="mcmc-config.html#capturing-hamiltonian-diagnostics-and-gradients"><i class="fa fa-check"></i><b>9.5.8</b> Capturing Hamiltonian diagnostics and gradients</a></li>
<li class="chapter" data-level="9.5.9" data-path="mcmc-config.html"><a href="mcmc-config.html#suppressing-progress-updates-to-the-console"><i class="fa fa-check"></i><b>9.5.9</b> Suppressing progress updates to the console</a></li>
<li class="chapter" data-level="9.5.10" data-path="mcmc-config.html"><a href="mcmc-config.html#everything-example"><i class="fa fa-check"></i><b>9.5.10</b> Everything Example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="maximum-likelihood-estimation.html"><a href="maximum-likelihood-estimation.html"><i class="fa fa-check"></i><b>10</b> Maximum Likelihood Estimation</a>
<ul>
<li class="chapter" data-level="10.1" data-path="maximum-likelihood-estimation.html"><a href="maximum-likelihood-estimation.html#optimization-algorithms"><i class="fa fa-check"></i><b>10.1</b> Optimization Algorithms</a></li>
<li class="chapter" data-level="10.2" data-path="maximum-likelihood-estimation.html"><a href="maximum-likelihood-estimation.html#the-quasi-newton-optimizers"><i class="fa fa-check"></i><b>10.2</b> The quasi-Newton optimizers</a></li>
<li class="chapter" data-level="10.3" data-path="maximum-likelihood-estimation.html"><a href="maximum-likelihood-estimation.html#the-newton-optimizer"><i class="fa fa-check"></i><b>10.3</b> The Newton optimizer</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="variational-inference-algorithm-advi.html"><a href="variational-inference-algorithm-advi.html"><i class="fa fa-check"></i><b>11</b> Variational Inference Algorithm: ADVI</a>
<ul>
<li class="chapter" data-level="11.1" data-path="variational-inference-algorithm-advi.html"><a href="variational-inference-algorithm-advi.html#variational-algorithms"><i class="fa fa-check"></i><b>11.1</b> Variational Algorithms</a></li>
<li class="chapter" data-level="11.2" data-path="variational-inference-algorithm-advi.html"><a href="variational-inference-algorithm-advi.html#configuration"><i class="fa fa-check"></i><b>11.2</b> Configuration</a></li>
<li class="chapter" data-level="11.3" data-path="variational-inference-algorithm-advi.html"><a href="variational-inference-algorithm-advi.html#csv-output"><i class="fa fa-check"></i><b>11.3</b> CSV Output</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="standalone-generate-quantities.html"><a href="standalone-generate-quantities.html"><i class="fa fa-check"></i><b>12</b> Standalone Generate Quantities</a></li>
<li class="chapter" data-level="13" data-path="diagnosing-hmc-by-comparison-of-gradients.html"><a href="diagnosing-hmc-by-comparison-of-gradients.html"><i class="fa fa-check"></i><b>13</b> Diagnosing HMC by Comparison of Gradients</a></li>
<li><a href="cmdstan-tools.html#cmdstan-tools"><i style='font-size: 110%; color:#990017;'>CmdStan Tools</i></a></li>
<li class="chapter" data-level="14" data-path="stanc.html"><a href="stanc.html"><i class="fa fa-check"></i><b>14</b> <code>stanc</code>: Translating Stan to C++</a>
<ul>
<li class="chapter" data-level="14.1" data-path="stanc.html"><a href="stanc.html#instantiating-the-stanc-binary"><i class="fa fa-check"></i><b>14.1</b> Instantiating the <code>stanc</code> Binary</a></li>
<li class="chapter" data-level="14.2" data-path="stanc.html"><a href="stanc.html#the-stan-compiler-program"><i class="fa fa-check"></i><b>14.2</b> The Stan Compiler Program</a></li>
<li class="chapter" data-level="14.3" data-path="stanc.html"><a href="stanc.html#command-line-options-for-stanc3"><i class="fa fa-check"></i><b>14.3</b> Command-Line Options for stanc3</a></li>
<li class="chapter" data-level="14.4" data-path="stanc.html"><a href="stanc.html#command-line-options-for-stanc2"><i class="fa fa-check"></i><b>14.4</b> Command-Line Options for stanc2</a></li>
<li class="chapter" data-level="14.5" data-path="stanc.html"><a href="stanc.html#using-external-c-code"><i class="fa fa-check"></i><b>14.5</b> Using External C++ Code</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="stansummary.html"><a href="stansummary.html"><i class="fa fa-check"></i><b>15</b> <code>stansummary</code>: MCMC Output Analysis</a>
<ul>
<li class="chapter" data-level="15.1" data-path="stansummary.html"><a href="stansummary.html#building-the-stansummary-command"><i class="fa fa-check"></i><b>15.1</b> Building the stansummary Command</a></li>
<li class="chapter" data-level="15.2" data-path="stansummary.html"><a href="stansummary.html#running-the-stansummary-command"><i class="fa fa-check"></i><b>15.2</b> Running the stansummary Command</a></li>
<li class="chapter" data-level="15.3" data-path="stansummary.html"><a href="stansummary.html#command-line-options"><i class="fa fa-check"></i><b>15.3</b> Command-line Options</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="diagnose.html"><a href="diagnose.html"><i class="fa fa-check"></i><b>16</b> <code>diagnose</code>: Diagnosing Biased Hamiltonian Monte Carlo Inferences</a>
<ul>
<li class="chapter" data-level="16.1" data-path="diagnose.html"><a href="diagnose.html#building-the-diagnose-command"><i class="fa fa-check"></i><b>16.1</b> Building the diagnose Command</a></li>
<li class="chapter" data-level="16.2" data-path="diagnose.html"><a href="diagnose.html#running-the-diagnose-command"><i class="fa fa-check"></i><b>16.2</b> Running the diagnose Command</a></li>
<li class="chapter" data-level="16.3" data-path="diagnose.html"><a href="diagnose.html#diagnose-warnings-and-recommendations"><i class="fa fa-check"></i><b>16.3</b> <code>diagnose</code> Warnings and Recommendations</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="diagnose.html"><a href="diagnose.html#divergent-transitions-after-warmup"><i class="fa fa-check"></i><b>16.3.1</b> Divergent transitions after warmup</a></li>
<li class="chapter" data-level="16.3.2" data-path="diagnose.html"><a href="diagnose.html#maximum-treedepth-exceeded"><i class="fa fa-check"></i><b>16.3.2</b> Maximum treedepth exceeded</a></li>
<li class="chapter" data-level="16.3.3" data-path="diagnose.html"><a href="diagnose.html#low-e-bfmi-values---sampler-transitions-hmc-potential-energy."><i class="fa fa-check"></i><b>16.3.3</b> Low E-BFMI values - sampler transitions HMC potential energy.</a></li>
<li class="chapter" data-level="16.3.4" data-path="diagnose.html"><a href="diagnose.html#low-effective-sample-sizes"><i class="fa fa-check"></i><b>16.3.4</b> Low effective sample sizes</a></li>
<li class="chapter" data-level="16.3.5" data-path="diagnose.html"><a href="diagnose.html#high-hatr"><i class="fa fa-check"></i><b>16.3.5</b> High <span class="math inline">\(\hat{R}\)</span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="print-deprecated-mcmc-output-analysis.html"><a href="print-deprecated-mcmc-output-analysis.html"><i class="fa fa-check"></i><b>17</b> <code>print</code> (deprecated): MCMC Output Analysis</a></li>
<li><a href="appendices.html#appendices"><i style='font-size: 110%; color:#990017;'>Appendices</i></a></li>
<li class="chapter" data-level="18" data-path="stan-csv.html"><a href="stan-csv.html"><i class="fa fa-check"></i><b>18</b> Stan CSV File Format</a>
<ul>
<li class="chapter" data-level="18.1" data-path="stan-csv.html"><a href="stan-csv.html#mcmc-sampler-csv-output"><i class="fa fa-check"></i><b>18.1</b> MCMC Sampler CSV Output</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="stan-csv.html"><a href="stan-csv.html#sampler-output"><i class="fa fa-check"></i><b>18.1.1</b> Sampler output</a></li>
<li class="chapter" data-level="18.1.2" data-path="stan-csv.html"><a href="stan-csv.html#diagnostic-file---latent-hamiltonin-plus-gradients"><i class="fa fa-check"></i><b>18.1.2</b> Diagnostic file - latent Hamiltonin plus gradients</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="stan-csv.html"><a href="stan-csv.html#optimization-output"><i class="fa fa-check"></i><b>18.2</b> Optimization Output</a></li>
<li class="chapter" data-level="18.3" data-path="stan-csv.html"><a href="stan-csv.html#variational-inference-output"><i class="fa fa-check"></i><b>18.3</b> Variational Inference Output</a></li>
<li class="chapter" data-level="18.4" data-path="stan-csv.html"><a href="stan-csv.html#generate-quantities-outputs"><i class="fa fa-check"></i><b>18.4</b> Generate Quantities Outputs</a></li>
<li class="chapter" data-level="18.5" data-path="stan-csv.html"><a href="stan-csv.html#diagnose-method-outputs"><i class="fa fa-check"></i><b>18.5</b> Diagnose Method Outputs</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="json.html"><a href="json.html"><i class="fa fa-check"></i><b>19</b> JSON Format for CmdStan</a>
<ul>
<li class="chapter" data-level="19.1" data-path="json.html"><a href="json.html#json-syntax-summary"><i class="fa fa-check"></i><b>19.1</b> JSON Syntax Summary</a></li>
<li class="chapter" data-level="19.2" data-path="json.html"><a href="json.html#stan-data-types-in-json-notation"><i class="fa fa-check"></i><b>19.2</b> Stan Data Types in JSON Notation</a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="json.html"><a href="json.html#empty-arrays-in-json"><i class="fa fa-check"></i><b>19.2.1</b> Empty arrays in JSON</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="20" data-path="rdump.html"><a href="rdump.html"><i class="fa fa-check"></i><b>20</b> RDump Format for CmdStan</a>
<ul>
<li class="chapter" data-level="20.1" data-path="rdump.html"><a href="rdump.html#creating-dump-files"><i class="fa fa-check"></i><b>20.1</b> Creating Dump Files</a></li>
<li class="chapter" data-level="20.2" data-path="rdump.html"><a href="rdump.html#scalar-variables"><i class="fa fa-check"></i><b>20.2</b> Scalar Variables</a></li>
<li class="chapter" data-level="20.3" data-path="rdump.html"><a href="rdump.html#sequence-variables"><i class="fa fa-check"></i><b>20.3</b> Sequence Variables</a></li>
<li class="chapter" data-level="20.4" data-path="rdump.html"><a href="rdump.html#array-variables"><i class="fa fa-check"></i><b>20.4</b> Array Variables</a></li>
<li class="chapter" data-level="20.5" data-path="rdump.html"><a href="rdump.html#matrix--and-vector-valued-variables"><i class="fa fa-check"></i><b>20.5</b> Matrix- and Vector-Valued Variables</a>
<ul>
<li class="chapter" data-level="20.5.1" data-path="rdump.html"><a href="rdump.html#vector-dump-format"><i class="fa fa-check"></i><b>20.5.1</b> Vector Dump Format</a></li>
<li class="chapter" data-level="20.5.2" data-path="rdump.html"><a href="rdump.html#matrix-dump-format"><i class="fa fa-check"></i><b>20.5.2</b> Matrix Dump Format</a></li>
<li class="chapter" data-level="20.5.3" data-path="rdump.html"><a href="rdump.html#arrays-of-vectors-and-matrices"><i class="fa fa-check"></i><b>20.5.3</b> Arrays of Vectors and Matrices</a></li>
</ul></li>
<li class="chapter" data-level="20.6" data-path="rdump.html"><a href="rdump.html#integer--and-real-valued-variables"><i class="fa fa-check"></i><b>20.6</b> Integer- and Real-Valued Variables</a>
<ul>
<li class="chapter" data-level="20.6.1" data-path="rdump.html"><a href="rdump.html#scientific-notation"><i class="fa fa-check"></i><b>20.6.1</b> Scientific Notation</a></li>
<li class="chapter" data-level="20.6.2" data-path="rdump.html"><a href="rdump.html#infinite-and-not-a-number-values"><i class="fa fa-check"></i><b>20.6.2</b> Infinite and Not-a-Number Values</a></li>
</ul></li>
<li class="chapter" data-level="20.7" data-path="rdump.html"><a href="rdump.html#quoted-variable-names"><i class="fa fa-check"></i><b>20.7</b> Quoted Variable Names</a></li>
<li class="chapter" data-level="20.8" data-path="rdump.html"><a href="rdump.html#line-breaks"><i class="fa fa-check"></i><b>20.8</b> Line Breaks</a></li>
<li class="chapter" data-level="20.9" data-path="rdump.html"><a href="rdump.html#bnf-grammar-for-dump-data"><i class="fa fa-check"></i><b>20.9</b> BNF Grammar for Dump Data</a></li>
</ul></li>
<li><a href="bibliography.html#bibliography"><i style='font-size: 110%; color:#990017;'>Bibliography</i></a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">CmdStan User’s Guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="compiling-a-stan-program" class="section level1">
<h1><span class="header-section-number">3</span> Compiling a Stan Program</h1>
<p>A Stan program must be in a file with extension <code>.stan</code>.
The CmdStan makefile rules specify all necessary steps to
translate files with suffix <code>.stan</code> to a CmdStan executable program.
This is a two-stage process:</p>
<ul>
<li>first the Stan program is translated to C++ by the <code>stanc</code> compiler</li>
<li>then the C++ compiler compiles all C++ sources and links them together
with the CmdStan interface program and the Stan and math libraries.</li>
</ul>
<div id="invoking-the-make-utility" class="section level2">
<h2><span class="header-section-number">3.1</span> Invoking the Make Utility</h2>
<p>To compile Stan programs, you must invoke the Make program from
the <code>&lt;cmdstan-home&gt;</code> directory.
The Stan program can be in a different directory, but the directory path
names cannot contain spaces - this limitation is imposed by Make.</p>
<pre><code>&gt; cd &lt;cmdstan_home&gt;</code></pre>
<p>In the call to the Make program, the target is name of the CmdStan executable
corresponding to the Stan program file.
On Mac and Linux, this is the name of the Stan program with the <code>.stan</code>
omitted. On Windows, replace <code>.stan</code> with <code>.exe</code>, and make
sure that the path is given with slashes and not backslashes.
To build the Bernoulli example, on Mac and Linux:</p>
<pre><code>&gt; make examples/bernoulli/bernoulli</code></pre>
<p>On Windows, the command is the same with the addition of <code>.exe</code>
at the end of the target (<em>note the use of forward slashes</em>):</p>
<pre><code>&gt; make examples/bernoulli/bernoulli.exe</code></pre>
<p>The generated C++ code (<code>bernoulli.hpp</code>), object file (<code>bernoulli.o</code>)
and the compiled executable will be placed in the same directory as the Stan program.</p>
<p>The compiled executable consists of the Stan model and the CmdStan command line interface
which provides inference algorithms to do MCMC sampling, optimization, and variational inference.
The following sections provide examples of doing inference using each method
on the example model and data file.</p>
</div>
<div id="dependencies" class="section level2">
<h2><span class="header-section-number">3.2</span> Dependencies</h2>
<p>When executing a Make target, all its dependencies are checked
to see if they are up to date, and if they are not, they are rebuilt.
If the you call Make with target <code>bernoulli</code> twice in a row, without any
editing <code>bernoulli.stan</code> or otherwise changing the system,
on the second invocation, Make will determine that the executable is already newer
than the Stan source file and will not recompile the program:</p>
<pre><code>&gt; make examples/bernoulli/bernoulli
make: `examples/bernoulli/bernoulli&#39; is up to date.</code></pre>
<p>If the file containing the Stan program is updated,
the next call to <code>make</code> will rebuild the CmdStan executable.</p>
</div>
<div id="compiler-errors" class="section level2">
<h2><span class="header-section-number">3.3</span> Compiler Errors</h2>
<p>The Stan probabilistic programming language is a programming language with a rich syntax,
as such, it is often the case that a carefully written program contains errors.</p>
<p>The simplest class of errors are simple syntax errors such as forgetting
the semi-colon statement termination marker at the end of a line,
or typos such as a misspelled variable name.
For example, if in the <code>bernoulli.stan</code> program, we introduce a typo on line <span class="math inline">\(9\)</span>
by writing <code>thata</code> instead of <code>theta</code>, the Make command fails with the following</p>
<pre><code>--- Translating Stan model to C++ code ---
bin/stanc  --o=bernoulli.hpp bernoulli.stan

Semantic error in &#39;bernoulli.stan&#39;, line 9, column 2 to column 7:
   -------------------------------------------------
     7:  } 
     8:  model {
     9:    thata ~ beta(1,1);  // uniform prior on interval 0,1
           ^
    10:    y ~ bernoulli(theta);
    11:  }
   -------------------------------------------------

Identifier &#39;thata&#39; not in scope.

make: *** [bernoulli.hpp] Error 1</code></pre>
<p>Stan is a <a href="https://mc-stan.org/docs/reference-manual/data-types-chapter.html">strongly-typed language</a>;
and the compiler will throw an error if statements or expressions violate the type rules.
The following trivial program <code>foo.stan</code> contains an illegal assignment statement:</p>
<pre><code>data {
  real x;
}
transformed data {
  int y = x;
}</code></pre>
<p>The Make command fails with the following:</p>
<pre><code>Semantic error in &#39;foo.stan&#39;, line 5, column 2 to column 12:
   -------------------------------------------------
     3:  }
     4:  transformed data {
     5:    int y = x;
           ^
     6:  }
   -------------------------------------------------

Ill-typed arguments supplied to assignment operator =: lhs has type int and rhs has type real</code></pre>
<p>The <a href="https://mc-stan.org/docs/reference-manual/language.html#language">Stan Reference Manual</a>
provides a complete specification of the Stan programming language.</p>
</div>
<div id="troubleshooting-c-compiler-or-linker-errors" class="section level2">
<h2><span class="header-section-number">3.4</span> Troubleshooting C++ Compiler or Linker Errors</h2>
<p>If the stanc compiler successfully translates a Stan program to C++,
the resulting C++ code should be valid C++ which can be
compiled into an executable.
The stanc compiler is also a program, and while it has been extensively tested,
it may still contain errors such that the generated C++ code fails to compile.</p>
<p>The Make command prints the following message to the terminal
at the point when it compiles and links the C++ file:</p>
<pre><code>--- Compiling, linking C++ code ---</code></pre>
<p>If the program fails to compile for any reason,
the C++ compiler and linker will most likely print a long series
of error messages to the console.</p>
<p>If this happens, please report the error, together with the Stan program on either
the <a href="https://discourse.mc-stan.org/">Stan Forums</a> or on the Stan compiler
GitHub <a href="https://github.com/stan-dev/stanc3/issues">issues tracker</a>.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="example-model-and-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="mcmc-intro.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"search": true,
"toolbar": {
"position": "static"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
