<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>19 Stan CSV File Format | CmdStan User’s Guide</title>
  <meta name="description" content="CmdStan user’s guide." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="19 Stan CSV File Format | CmdStan User’s Guide" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="img/logo-tm.pdf" />
  <meta property="og:description" content="CmdStan user’s guide." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="19 Stan CSV File Format | CmdStan User’s Guide" />
  
  <meta name="twitter:description" content="CmdStan user’s guide." />
  <meta name="twitter:image" content="img/logo-tm.pdf" />

<meta name="author" content="Stan Development Team" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="appendices.html"/>
<link rel="next" href="json.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>



<link rel="stylesheet" href="stan-manual.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li style="font-size:110%; font-weight:400; font-family: Verdana, Helvetica, sans; line-height:1.4; margin: 0.5em 0 0 1em"><a href="https://mc-stan.org/docs/cmdstan-guide/index.html" style="color:#4183C4">CmdStan User's Guide</a></li>

<li class="divider"></li>
<li><a href="index.html#introduction"><i style='font-size: 110%; color:#990017;'>Introduction</i></a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Stan Home Page</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#licensing"><i class="fa fa-check"></i>Licensing</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#stan-documentation-users-guide-and-reference-manuals"><i class="fa fa-check"></i>Stan Documentation: User’s Guide and Reference Manuals</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#benefits-of-cmdstan"><i class="fa fa-check"></i>Benefits of CmdStan</a></li>
</ul></li>
<li><a href="quickstart-guide.html#quickstart-guide"><i style='font-size: 110%; color:#990017;'>QuickStart Guide</i></a></li>
<li class="chapter" data-level="1" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html"><i class="fa fa-check"></i><b>1</b> CmdStan Installation</a>
<ul>
<li class="chapter" data-level="1.1" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html#installing-the-c-toolchain"><i class="fa fa-check"></i><b>1.1</b> Installing the C++ Toolchain</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html#linux-g-and-make"><i class="fa fa-check"></i><b>1.1.1</b> Linux: <code>g++</code> and <code>make</code></a></li>
<li class="chapter" data-level="1.1.2" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html#macos-clang-and-make"><i class="fa fa-check"></i><b>1.1.2</b> MacOS: <code>clang++</code> and <code>make</code></a></li>
<li class="chapter" data-level="1.1.3" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html#windows-g-and-mingw32-make"><i class="fa fa-check"></i><b>1.1.3</b> Windows: <code>g++</code> and <code>mingw32-make</code></a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html#gnu-make"><i class="fa fa-check"></i><b>1.2</b> GNU-Make Utility</a></li>
<li class="chapter" data-level="1.3" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html#git-clone.section"><i class="fa fa-check"></i><b>1.3</b> Clone the GitHub CmdStan Repository</a></li>
<li class="chapter" data-level="1.4" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html#building-cmdstan"><i class="fa fa-check"></i><b>1.4</b> Building CmdStan</a></li>
<li class="chapter" data-level="1.5" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html#trouble-shooting-the-installation"><i class="fa fa-check"></i><b>1.5</b> Trouble-shooting the installation</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="example-model-and-data.html"><a href="example-model-and-data.html"><i class="fa fa-check"></i><b>2</b> Example Model and Data</a></li>
<li class="chapter" data-level="3" data-path="compiling-a-stan-program.html"><a href="compiling-a-stan-program.html"><i class="fa fa-check"></i><b>3</b> Compiling a Stan Program</a>
<ul>
<li class="chapter" data-level="3.1" data-path="compiling-a-stan-program.html"><a href="compiling-a-stan-program.html#invoking-the-make-utility"><i class="fa fa-check"></i><b>3.1</b> Invoking the Make Utility</a></li>
<li class="chapter" data-level="3.2" data-path="compiling-a-stan-program.html"><a href="compiling-a-stan-program.html#dependencies"><i class="fa fa-check"></i><b>3.2</b> Dependencies</a></li>
<li class="chapter" data-level="3.3" data-path="compiling-a-stan-program.html"><a href="compiling-a-stan-program.html#compiler-errors"><i class="fa fa-check"></i><b>3.3</b> Compiler Errors</a></li>
<li class="chapter" data-level="3.4" data-path="compiling-a-stan-program.html"><a href="compiling-a-stan-program.html#troubleshooting-c-compiler-or-linker-errors"><i class="fa fa-check"></i><b>3.4</b> Troubleshooting C++ Compiler or Linker Errors</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="mcmc-intro.html"><a href="mcmc-intro.html"><i class="fa fa-check"></i><b>4</b> MCMC Sampling</a>
<ul>
<li class="chapter" data-level="4.1" data-path="mcmc-intro.html"><a href="mcmc-intro.html#running-the-sampler"><i class="fa fa-check"></i><b>4.1</b> Running the Sampler</a></li>
<li class="chapter" data-level="4.2" data-path="mcmc-intro.html"><a href="mcmc-intro.html#running-multiple-chains"><i class="fa fa-check"></i><b>4.2</b> Running Multiple Chains</a></li>
<li class="chapter" data-level="4.3" data-path="mcmc-intro.html"><a href="mcmc-intro.html#mcmc_output_csv"><i class="fa fa-check"></i><b>4.3</b> Stan CSV Output File</a></li>
<li class="chapter" data-level="4.4" data-path="mcmc-intro.html"><a href="mcmc-intro.html#summarizing-sampler-outputs-with-stansummary"><i class="fa fa-check"></i><b>4.4</b> Summarizing Sampler Output(s) with <code>stansummary</code></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="optimization.html"><a href="optimization.html"><i class="fa fa-check"></i><b>5</b> Optimization</a></li>
<li class="chapter" data-level="6" data-path="variational-inference.html"><a href="variational-inference.html"><i class="fa fa-check"></i><b>6</b> Variational Inference</a></li>
<li class="chapter" data-level="7" data-path="gc-intro.html"><a href="gc-intro.html"><i class="fa fa-check"></i><b>7</b> Generating Quantities of Interest from a Fitted Model</a></li>
<li><a href="reference-manual.html#reference-manual"><i style='font-size: 110%; color:#990017;'>Reference Manual</i></a></li>
<li class="chapter" data-level="8" data-path="command-line-interface-overview.html"><a href="command-line-interface-overview.html"><i class="fa fa-check"></i><b>8</b> Command-Line Interface Overview</a>
<ul>
<li class="chapter" data-level="8.1" data-path="command-line-interface-overview.html"><a href="command-line-interface-overview.html#input-data-argument"><i class="fa fa-check"></i><b>8.1</b> Input Data Argument</a></li>
<li class="chapter" data-level="8.2" data-path="command-line-interface-overview.html"><a href="command-line-interface-overview.html#output-control-arguments"><i class="fa fa-check"></i><b>8.2</b> Output Control Arguments</a></li>
<li class="chapter" data-level="8.3" data-path="command-line-interface-overview.html"><a href="command-line-interface-overview.html#initialize-model-parameters-argument"><i class="fa fa-check"></i><b>8.3</b> Initialize Model Parameters Argument</a></li>
<li class="chapter" data-level="8.4" data-path="command-line-interface-overview.html"><a href="command-line-interface-overview.html#random-number-generator-arguments"><i class="fa fa-check"></i><b>8.4</b> Random Number Generator Arguments</a></li>
<li class="chapter" data-level="8.5" data-path="command-line-interface-overview.html"><a href="command-line-interface-overview.html#chain-identifier-argument-id"><i class="fa fa-check"></i><b>8.5</b> Chain Identifier Argument: <code>id</code></a></li>
<li class="chapter" data-level="8.6" data-path="command-line-interface-overview.html"><a href="command-line-interface-overview.html#command-line-help"><i class="fa fa-check"></i><b>8.6</b> Command Line Help</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="mcmc-config.html"><a href="mcmc-config.html"><i class="fa fa-check"></i><b>9</b> MCMC Sampling using Hamiltonian Monte Carlo</a>
<ul>
<li class="chapter" data-level="9.1" data-path="mcmc-config.html"><a href="mcmc-config.html#iterations"><i class="fa fa-check"></i><b>9.1</b> Iterations</a></li>
<li class="chapter" data-level="9.2" data-path="mcmc-config.html"><a href="mcmc-config.html#adaptation"><i class="fa fa-check"></i><b>9.2</b> Adaptation</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="mcmc-config.html"><a href="mcmc-config.html#step-size-optimization-configuration"><i class="fa fa-check"></i><b>9.2.1</b> Step size optimization configuration</a></li>
<li class="chapter" data-level="9.2.2" data-path="mcmc-config.html"><a href="mcmc-config.html#warmup-schedule-configuration"><i class="fa fa-check"></i><b>9.2.2</b> Warmup schedule configuration</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="mcmc-config.html"><a href="mcmc-config.html#algorithm"><i class="fa fa-check"></i><b>9.3</b> Algorithm</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="mcmc-config.html"><a href="mcmc-config.html#samples-from-a-set-of-fixed-parameters"><i class="fa fa-check"></i><b>9.3.1</b> Samples from a set of fixed parameters</a></li>
<li class="chapter" data-level="9.3.2" data-path="mcmc-config.html"><a href="mcmc-config.html#hmc-samplers"><i class="fa fa-check"></i><b>9.3.2</b> HMC samplers</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="mcmc-config.html"><a href="mcmc-config.html#sampler-diag-file"><i class="fa fa-check"></i><b>9.4</b> Sampler Diagnostic File</a></li>
<li class="chapter" data-level="9.5" data-path="mcmc-config.html"><a href="mcmc-config.html#examples"><i class="fa fa-check"></i><b>9.5</b> Examples</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="mcmc-config.html"><a href="mcmc-config.html#running-multiple-chains-with-a-specified-rng-seed"><i class="fa fa-check"></i><b>9.5.1</b> Running multiple chains with a specified RNG seed</a></li>
<li class="chapter" data-level="9.5.2" data-path="mcmc-config.html"><a href="mcmc-config.html#changing-the-default-warmup-and-sampling-iterations"><i class="fa fa-check"></i><b>9.5.2</b> Changing the default warmup and sampling iterations</a></li>
<li class="chapter" data-level="9.5.3" data-path="mcmc-config.html"><a href="mcmc-config.html#saving-warmup-draws"><i class="fa fa-check"></i><b>9.5.3</b> Saving warmup draws</a></li>
<li class="chapter" data-level="9.5.4" data-path="mcmc-config.html"><a href="mcmc-config.html#initializing-parameters"><i class="fa fa-check"></i><b>9.5.4</b> Initializing parameters</a></li>
<li class="chapter" data-level="9.5.5" data-path="mcmc-config.html"><a href="mcmc-config.html#specifying-the-metric-and-stepsize"><i class="fa fa-check"></i><b>9.5.5</b> Specifying the metric and stepsize</a></li>
<li class="chapter" data-level="9.5.6" data-path="mcmc-config.html"><a href="mcmc-config.html#changing-the-nuts-hmc-adaptation-parameters"><i class="fa fa-check"></i><b>9.5.6</b> Changing the NUTS-HMC adaptation parameters</a></li>
<li class="chapter" data-level="9.5.7" data-path="mcmc-config.html"><a href="mcmc-config.html#increasing-the-tree-depth"><i class="fa fa-check"></i><b>9.5.7</b> Increasing the tree-depth</a></li>
<li class="chapter" data-level="9.5.8" data-path="mcmc-config.html"><a href="mcmc-config.html#capturing-hamiltonian-diagnostics-and-gradients"><i class="fa fa-check"></i><b>9.5.8</b> Capturing Hamiltonian diagnostics and gradients</a></li>
<li class="chapter" data-level="9.5.9" data-path="mcmc-config.html"><a href="mcmc-config.html#suppressing-progress-updates-to-the-console"><i class="fa fa-check"></i><b>9.5.9</b> Suppressing progress updates to the console</a></li>
<li class="chapter" data-level="9.5.10" data-path="mcmc-config.html"><a href="mcmc-config.html#everything-example"><i class="fa fa-check"></i><b>9.5.10</b> Everything Example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="maximum-likelihood-estimation.html"><a href="maximum-likelihood-estimation.html"><i class="fa fa-check"></i><b>10</b> Maximum Likelihood Estimation</a>
<ul>
<li class="chapter" data-level="10.1" data-path="maximum-likelihood-estimation.html"><a href="maximum-likelihood-estimation.html#optimization-algorithms"><i class="fa fa-check"></i><b>10.1</b> Optimization Algorithms</a></li>
<li class="chapter" data-level="10.2" data-path="maximum-likelihood-estimation.html"><a href="maximum-likelihood-estimation.html#the-quasi-newton-optimizers"><i class="fa fa-check"></i><b>10.2</b> The quasi-Newton optimizers</a></li>
<li class="chapter" data-level="10.3" data-path="maximum-likelihood-estimation.html"><a href="maximum-likelihood-estimation.html#the-newton-optimizer"><i class="fa fa-check"></i><b>10.3</b> The Newton optimizer</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="variational-inference-algorithm-advi.html"><a href="variational-inference-algorithm-advi.html"><i class="fa fa-check"></i><b>11</b> Variational Inference Algorithm: ADVI</a>
<ul>
<li class="chapter" data-level="11.1" data-path="variational-inference-algorithm-advi.html"><a href="variational-inference-algorithm-advi.html#variational-algorithms"><i class="fa fa-check"></i><b>11.1</b> Variational Algorithms</a></li>
<li class="chapter" data-level="11.2" data-path="variational-inference-algorithm-advi.html"><a href="variational-inference-algorithm-advi.html#configuration"><i class="fa fa-check"></i><b>11.2</b> Configuration</a></li>
<li class="chapter" data-level="11.3" data-path="variational-inference-algorithm-advi.html"><a href="variational-inference-algorithm-advi.html#csv-output"><i class="fa fa-check"></i><b>11.3</b> CSV Output</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="standalone-generate-quantities.html"><a href="standalone-generate-quantities.html"><i class="fa fa-check"></i><b>12</b> Standalone Generate Quantities</a></li>
<li class="chapter" data-level="13" data-path="diagnosing-hmc-by-comparison-of-gradients.html"><a href="diagnosing-hmc-by-comparison-of-gradients.html"><i class="fa fa-check"></i><b>13</b> Diagnosing HMC by Comparison of Gradients</a></li>
<li class="chapter" data-level="14" data-path="parallelization.html"><a href="parallelization.html"><i class="fa fa-check"></i><b>14</b> Parallelization</a></li>
<li><a href="cmdstan-tools.html#cmdstan-tools"><i style='font-size: 110%; color:#990017;'>CmdStan Tools</i></a></li>
<li class="chapter" data-level="15" data-path="stanc.html"><a href="stanc.html"><i class="fa fa-check"></i><b>15</b> <code>stanc</code>: Translating Stan to C++</a>
<ul>
<li class="chapter" data-level="15.1" data-path="stanc.html"><a href="stanc.html#instantiating-the-stanc-binary"><i class="fa fa-check"></i><b>15.1</b> Instantiating the <code>stanc</code> Binary</a></li>
<li class="chapter" data-level="15.2" data-path="stanc.html"><a href="stanc.html#the-stan-compiler-program"><i class="fa fa-check"></i><b>15.2</b> The Stan Compiler Program</a></li>
<li class="chapter" data-level="15.3" data-path="stanc.html"><a href="stanc.html#command-line-options-for-stanc3"><i class="fa fa-check"></i><b>15.3</b> Command-Line Options for stanc3</a></li>
<li class="chapter" data-level="15.4" data-path="stanc.html"><a href="stanc.html#command-line-options-for-stanc2"><i class="fa fa-check"></i><b>15.4</b> Command-Line Options for stanc2</a></li>
<li class="chapter" data-level="15.5" data-path="stanc.html"><a href="stanc.html#using-external-c-code"><i class="fa fa-check"></i><b>15.5</b> Using External C++ Code</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="stansummary.html"><a href="stansummary.html"><i class="fa fa-check"></i><b>16</b> <code>stansummary</code>: MCMC Output Analysis</a>
<ul>
<li class="chapter" data-level="16.1" data-path="stansummary.html"><a href="stansummary.html#building-the-stansummary-command"><i class="fa fa-check"></i><b>16.1</b> Building the stansummary Command</a></li>
<li class="chapter" data-level="16.2" data-path="stansummary.html"><a href="stansummary.html#running-the-stansummary-program"><i class="fa fa-check"></i><b>16.2</b> Running the <code>stansummary</code> Program</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="stansummary.html"><a href="stansummary.html#sampler-parameters"><i class="fa fa-check"></i><b>16.2.1</b> Sampler Parameters</a></li>
<li class="chapter" data-level="16.2.2" data-path="stansummary.html"><a href="stansummary.html#model-parameters-and-quantities-of-interest"><i class="fa fa-check"></i><b>16.2.2</b> Model Parameters and Quantities of Interest</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="stansummary.html"><a href="stansummary.html#command-line-options"><i class="fa fa-check"></i><b>16.3</b> Command-line Options</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="diagnose.html"><a href="diagnose.html"><i class="fa fa-check"></i><b>17</b> <code>diagnose</code>: Diagnosing Biased Hamiltonian Monte Carlo Inferences</a>
<ul>
<li class="chapter" data-level="17.1" data-path="diagnose.html"><a href="diagnose.html#building-the-diagnose-command"><i class="fa fa-check"></i><b>17.1</b> Building the diagnose Command</a></li>
<li class="chapter" data-level="17.2" data-path="diagnose.html"><a href="diagnose.html#running-the-diagnose-command"><i class="fa fa-check"></i><b>17.2</b> Running the diagnose Command</a></li>
<li class="chapter" data-level="17.3" data-path="diagnose.html"><a href="diagnose.html#diagnose-warnings-and-recommendations"><i class="fa fa-check"></i><b>17.3</b> <code>diagnose</code> Warnings and Recommendations</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="diagnose.html"><a href="diagnose.html#divergent-transitions-after-warmup"><i class="fa fa-check"></i><b>17.3.1</b> Divergent transitions after warmup</a></li>
<li class="chapter" data-level="17.3.2" data-path="diagnose.html"><a href="diagnose.html#maximum-treedepth-exceeded"><i class="fa fa-check"></i><b>17.3.2</b> Maximum treedepth exceeded</a></li>
<li class="chapter" data-level="17.3.3" data-path="diagnose.html"><a href="diagnose.html#low-e-bfmi-values---sampler-transitions-hmc-potential-energy."><i class="fa fa-check"></i><b>17.3.3</b> Low E-BFMI values - sampler transitions HMC potential energy.</a></li>
<li class="chapter" data-level="17.3.4" data-path="diagnose.html"><a href="diagnose.html#low-effective-sample-sizes"><i class="fa fa-check"></i><b>17.3.4</b> Low effective sample sizes</a></li>
<li class="chapter" data-level="17.3.5" data-path="diagnose.html"><a href="diagnose.html#high-hatr"><i class="fa fa-check"></i><b>17.3.5</b> High <span class="math inline">\(\hat{R}\)</span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="print-deprecated-mcmc-output-analysis.html"><a href="print-deprecated-mcmc-output-analysis.html"><i class="fa fa-check"></i><b>18</b> <code>print</code> (deprecated): MCMC Output Analysis</a></li>
<li><a href="appendices.html#appendices"><i style='font-size: 110%; color:#990017;'>Appendices</i></a></li>
<li class="chapter" data-level="19" data-path="stan-csv.html"><a href="stan-csv.html"><i class="fa fa-check"></i><b>19</b> Stan CSV File Format</a>
<ul>
<li class="chapter" data-level="19.1" data-path="stan-csv.html"><a href="stan-csv.html#csv-column-names-and-order"><i class="fa fa-check"></i><b>19.1</b> CSV Column Names and Order</a></li>
<li class="chapter" data-level="19.2" data-path="stan-csv.html"><a href="stan-csv.html#mcmc-sampler-csv-output"><i class="fa fa-check"></i><b>19.2</b> MCMC Sampler CSV Output</a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="stan-csv.html"><a href="stan-csv.html#sampler-stan-csv-output-file"><i class="fa fa-check"></i><b>19.2.1</b> Sampler Stan CSV output file</a></li>
<li class="chapter" data-level="19.2.2" data-path="stan-csv.html"><a href="stan-csv.html#diagnostic-csv-output-file"><i class="fa fa-check"></i><b>19.2.2</b> Diagnostic CSV output file</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="stan-csv.html"><a href="stan-csv.html#optimization-output"><i class="fa fa-check"></i><b>19.3</b> Optimization Output</a></li>
<li class="chapter" data-level="19.4" data-path="stan-csv.html"><a href="stan-csv.html#variational-inference-output"><i class="fa fa-check"></i><b>19.4</b> Variational Inference Output</a></li>
<li class="chapter" data-level="19.5" data-path="stan-csv.html"><a href="stan-csv.html#generate-quantities-outputs"><i class="fa fa-check"></i><b>19.5</b> Generate Quantities Outputs</a></li>
<li class="chapter" data-level="19.6" data-path="stan-csv.html"><a href="stan-csv.html#diagnose-method-outputs"><i class="fa fa-check"></i><b>19.6</b> Diagnose Method Outputs</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="json.html"><a href="json.html"><i class="fa fa-check"></i><b>20</b> JSON Format for CmdStan</a>
<ul>
<li class="chapter" data-level="20.1" data-path="json.html"><a href="json.html#creating-json-files"><i class="fa fa-check"></i><b>20.1</b> Creating JSON Files</a></li>
<li class="chapter" data-level="20.2" data-path="json.html"><a href="json.html#json-syntax-summary"><i class="fa fa-check"></i><b>20.2</b> JSON Syntax Summary</a></li>
<li class="chapter" data-level="20.3" data-path="json.html"><a href="json.html#stan-data-types-in-json-notation"><i class="fa fa-check"></i><b>20.3</b> Stan Data Types in JSON Notation</a>
<ul>
<li class="chapter" data-level="20.3.1" data-path="json.html"><a href="json.html#empty-arrays-in-json"><i class="fa fa-check"></i><b>20.3.1</b> Empty arrays in JSON</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="21" data-path="rdump.html"><a href="rdump.html"><i class="fa fa-check"></i><b>21</b> RDump Format for CmdStan</a>
<ul>
<li class="chapter" data-level="21.1" data-path="rdump.html"><a href="rdump.html#creating-dump-files"><i class="fa fa-check"></i><b>21.1</b> Creating Dump Files</a></li>
<li class="chapter" data-level="21.2" data-path="rdump.html"><a href="rdump.html#scalar-variables"><i class="fa fa-check"></i><b>21.2</b> Scalar Variables</a></li>
<li class="chapter" data-level="21.3" data-path="rdump.html"><a href="rdump.html#sequence-variables"><i class="fa fa-check"></i><b>21.3</b> Sequence Variables</a></li>
<li class="chapter" data-level="21.4" data-path="rdump.html"><a href="rdump.html#array-variables"><i class="fa fa-check"></i><b>21.4</b> Array Variables</a></li>
<li class="chapter" data-level="21.5" data-path="rdump.html"><a href="rdump.html#matrix--and-vector-valued-variables"><i class="fa fa-check"></i><b>21.5</b> Matrix- and Vector-Valued Variables</a>
<ul>
<li class="chapter" data-level="21.5.1" data-path="rdump.html"><a href="rdump.html#vector-dump-format"><i class="fa fa-check"></i><b>21.5.1</b> Vector Dump Format</a></li>
<li class="chapter" data-level="21.5.2" data-path="rdump.html"><a href="rdump.html#matrix-dump-format"><i class="fa fa-check"></i><b>21.5.2</b> Matrix Dump Format</a></li>
<li class="chapter" data-level="21.5.3" data-path="rdump.html"><a href="rdump.html#arrays-of-vectors-and-matrices"><i class="fa fa-check"></i><b>21.5.3</b> Arrays of Vectors and Matrices</a></li>
</ul></li>
<li class="chapter" data-level="21.6" data-path="rdump.html"><a href="rdump.html#integer--and-real-valued-variables"><i class="fa fa-check"></i><b>21.6</b> Integer- and Real-Valued Variables</a>
<ul>
<li class="chapter" data-level="21.6.1" data-path="rdump.html"><a href="rdump.html#scientific-notation"><i class="fa fa-check"></i><b>21.6.1</b> Scientific Notation</a></li>
<li class="chapter" data-level="21.6.2" data-path="rdump.html"><a href="rdump.html#infinite-and-not-a-number-values"><i class="fa fa-check"></i><b>21.6.2</b> Infinite and Not-a-Number Values</a></li>
</ul></li>
<li class="chapter" data-level="21.7" data-path="rdump.html"><a href="rdump.html#quoted-variable-names"><i class="fa fa-check"></i><b>21.7</b> Quoted Variable Names</a></li>
<li class="chapter" data-level="21.8" data-path="rdump.html"><a href="rdump.html#line-breaks"><i class="fa fa-check"></i><b>21.8</b> Line Breaks</a></li>
<li class="chapter" data-level="21.9" data-path="rdump.html"><a href="rdump.html#bnf-grammar-for-dump-data"><i class="fa fa-check"></i><b>21.9</b> BNF Grammar for Dump Data</a></li>
</ul></li>
<li><a href="bibliography.html#bibliography"><i style='font-size: 110%; color:#990017;'>Bibliography</i></a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">CmdStan User’s Guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">

<div>
This is an old version, <a href="https://mc-stan.org/docs/cmdstan-guide/stan-csv.html">view current version</a>.
</div>
<div id="stan_csv" class="section level1">
<h1><span class="header-section-number">19</span> Stan CSV File Format</h1>
<p>The output from all CmdStan methods is in <a href="https://en.wikipedia.org/wiki/Comma-separated_values">CSV format</a>.
A Stan CSV file is a data table where the columns are the method and model parameters and quantities of interest.
Each row contains one record’s worth of data in plain-text format using the comma character (‘,’)
as the field delimiter (hence the name).</p>
<p>For the Stan CSV files, data is strictly numerical,
however, possible values include both positive and negative
infinity and “Not-a-Number” which are represented as
the strings <code>NaN</code>, <code>inf</code>, <code>+inf</code>, <code>-inf</code>.
All other values are written in decimal notation with
at most 6 digits of precision.</p>
<p>Stan CSV files have a header row containing the column names.
They also make extensive use of CSV comments,
i.e., lines which begin with the <code>#</code> character.
In addition to initial and final comment rows,
some methods also put comment rows in the middle of the data table,
which makes it difficult to use many of the commonly used CSV parser packages.</p>
<div id="csv-column-names-and-order" class="section level2">
<h2><span class="header-section-number">19.1</span> CSV Column Names and Order</h2>
<p>The data table is laid out with zero or more method-specific columns followed by
the Stan program variables declared in the parameter block,
then the variables in the transformed parameters block, finally variables
declared in the generated quantities, in declaration order.</p>
<p>Stan provides three types of container objects: arrays, vectors, and matrices.
In order to output all elements of a container object, it is necessary to choose
an indexing notation and a serialization order.
The Stan CSV file indexing notation is</p>
<ul>
<li>The column name consists of the variable name followed by the element indices.</li>
<li>Indices are delimited by periods (‘.’).</li>
<li>Indexing is 1-based, i.e., given a dimension of size <span class="math inline">\(N\)</span>, the first
element index is <span class="math inline">\(1\)</span> and the last element index is <span class="math inline">\(N\)</span>.</li>
</ul>
<p>Container variables are serialized in
<a href="https://eli.thegreenplace.net/2015/memory-layout-of-multi-dimensional-arrays">column major order</a>,
a.k.a. “Fortran” order.
In column major-order, all elements of column 1 are listed in ascending order,
followed by all elements of column 2, thus the
first index changes the slowest and the last index changes the fastest.</p>
<p>To see how this works, consider a 3-dimensional variable with dimension sizes 2, 3, and 4,
e.g., an array of matrices, a 2-D array of vectors or row_vectors, or a 3-D array of scalars.
Given a Stan program with model parameter variable:</p>
<pre><code> real foo[2, 3, 4];</code></pre>
<p>The Stan CSV file will require 24 columns to output the elements of <code>foo</code>.
The first 6 columns will be labeled:</p>
<pre><code>foo.1.1.1, foo.1.1.2, foo.1.1.3, foo.1.1.4, foo.1.2.1, foo.1.2.2</code></pre>
<p>The final 6 columns will be labeled:</p>
<pre><code>foo.2.2.3, foo.2.2.4, foo.2.3.1, foo.2.3.2, foo.2.3.3, foo.2.3.4</code></pre>
</div>
<div id="mcmc-sampler-csv-output" class="section level2">
<h2><span class="header-section-number">19.2</span> MCMC Sampler CSV Output</h2>
<p>The sample method produces both a Stan CSV output file and a <a href="mcmc-config.html#sampler-diag-file">diagnostic file</a>
which contains the sampler parameters together with the gradients on the unconstrained scale and
log probabilities for all parameters in the model.</p>
<p>To see how this works, we show snippets of the output file resulting from the following command:</p>
<pre><code>./bernoulli sample save_warmup=1 num_warmup=200 num_samples=100 \
            data file=bernoulli.data.json \
            output file=bernoulli_samples.csv</code></pre>
<div id="sampler-stan-csv-output-file" class="section level3">
<h3><span class="header-section-number">19.2.1</span> Sampler Stan CSV output file</h3>
<p>The sampler output file contains the following:</p>
<ul>
<li>Initial comment rows listing full CmdStan argument configuration.</li>
<li>Header row</li>
<li>Data rows containing warmup draws, if run with option <code>save_warmup=1</code></li>
<li>Comment rows for adaptation listing step size and metric used for sampling</li>
<li>Sampling draws</li>
<li>Comment rows giving timing information</li>
</ul>
<p><strong>Initial comments rows: argument configuration</strong></p>
<p>All configuration arguments are listed, one per line, indented according to
CmdStan’s hierarchy of arguments and sub-arguments.
Arguments not overtly specified on the command line are annotated as <code>(Default)</code>.</p>
<p>In the above example the <code>num_samples</code>, <code>num_warmup</code>, and <code>save_warmup</code> arguments
were specified, whereas subargument <code>thin</code> is left at its default value,
as seen in the initial comment rows:</p>
<pre><code># stan_version_major = 2
# stan_version_minor = 24
# stan_version_patch = 0
# model = bernoulli_model
# method = sample (Default)
#   sample
#     num_samples = 100
#     num_warmup = 200
#     save_warmup = 1
#     thin = 1 (Default)
#     adapt
#       engaged = 1 (Default)
#       gamma = 0.050000000000000003 (Default)
#       delta = 0.80000000000000004 (Default)
#       kappa = 0.75 (Default)
#       t0 = 10 (Default)
#       init_buffer = 75 (Default)
#       term_buffer = 50 (Default)
#       window = 25 (Default)
#     algorithm = hmc (Default)
#       hmc
#         engine = nuts (Default)
#           nuts
#             max_depth = 10 (Default)
#         metric = diag_e (Default)
#         metric_file =  (Default)
#         stepsize = 1 (Default)
#         stepsize_jitter = 0 (Default)
# id = 0 (Default)
# data
#   file = bernoulli.data.json
# init = 2 (Default)
# random
#   seed = 2991989946 (Default)
# output
#   file = bernoulli_samples.csv
#   diagnostic_file = bernoulli_diagnostics.csv
#   refresh = 100 (Default)</code></pre>
<p>Note that when running multi-threaded programs which use <code>reduce_sum</code>
for <a href="parallelization.html#parallelization">high-level parallelization</a>, the number of threads used
will also be included in this initial comment header.</p>
<p><strong>Column headers</strong></p>
<p>The CSV header row lists all sampler parameters, model parameters, transformed parameters, and quantities of interest.
The sampler parameters are described in detail in the <a href="mcmc-intro.html#mcmc_output_csv">output file</a> section of the Quickstart Guide chapter on MCMC Sampling.
The example model <code>bernoulli.stan</code> only contains one parameter <code>theta</code>, therefore the CSV file data table
consists of 7 sampler parameter columns and one column for the model parameter:</p>
<pre><code>lp__,accept_stat__,stepsize__,treedepth__,n_leapfrog__,divergent__,energy__,theta</code></pre>
<p>As a second example, we show the output of the <code>eight_schools.stan</code> model on run on example dataset.
This model has 3 parameters: <code>mu</code>, <code>theta</code> a vector whose length is dependent on the input data,
here <code>N = 8</code>, and <code>tau</code>.
The initial columns are for the 7 sampler parameters, as before.
The column headers for the model parameters are:</p>
<pre><code>mu,theta.1,theta.2,theta.3,theta.4,theta.5,theta.6,theta.7,theta.8,tau</code></pre>
<p><strong>Data rows containing warmup draws</strong></p>
<p>When run with option <code>save_warmup=1</code>,
the thinned warmup draws are written to the CSV output file
directly after the CSV header line.
Since the default option is <code>save_warmup=0</code>, this section is
usually not present in the output file.</p>
<p>Here we specified <code>num_warmup=200</code> and left <code>thin</code> at the default value <span class="math inline">\(1\)</span>,
therefore the next 200 lines are data rows containing
the sampler and model parameter values for each warmup draw.</p>
<pre><code>-6.74827,1,1,1,1,0,6.75348,0.247195
-6.74827,4.1311e-103,14.3855,1,1,0,6.95087,0.247195
-6.74827,1.74545e-21,2.43117,1,1,0,7.67546,0.247195
-6.77655,0.99873,0.239791,2,7,0,6.81982,0.280619
-6.7552,0.999392,0.323158,1,3,0,6.79175,0.26517</code></pre>
<p><strong>Comment rows for adaptation</strong></p>
<p>During warmup, the sampler adjusts the stepsize and the metric.
At the end warmup, the sampler outputs this information as comments.</p>
<pre><code># Adaptation terminated
# Step size = 0.813694
# Diagonal elements of inverse mass matrix:
# 0.592879</code></pre>
<p>As the example bernoulli model only contains a single parameter,
and as the default metric is <code>diag_e</code>, the inverse mass matrix is a <span class="math inline">\(1 \times 1\)</span> matrix,
and the length of the diagonal vector is also <span class="math inline">\(1\)</span>.</p>
<p>In contrast, if we run the eight schools example model with metric <code>dense_e</code>, the adaptation
comments section lists both the stepsize and the full <span class="math inline">\(10 \times 10\)</span> inverse mass matrix:</p>
<pre><code># Adaptation terminated
# Step size = 0.211252
# Elements of inverse mass matrix:
# 25.6389, 17.3379, 13.9455, 15.9036, 15.1953, 8.73729, 16.9486, 14.4231, 17.4969, 0.518757
# 17.3379, 79.8719, 12.2989, -1.28006, 9.92895, -3.51622, 10.073, 22.0196, 19.8151, 4.71028
# 13.9455, 12.2989, 36.1572, 12.8734, 11.9446, 9.09582, 9.74519, 10.9539, 12.1204, 0.211353
# 15.9036, -1.28006, 12.8734, 59.9998, 10.245, 8.03461, 16.9754, 3.13443, 9.68292, -1.36097
# 15.1953, 9.92895, 11.9446, 10.245, 43.548, 15.3403, 13.0537, 7.69818, 10.1093, 0.155245
# 8.73729, -3.51622, 9.09582, 8.03461, 15.3403, 39.981, 12.7695, 1.16248, 6.13749, -2.08507
# 16.9486, 10.073, 9.74519, 16.9754, 13.0537, 12.7695, 45.8884, 11.6074, 8.96413, -1.15946
# 14.4231, 22.0196, 10.9539, 3.13443, 7.69818, 1.16248, 11.6074, 49.4083, 18.9169, 3.15661
# 17.4969, 19.8151, 12.1204, 9.68292, 10.1093, 6.13749, 8.96413, 18.9169, 68.0228, 1.74104
# 0.518757, 4.71028, 0.211353, -1.36097, 0.155245, -2.08507, -1.15946, 3.15661, 1.74104, 1.50433</code></pre>
<p><em>Note that when the sampler is run with arguments <code>algorithm=fixed_param</code>,
this section will be missing.</em></p>
<p><strong>Data rows containing sampling draws</strong></p>
<p>The output file contains the values for the thinned set draws during sampling.
Here we specified <code>num_sampling=100</code> and left <code>thin</code> at the default value <span class="math inline">\(1\)</span>,
therefore the next 100 lines are data rows containing
the sampler and model parameter values for each sampling iteration.</p>
<pre><code>-8.76921,0.796814,0.813694,1,1,0,9.75854,0.535093
-6.79143,0.979604,0.813694,1,3,0,9.13092,0.214431
-6.79451,0.955359,0.813694,2,3,0,7.19149,0.289341</code></pre>
<p><strong>Timing information</strong></p>
<p>Upon successful completion, the sampler writes timing
information to the output CSV file as a series of final comment lines:</p>
<pre><code># 
#  Elapsed Time: 0.005 seconds (Warm-up)
#                0.002 seconds (Sampling)
#                0.007 seconds (Total)
#</code></pre>
</div>
<div id="diagnostic-csv-output-file" class="section level3">
<h3><span class="header-section-number">19.2.2</span> Diagnostic CSV output file</h3>
<p>The diagnostic file contains the following:</p>
<ul>
<li>Initial comment rows listing full CmdStan argument configuration.</li>
<li>Header row</li>
<li>Data rows containing warmup draws, if run with option <code>save_warmup=1</code></li>
<li>Sampling draws</li>
<li>Comment rows giving timing information</li>
</ul>
<p>The columns in this file contain, in order:
- all sampler parameters
- all model parameter estimates
- the latent Hamiltonian for each parameter
- the gradient for each parameters</p>
<p>The labels for the latent Hamiltonian columns are the parameter column label with prefix <code>p_</code> and the labels for the gradient columns are the parameter column label with prefix <code>g_</code>.</p>
<p>These are the column labels from the file <code>bernoulli_diagnostic.csv</code>:</p>
<pre><code>lp__,accept_stat__,stepsize__,treedepth__,n_leapfrog__,divergent__,energy__,theta,p_theta,g_theta</code></pre>
</div>
</div>
<div id="optimization-output" class="section level2">
<h2><span class="header-section-number">19.3</span> Optimization Output</h2>
<ul>
<li>Config as comments</li>
<li>Header row</li>
<li>Penalized maximum likelihood estimate</li>
</ul>
</div>
<div id="variational-inference-output" class="section level2">
<h2><span class="header-section-number">19.4</span> Variational Inference Output</h2>
<ul>
<li>Config as comments</li>
<li>Header row</li>
<li>Adaptation as comments</li>
<li>Variational estimate</li>
<li>Sample draws from estimate of the posterior</li>
</ul>
</div>
<div id="generate-quantities-outputs" class="section level2">
<h2><span class="header-section-number">19.5</span> Generate Quantities Outputs</h2>
<ul>
<li>Header row</li>
<li>Quantities of interest</li>
</ul>
</div>
<div id="diagnose-method-outputs" class="section level2">
<h2><span class="header-section-number">19.6</span> Diagnose Method Outputs</h2>
<ul>
<li>Header row</li>
<li>Gradients</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="appendices.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="json.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"search": true,
"toolbar": {
"position": "static"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
