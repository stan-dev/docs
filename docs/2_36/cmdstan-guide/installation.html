<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.53">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>CmdStan Installation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../cmdstan-guide/example_model_data.html" rel="next">
<link href="../cmdstan-guide/index.html" rel="prev">
<link href="../img/logo_tm.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 200,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../theming/quarto_styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../img/logo_tm.png" alt="Stan logo" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Overview</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../stan-users-guide/index.html"> 
<span class="menu-text">Stan Users Guide</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../reference-manual/index.html"> 
<span class="menu-text">Reference Manual</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../functions-reference/index.html"> 
<span class="menu-text">Functions Reference</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-interfaces" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Interfaces</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-interfaces">    
        <li>
    <a class="dropdown-item" href="../cmdstan-guide/index.html">
 <span class="dropdown-text">CmdStan</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://mc-stan.org/cmdstanpy">
 <span class="dropdown-text">CmdStanPy</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://mc-stan.org/cmdstanr">
 <span class="dropdown-text">CmdStanR</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://mc-stan.org/users/interfaces/pystan.html">
 <span class="dropdown-text">PyStan</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://mc-stan.org/rstan">
 <span class="dropdown-text">RStan</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="http://stanjulia.github.io/Stan.jl/stable/INTRO/">
 <span class="dropdown-text">Stan.jl</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-other-packages" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Other Packages</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-other-packages">    
        <li>
    <a class="dropdown-item" href="https://mc-stan.org/bayesplot/">
 <span class="dropdown-text">bayesplot</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://roualdes.github.io/bridgestan/latest/">
 <span class="dropdown-text">BridgeStan</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://paul-buerkner.github.io/brms/">
 <span class="dropdown-text">brms</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://mc-stan.org/loo/">
 <span class="dropdown-text">loo</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://mc-stan.org/posterior">
 <span class="dropdown-text">posterior</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://mc-stan.org/projpred">
 <span class="dropdown-text">projpred</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://mc-stan.org/rstanarm">
 <span class="dropdown-text">rstanarm</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://mc-stan.org/rstantools">
 <span class="dropdown-text">rstantools</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://mc-stan.org/shinystan">
 <span class="dropdown-text">shinystan</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools tools-wide">
    <a href="https://github.com/stan-dev" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
    <a href="https://discourse.mc-stan.org" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-chat-text-fill"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../cmdstan-guide/installation.html">Getting Started</a></li><li class="breadcrumb-item"><a href="../cmdstan-guide/installation.html">CmdStan Installation</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmdstan-guide/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CmdStan User’s Guide</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Version 2.36</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Getting Started</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmdstan-guide/installation.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">CmdStan Installation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmdstan-guide/example_model_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Example Model and Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmdstan-guide/compiling_stan_programs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Compiling a Stan Program</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmdstan-guide/parallelization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Parallelization</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Running CmdStan</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmdstan-guide/command_line_options.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Command-Line Interface Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmdstan-guide/mcmc_config.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">MCMC Sampling using Hamiltonian Monte Carlo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmdstan-guide/optimize_config.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Optimization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmdstan-guide/pathfinder_config.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pathfinder Method for Approximate Bayesian Inference</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmdstan-guide/variational_config.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Variational Inference using ADVI</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmdstan-guide/generate_quantities_config.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Generating Quantities of Interest from a Fitted Model</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmdstan-guide/laplace_sample_config.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Laplace sampling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmdstan-guide/log_prob_config.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Extracting log probabilities and gradients for diagnostics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmdstan-guide/diagnose_config.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Diagnosing HMC by Comparison of Gradients</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Tools and Utilities</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmdstan-guide/stanc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>stanc</code>: Translating Stan to C++</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmdstan-guide/stansummary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>stansummary</code>: MCMC Output Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmdstan-guide/diagnose_utility.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>diagnose</code>: Diagnosing Biased Hamiltonian Monte Carlo Inferences</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmdstan-guide/print.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>print</code> (deprecated): MCMC Output Analysis</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmdstan-guide/stan_csv_apdx.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Stan CSV File Format</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmdstan-guide/json_apdx.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">JSON Format for CmdStan</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmdstan-guide/rdump_apdx.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">RDump Format for CmdStan</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cmdstan-guide/external_code.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using external C++ code</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#cmdstan-installation" id="toc-cmdstan-installation" class="nav-link active" data-scroll-target="#cmdstan-installation">CmdStan Installation</a>
  <ul class="collapse">
  <li><a href="#conda-install" id="toc-conda-install" class="nav-link" data-scroll-target="#conda-install">Installation via <code>conda</code></a>
  <ul class="collapse">
  <li><a href="#cmdstan-install-location-under-conda" id="toc-cmdstan-install-location-under-conda" class="nav-link" data-scroll-target="#cmdstan-install-location-under-conda">CmdStan install location under conda</a></li>
  </ul></li>
  <li><a href="#installation-from-github" id="toc-installation-from-github" class="nav-link" data-scroll-target="#installation-from-github">Installation from GitHub</a>
  <ul class="collapse">
  <li><a href="#downloading-the-source-code" id="toc-downloading-the-source-code" class="nav-link" data-scroll-target="#downloading-the-source-code">Downloading the source code</a></li>
  <li><a href="#building-cmdstan" id="toc-building-cmdstan" class="nav-link" data-scroll-target="#building-cmdstan">Building CmdStan</a></li>
  </ul></li>
  <li><a href="#checking-the-stan-compiler" id="toc-checking-the-stan-compiler" class="nav-link" data-scroll-target="#checking-the-stan-compiler">Checking the Stan compiler</a></li>
  <li><a href="#troubleshooting-the-installation" id="toc-troubleshooting-the-installation" class="nav-link" data-scroll-target="#troubleshooting-the-installation">Troubleshooting the installation</a>
  <ul class="collapse">
  <li><a href="#common-problems" id="toc-common-problems" class="nav-link" data-scroll-target="#common-problems">Common problems</a></li>
  </ul></li>
  <li><a href="#cpp-toolchain" id="toc-cpp-toolchain" class="nav-link" data-scroll-target="#cpp-toolchain">C++ Toolchain</a></li>
  <li><a href="#gnu-make" id="toc-gnu-make" class="nav-link" data-scroll-target="#gnu-make">Using GNU Make</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/stan-dev/docs/edit/master/src/cmdstan-guide/installation.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/stan-dev/docs/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">




<section id="cmdstan-installation" class="level1">
<h1>CmdStan Installation</h1>
<p>There are a few ways that you can install CmdStan. Depending on your operating system and your level of expertise, you can either:</p>
<ul>
<li><p>Use the <a href="https://docs.conda.io/en/latest/">conda</a> package management system to install a pre-built version of CmdStan along with the required dependencies. <em>Recommended for Windows users</em>.</p></li>
<li><p>Install the source code from <a href="https://github.com/stan-dev/cmdstan">GitHub CmdStan repository</a>. This requires a modern C++ compiler and toolchain. See the <a href="#cpp-toolchain">C++ Toolchain</a> section for further details.</p></li>
</ul>
<section id="conda-install" class="level2">
<h2 class="anchored" data-anchor-id="conda-install">Installation via <code>conda</code></h2>
<p>With conda, you can install CmdStan from the <a href="https://conda-forge.org/">conda-forge channel</a>. This will install a pre-built version of CmdStan along with the required dependencies (i.e.&nbsp;a C++ compiler, a version of Make, and required libraries). The conda installation is designed so one can use the R or Python bindings to CmdStan seamlessly. Additionally, it provides the command <code>cmdstan_model</code> to activate the CmdStan makefile from anywhere.</p>
<p><em>Note</em>: This requires that conda has been installed already on your machine. We recommend using the <a href="https://github.com/conda-forge/miniforge">miniforge</a> distribution.</p>
<p>We recommend installing CmdStan in a new conda environment:</p>
<pre><code> conda create -n stan -c conda-forge cmdstan</code></pre>
<p>This command creates a new conda environment named <code>stan</code> and downloads and installs the <code>cmdstan</code> package as well as CmdStan and the required C++ toolchain.</p>
<p>To install into an existing conda environment, use the conda <code>install</code> command instead of <code>create</code>:</p>
<pre><code> conda install -c conda-forge cmdstan</code></pre>
<p>Whichever installation method you use, afterwards you must activate the new environment or deactivate/activate the existing one. For example, if you installed cmdstan into a new environment <code>stan</code>, run the command</p>
<pre><code> conda activate stan</code></pre>
<p>By default, the latest release of CmdStan is installed. If you require a specific release of CmdStan, CmdStan versions 2.26.1 and <em>newer</em> can be installed by specifying <code>cmdstan==VERSION</code> in the install command. For example to install an earlier version of CmdStan into your current conda environment, run the following command, then re-activate the environment</p>
<pre><code>conda install -c conda-forge cmdstan=2.27.0</code></pre>
<section id="cmdstan-install-location-under-conda" class="level3">
<h3 class="anchored" data-anchor-id="cmdstan-install-location-under-conda">CmdStan install location under conda</h3>
<p>A Conda environment is a directory that contains a specific collection of Conda packages. To see the locations of your conda environments, use the command</p>
<pre><code> conda info -e</code></pre>
<p>The shell environment variable <code>CONDA_PREFIX</code> points to the active conda environment (if any). Both CmdStan and the C++ toolchain are installed into the <code>bin</code> subdirectory of the conda environment directory, i.e., <code>$CONDA_PREFIX/bin/cmdstan</code> (Linux, MacOS), <code>%CONDA_PREFIX%\bin\cmdstan</code> (Windows).</p>
<p>Please report conda-specific install problems directly to the conda-forge issue tracker, <a href="https://github.com/conda-forge/cmdstan-feedstock/issues">here</a>.</p>
</section>
</section>
<section id="installation-from-github" class="level2">
<h2 class="anchored" data-anchor-id="installation-from-github">Installation from GitHub</h2>
<p>Installation from GitHub consists of the following steps:</p>
<ul>
<li><p>Verify that you have a modern C++ toolchain. See the <a href="#cpp-toolchain">C++ Toolchain</a> section for details.</p></li>
<li><p>Download the CmdStan source code from GitHub</p></li>
<li><p>Build the CmdStan libraries and executables</p></li>
<li><p>Check the installation by compiling and running the CmdStan example model <code>bernoulli.stan</code>.</p></li>
</ul>
<section id="downloading-the-source-code" class="level3">
<h3 class="anchored" data-anchor-id="downloading-the-source-code">Downloading the source code</h3>
<p>The GitHub source code is divided into sub-modules, each in its own repository. The CmdStan repo contains just the <code>cmdstan</code> module; the Stan inference engine algorithms and Stan math library functions are specified as <a href="https://git-scm.com/book/en/v2/Git-Tools-Submodules">submodules</a> and stored in the GitHub repositories <a href="https://github.com/stan-dev/stan">stan</a> and <a href="https://github.com/stan-dev/math">math</a>, respectively.</p>
<p>A <a href="https://github.com/stan-dev/cmdstan/releases">CmdStan release</a> is compressed tarfile which contains CmdStan and the Stan and math library submodules. The most recent CmdStan release is always available as https://github.com/stan-dev/cmdstan/releases/latest. A CmdStan release is versioned by major, minor, patch numbers, e.g., “2.29.2”. Please ensure you download a tarfile which is named “cmdstan-&lt;version-number” rather than using the “Source Code” links at the bottom of the release. These are automatically generated by GitHub and do <strong>not</strong> contain the required submodules. The release tarfile unpacks into a directory named “cmdstan-<version number="">”, e.g.&nbsp;“cmdstan-2.29.2”.</version></p>
<p>By cloning the CmdStan repository with argument <code>--recursive</code>, Git automatically initializes and updates each submodule in the repository, including nested submodules if any of the submodules in the repository have submodules themselves. The following command will download the source code from the current development branch of CmdStan into a directory named <code>cmdstan</code>:</p>
<pre><code>&gt; git clone https://github.com/stan-dev/cmdstan.git --recursive</code></pre>
<p>Throughout this manual, we refer to this top-level CmdStan source directory as <strong><code>&lt;cmdstan-home&gt;</code></strong>. This directory contains the following subdirectories:</p>
<ul>
<li>directory <code>cmdstan/stan</code> contains the sub-module <code>stan</code> (https://github.com/stan-dev/stan)</li>
<li>directory <code>cmdstan/stan/lib/stan_math</code> contains the sub-module <code>math</code> (https://github.com/stan-dev/math)</li>
</ul>
</section>
<section id="building-cmdstan" class="level3">
<h3 class="anchored" data-anchor-id="building-cmdstan">Building CmdStan</h3>
<p>Building CmdStan involves preparing a set of executable programs and compiling the command line interface and supporting libraries. The CmdStan tools are:</p>
<ul>
<li><p><code>stanc</code>: the Stan compiler (translates Stan language to C++).</p></li>
<li><p><code>stansummary</code>: a basic posterior analysis tool. The <code>stansummary</code> utility processes one or more output files from a run or set of runs of Stan’s HMC sampler. For all parameters and quantities of interest in the Stan program, <code>stansummary</code> reports a set of statistics including mean, standard deviation, percentiles, effective number of samples, and <span class="math inline">\(\hat{R}\)</span> values.</p></li>
<li><p><code>diagnose</code>: a basic sampler diagnostic tool which checks for indications that the HMC sampler was unable to sample from the full posterior.</p></li>
</ul>
<p>CmdStan releases include pre-built binaries of the Stan language compiler (https://github.com/stan-dev/stanc3): <code>bin/linux-stanc</code>, <code>bin/mac-stanc</code> and <code>bin/windows-stanc</code>. The CmdStan makefile <code>build</code> task copies the appropriate binary to <code>bin/stanc</code>. For CmdStan installations which have been cloned of downloaded from the CmdStan GitHub repository, the makefile task will download the appropriate OS-specific binary from the stanc3 repository’s nightly release.</p>
<p>Steps to build CmdStan:</p>
<ul>
<li><p>Open a command-line terminal window and change directories to the CmdStan home directory.</p></li>
<li><p>Run the makefile target <code>build</code> which instantiates the CmdStan utilities and compiles all necessary C++ libraries.</p></li>
</ul>
<pre><code>&gt; cd &lt;cmdstan-home&gt;
&gt; make build</code></pre>
<p>If your computer has multiple cores and sufficient ram, the build process can be parallelized by providing the <code>-j</code> option. For example, to build on 4 cores, type:</p>
<pre><code>&gt; make -j4 build</code></pre>
<p>When <code>make build</code> is successful, the directory <code>&lt;cmdstan-home&gt;/bin/</code> will contain the executables <code>stanc</code>, <code>stansummary</code>, and <code>diagnose</code> (on Windows, corresponding <code>.exe</code> files) and the final lines of console output will show the version of CmdStan that has just been built, e.g.:</p>
<pre><code>--- CmdStan v2.29.2 built ---</code></pre>
<p><strong>Warning:</strong> <em>The Make program may take 10+ minutes and consume 2+ GB of memory to build CmdStan.</em></p>
<p><strong>Windows only:</strong> CmdStan requires that the Intel TBB library, which is built by the above command, can be found by the Windows system. This requires that the directory <code>&lt;cmdstan-home&gt;/stan/lib/stan_math/lib/tbb</code> is part of the <code>PATH</code> environment variable. See <a href="https://helpdeskgeek.com/windows-10/add-windows-path-environment-variable/">these instructions</a> for details on changing the <code>PATH</code>. To permanently make this setting for the current user, you may execute:</p>
<pre><code>&gt; make install-tbb</code></pre>
<p>After changing the <code>PATH</code> environment variable, you must open an new shell in order for the new environment variable settings to take effect. (This is not necessary on Mac and Linux systems because they can use the absolute path to the Intel TBB library when linking into Stan programs.)</p>
</section>
</section>
<section id="checking-the-stan-compiler" class="level2">
<h2 class="anchored" data-anchor-id="checking-the-stan-compiler">Checking the Stan compiler</h2>
<p>To check that the CmdStan installation is complete and in working order, run the following series of commands from the folder which CmdStan was installed.</p>
<p>On Linux and macOS:</p>
<pre><code># compile the example
&gt; make examples/bernoulli/bernoulli

# fit to provided data (results of 10 trials, 2 out of 10 successes)
&gt; ./examples/bernoulli/bernoulli sample\
  data file=examples/bernoulli/bernoulli.data.json

# default output written to file `output.csv`,
# default num_samples is 1000, output file should have approx. 1050 lines
&gt; wc -l output.csv

# run the `bin/stansummary utility to summarize parameter estimates
&gt; bin/stansummary output.csv</code></pre>
<p>On Windows:</p>
<pre><code># compile the example
&gt; make examples/bernoulli/bernoulli.exe

# fit to provided data (results of 10 trials, 2 out of 10 successes)
&gt; ./examples/bernoulli/bernoulli.exe sample data file=examples/bernoulli/bernoulli.data.json

# run the `bin/stansummary.exe utility to summarize parameter estimates
&gt; bin/stansummary.exe output.csv</code></pre>
<p>The sample data in file <code>bernoulli.json.data</code> specifies 2 out of 10 successes, therefore the range <code>mean(theta)</code><span class="math inline">\(\pm\)</span><code>sd(theta)</code> should include 0.2.</p>
</section>
<section id="troubleshooting-the-installation" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-the-installation">Troubleshooting the installation</h2>
<p>Updates to CmdStan, changes in compiler options, or updates to the C++ toolchain may result in errors when trying to compile a Stan program. Often, these problems can be resolved by removing the existing CmdStan binaries and recompiling. To do this, you must run the makefile commands from the <code>&lt;cmdstan-home&gt;</code> directory:</p>
<pre><code>&gt; cd &lt;cmdstan-home&gt;
&gt; make clean-all
&gt; make build</code></pre>
<section id="common-problems" class="level3">
<h3 class="anchored" data-anchor-id="common-problems">Common problems</h3>
<p>This section contains solutions to problems reported on https://discourse.mc-stan.org</p>
<p><strong>Compiler error message about PCH file</strong></p>
<p>To speed up compilation, the Stan makefile pre-compiles parts of the core Stan library. If these pre-compiled files are out of sync with the compiled model, the compiler will complain, e.g.:</p>
<pre><code>error: PCH file uses an older PCH format that is no longer supported</code></pre>
<p>In this case, clean and rebuild CmdStan, as shown in the previous section.</p>
<p><strong>Windows: ‘g++’, ‘make’, or ‘cut’ is not recognized</strong></p>
<p>The CmdStan makefile uses a few shell utilities which might not be present in Windows, resulting in the error message:</p>
<pre><code>'cut' is not recognized as an internal or external command,
operable program or batch file.</code></pre>
<p>To fix this, ensure you have followed the steps for adding the toolchain to your <code>PATH</code> and installing the additional utilities covered in the <a href="#windows">configuration instructions</a></p>
<p><strong>Spaces in paths to CmdStan or model</strong></p>
<p><code>make</code> can fail when dealing with files in folders with a space somewhere in their file path. Particularly on Windows, this can be an issue when CmdStan, or the models you are trying to build, are placed in the <code>One Drive</code> folder.</p>
<p>Unfortunately, the errors created by this situation are not alwas informative. Some errors you may see are:</p>
<pre><code>make: *** INTERNAL: readdir: Invalid argument</code></pre>
<pre><code>make: *** [make/program:50: x.hpp] Error 2</code></pre>
<p>If the (fully-expanded) folder path to CmdStan or the model you are trying to build contains a space, we recommend trying a different location if you encounter any issues during building.</p>
</section>
</section>
<section id="cpp-toolchain" class="level2">
<h2 class="anchored" data-anchor-id="cpp-toolchain">C++ Toolchain</h2>
<p>Compiling a Stan program requires a modern C++ compiler and the GNU Make build utility (a.k.a. “gmake”). These vary by operating system.</p>
<section id="linux" class="level4">
<h4 class="anchored" data-anchor-id="linux">Linux</h4>
<p>The required C++ compiler is <code>g++ 4.9 3</code>. On most systems the GNU Make utility is pre-installed and is the default <code>make</code> utility. There is usually a pre-installed C++ compiler as well, however, it may not be new enough. To check, run commands:</p>
<pre><code>g++ --version
make --version</code></pre>
<p>If these are at least at <code>g++</code> version 4.9.3 or later and <code>make</code> version 3.81 or later, no additional installations are necessary. It may still be desirable to update the C++ compiler <code>g++</code>, because later versions are faster.</p>
<p>To install the latest version of these tools (or upgrade an older version), use the following commands or their equivalent for your distribution, install via the commands:</p>
<pre><code>sudo apt install g++
sudo apt install make</code></pre>
<p>If you can’t run <code>sudo</code>, you will need to ask your sysadmin or cluster administrator to install these tools for you.</p>
</section>
<section id="macos" class="level4">
<h4 class="anchored" data-anchor-id="macos">MacOS</h4>
<p>To check if you already already have an appropriate toolchain installed, open the Terminal application and enter:</p>
<pre><code>clang++ --version
make --version</code></pre>
<p>If either of these commands prints the message <code>command not found</code>, you will need to install Xcode’s command line tools.</p>
<p>Open the Terminal application and enter:</p>
<pre><code>xcode-select --install</code></pre>
<p>Select “Install” in the window that opens.</p>
<p>After the installation completes, you can double check that installation was successful by reopening the Terminal and running:</p>
<pre><code>clang++ --version
make --version</code></pre>
<p>You can read more about Xcode on its site: <a href="https://developer.apple.com/xcode/">https://developer.apple.com/xcode/</a></p>
<p>We don’t recommend trying to use the GNU C++ compiler, available via Homebrew, based on the number of reports of installation difficulties from Mac users on GitHub as well as the Stan forums.</p>
</section>
<section id="windows" class="level4">
<h4 class="anchored" data-anchor-id="windows">Windows</h4>
<p>The Windows toolchain consists of programs <code>g++</code>, the C++ compiler, and <code>make</code>, the GNU Make utility. To check if these are present, open a command shell [^1] and type:</p>
<pre><code>g++ --version
make --version</code></pre>
<p>CmdStan is known compatible with the RTools44 toolchain. The toolchain will require updating your <code>PATH</code> variable, See <a href="https://helpdeskgeek.com/windows-10/add-windows-path-environment-variable/">these instructions</a> for details on changing the <code>PATH</code> if you are unfamiliar. The following instructions will assume that the default installation directory was used, so be sure to update the paths accordingly if you have chosen a different directory.</p>
<section id="rtools44" class="level5">
<h5 class="anchored" data-anchor-id="rtools44">RTools44</h5>
<p>All required utilities (e.g., <code>make</code>, <code>g++</code>) for compiling and running CmdStan models on Windows are provided by the RTools44 toolchain from the R Project. Installation steps are provided below, and for more technical details on the toolchain refer to the <a href="https://cran.r-project.org/bin/windows/Rtools/rtools44/rtools.html">R Project documentation</a>.</p>
<p>The R Project provides RTools44 for both Intel/AMD 64-bit (x86_64) and ARM 64-bit (aarch64) systems. If you are unsure which to use, then you can check by going to the Windows Settings, selecting the ‘System’ menu and then the ‘About’ option. If the ‘System Type’ field lists ‘ARM-based processor’, then you should follow the ARM64 instructions below.</p>
<p>Note that the toolchain is only available for 64-bit systems, and uses the new Universal C Runtime (UCRT). UCRT is only natively supported on Windows 10 and newer, older systems will require a <a href="https://support.microsoft.com/en-us/topic/update-for-universal-c-runtime-in-windows-c0514201-7fe6-95a3-b0a5-287930f3560c">Microsoft update</a>.</p>
<section id="installation---intelamd-64-bit-x86_64" class="level6">
<h6 class="anchored" data-anchor-id="installation---intelamd-64-bit-x86_64">Installation - Intel/AMD 64-bit (x86_64)</h6>
<p>Download the installer and complete the prompts for installation:</p>
<ul>
<li><a href="https://cran.r-project.org/bin/windows/Rtools/rtools44/files/rtools44-6335-6327.exe">RTools44</a></li>
</ul>
<p>If the above link no longer works, navigate <a href="https://cran.r-project.org/bin/windows/Rtools/rtools44/files/">here</a> and download the latest file which is named <code>rtools44-xxxx-yyyy.exe</code> (<code>x</code>s and <code>y</code>s will be different version numbers over time).</p>
<p>Next, you need to add the toolchain directory to your <code>PATH</code> variable:</p>
<pre><code>C:\rtools44\usr\bin
C:\rtools44\x86_64-w64-mingw32.static.posix\bin</code></pre>
</section>
<section id="installation---arm-64-bit-arm64aarch64" class="level6">
<h6 class="anchored" data-anchor-id="installation---arm-64-bit-arm64aarch64">Installation - ARM 64-bit (arm64/aarch64)</h6>
<p>Download the installer and complete the prompts for installation:</p>
<ul>
<li><a href="https://cran.r-project.org/bin/windows/Rtools/rtools44/files/rtools44-aarch64-6335-6327.exe">RTools44 - ARM64</a></li>
</ul>
<p>If the above link no longer works, navigate <a href="https://cran.r-project.org/bin/windows/Rtools/rtools44/files/">here</a> and download the latest file which is named <code>rtools44-aarch64-xxxx-yyyy.exe</code> (<code>x</code>s and <code>y</code>s will be different version numbers over time).</p>
<p>Next, you need to add the toolchain directory to your <code>PATH</code> variable:</p>
<pre><code>C:\rtools44-aarch64\usr\bin
C:\rtools44-aarch64\aarch64-w64-mingw32.static.posix\bin</code></pre>
</section>
</section>
</section>
</section>
<section id="gnu-make" class="level2">
<h2 class="anchored" data-anchor-id="gnu-make">Using GNU Make</h2>
<p>CmdStan relies on the GNU Make utility to build both the Stan model executables and the CmdStan tools.</p>
<p>GNU Make builds executable programs and libraries from source code by reading files called Makefiles which specify how to derive the target program. A Makefile consists of a set of recursive rules where each rule specifies a target, its dependencies, and the specific operations required to build the target. Specifying dependencies for a target provides a way to control the build process so that targets which depend on other files will be updated as needed <em>only</em> when there are changes to those other files. Thus Make provides an efficient way to manage complex software.</p>
<p>The CmdStan Makefile is in the <code>&lt;cmdstan-home&gt;</code> directory and is named <code>makefile</code>. This is one of the default <a href="https://www.gnu.org/software/make/manual/html_node/Makefile-Names.html">GNU Makefile names</a>, which allows you to omit the <code>-f makefile</code> argument to the Make command. Because the CmdStan Makefile includes several other Makefiles, <strong>Make only works properly when invoked from the <code>&lt;cmdstan-home&gt;</code> directory</strong>; attempts to use this Makefile from another directory by specifying the full path to the file <code>makefile</code> won’t work. For example, trying to call Make from another directory by specifying the full path the the makefile results in the following set of error messages:</p>
<pre><code>make -f ~/github/stan-dev/cmdstan/makefile
/Users/mitzi/github/stan-dev/cmdstan/makefile:58: make/stanc: No such file or directory
/Users/mitzi/github/stan-dev/cmdstan/makefile:59: make/program: No such file or directory
/Users/mitzi/github/stan-dev/cmdstan/makefile:60: make/tests: No such file or directory
/Users/mitzi/github/stan-dev/cmdstan/makefile:61: make/command: No such file or directory
make: *** No rule to make target `make/command'.  Stop.</code></pre>
<p>The <a href="#conda-install">conda-forge <code>cmdstan</code> package</a> provides a solution to this problem via <code>cmdstan_model</code> command which lets you run the CmdStan makefile from anywhere to compile a Stan model.</p>
<p>Makefile syntax allows general pattern rules based on file suffixes. Stan programs must be stored in files with suffix <code>.stan</code>; the CmdStan makefile rules specify how to transform the Stan source code into a binary executable. For example, to compile the Stan program <code>my_program.stan</code> in directory <code>../my_dir/</code>, the make target is <code>../my_dir/my_program</code> or <code>../my_dir/my_program.exe</code> (on Windows).</p>
<p>To call Make, you invoke the utility name, <code>make</code>, followed by, in order:</p>
<ul>
<li><p>zero or more <a href="https://www.gnu.org/software/make/manual/html_node/Options-Summary.html">Make program options</a>, then specify any Make variables as a series of</p></li>
<li><p>zero of more Make variables, described below</p></li>
<li><p>zero or more <em>target</em> names; the set of names is determined by the Makefile rules.</p></li>
</ul>
<pre><code>make &lt;flags&gt; &lt;variables&gt; &lt;targets&gt;</code></pre>
<p><strong>Makefile Variables</strong></p>
<p>Make targets can be preceded by any number of Makefile variable name=value pairs. For example, to compile <code>../my_dir/my_program.stan</code> for an OpenCL (GPU) machine, set the makefile variable <code>STAN_OPENCL</code> to <code>TRUE</code>:</p>
<pre><code>&gt; make STAN_OPENCL=TRUE ../my_dir/my_program</code></pre>
<p>Makefile variables can also be set by creating a file named <code>local</code> in the CmdStan <code>make</code> subdirectory which contains a list of <code>&lt;VARIABLE&gt;=&lt;VALUE&gt;</code> pairs, one per line. For example, to get the same effect as the above command every time, you would put the line <code>STAN_OPENCL=TRUE</code> into the file <code>&lt;cmdstan_home&gt;/make/local</code>.</p>
<p>The complete set of Makefile variables can be found in file <code>&lt;cmdstan-home&gt;/cmdstan/stan/lib/stan_math/make/compiler_flags</code>.</p>
<p><strong>Make Targets</strong></p>
<p>When invoked without any arguments at all, Make prints a help message:</p>
<pre><code>&gt; make
--------------------------------------------------------------------------------
CmdStan v2.33.1 help

  Build CmdStan utilities:
    &gt; make build

    This target will:
    1. Install the Stan compiler bin/stanc from stanc3 binaries.
    2. Build the print utility bin/print (deprecated; will be removed in v3.0)
    3. Build the stansummary utility bin/stansummary
    4. Build the diagnose utility bin/diagnose
    5. Build all libraries and object files compile and link an executable Stan program

    Note: to build using multiple cores, use the -j option to make, e.g.,
    for 4 cores:
    &gt; make build -j4


  Build a Stan program:

    Given a Stan program at foo/bar.stan, build an executable by typing:
    &gt; make foo/bar

    This target will:
    1. Install the Stan compiler (bin/stanc), as needed.
    2. Use the Stan compiler to generate C++ code, foo/bar.hpp.
    3. Compile the C++ code using cc . to generate foo/bar

  Additional make options:
    STANCFLAGS: defaults to "". These are extra options passed to bin/stanc
      when generating C++ code. If you want to allow undefined functions in the
      Stan program, either add this to make/local or the command line:
          STANCFLAGS = --allow_undefined
    USER_HEADER: when STANCFLAGS has --allow_undefined, this is the name of the
      header file that is included. This defaults to "user_header.hpp" in the
      directory of the Stan program.
    STANC3_VERSION: When set, uses that tagged version specified; otherwise, downloads
      the nightly version.
    STAN_CPP_OPTIMS: Turns on additonal compiler flags for performance.
    STAN_NO_RANGE_CHECKS: Removes the range checks from the model for performance.


  Example - bernoulli model: examples/bernoulli/bernoulli.stan

    1. Build the model:
       &gt; make examples/bernoulli/bernoulli
    2. Run the model:
       &gt; examples/bernoulli/bernoulli sample data file=examples/bernoulli/bernoulli.data.R
    3. Look at the samples:
       &gt; bin/stansummary output.csv


  Clean CmdStan:

    Remove the built CmdStan tools:
    &gt; make clean-all

--------------------------------------------------------------------------------</code></pre>


</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../cmdstan-guide/index.html" class="pagination-link" aria-label="CmdStan User's Guide">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">CmdStan User’s Guide</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../cmdstan-guide/example_model_data.html" class="pagination-link" aria-label="Example Model and Data">
        <span class="nav-page-text">Example Model and Data</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/stan-dev/docs/edit/master/src/cmdstan-guide/installation.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/stan-dev/docs/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>