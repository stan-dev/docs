<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Data Types and Declarations</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../reference-manual/expressions.html" rel="next">
<link href="../reference-manual/whitespace.html" rel="prev">
<link href="../img/logo_tm.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 200,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../theming/quarto_styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../img/logo_tm.png" alt="Stan logo" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Overview</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../stan-users-guide/index.html"> 
<span class="menu-text">Stan Users Guide</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../reference-manual/index.html" aria-current="page"> 
<span class="menu-text">Reference Manual</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../functions-reference/index.html"> 
<span class="menu-text">Functions Reference</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-interfaces" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Interfaces</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-interfaces">    
        <li>
    <a class="dropdown-item" href="../cmdstan-guide/index.html">
 <span class="dropdown-text">CmdStan</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://mc-stan.org/cmdstanpy">
 <span class="dropdown-text">CmdStanPy</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://mc-stan.org/cmdstanr">
 <span class="dropdown-text">CmdStanR</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://mc-stan.org/users/interfaces/pystan.html">
 <span class="dropdown-text">PyStan</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://mc-stan.org/rstan">
 <span class="dropdown-text">RStan</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="http://stanjulia.github.io/Stan.jl/stable/INTRO/">
 <span class="dropdown-text">Stan.jl</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-other-packages" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Other Packages</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-other-packages">    
        <li>
    <a class="dropdown-item" href="https://mc-stan.org/bayesplot/">
 <span class="dropdown-text">bayesplot</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://roualdes.github.io/bridgestan/latest/">
 <span class="dropdown-text">BridgeStan</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://paul-buerkner.github.io/brms/">
 <span class="dropdown-text">brms</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://mc-stan.org/loo/">
 <span class="dropdown-text">loo</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://mc-stan.org/posterior">
 <span class="dropdown-text">posterior</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://mc-stan.org/projpred">
 <span class="dropdown-text">projpred</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://mc-stan.org/rstanarm">
 <span class="dropdown-text">rstanarm</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://mc-stan.org/rstantools">
 <span class="dropdown-text">rstantools</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://mc-stan.org/shinystan">
 <span class="dropdown-text">shinystan</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools tools-wide">
    <a href="https://github.com/stan-dev" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
    <a href="https://discourse.mc-stan.org" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-chat-text-fill"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../reference-manual/encoding.html">Language</a></li><li class="breadcrumb-item"><a href="../reference-manual/types.html">Data Types and Declarations</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference-manual/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Stan Reference Manual</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Version 2.34</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Language</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference-manual/encoding.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Character Encoding</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference-manual/includes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Includes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference-manual/comments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Comments</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference-manual/whitespace.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Whitespace</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference-manual/types.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Data Types and Declarations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference-manual/expressions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Expressions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference-manual/statements.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statements</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference-manual/blocks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Program Blocks</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference-manual/user-functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">User-Defined Functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference-manual/transforms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Constraint Transforms</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference-manual/syntax.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Language Syntax</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference-manual/execution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Program Execution</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference-manual/deprecations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Deprecated Features</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference-manual/removals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Removed Features</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Algorithms</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference-manual/mcmc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">MCMC Sampling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference-manual/analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Posterior Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference-manual/optimization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Optimization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference-manual/pathfinder.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pathfinder</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference-manual/variational.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Variational Inference</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference-manual/laplace.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Laplace Approximation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference-manual/diagnostics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Diagnostic Mode</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Usage</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference-manual/reproducibility.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reproducibility</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference-manual/licenses.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Licenses and Dependencies</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#data-types.chapter" id="toc-data-types.chapter" class="nav-link active" data-scroll-target="#data-types.chapter">Data Types and Declarations</a>
  <ul class="collapse">
  <li><a href="#overview-of-data-types" id="toc-overview-of-data-types" class="nav-link" data-scroll-target="#overview-of-data-types">Overview of data types</a>
  <ul class="collapse">
  <li><a href="#primitive-types" id="toc-primitive-types" class="nav-link" data-scroll-target="#primitive-types">Primitive types</a></li>
  <li><a href="#complex-types" id="toc-complex-types" class="nav-link" data-scroll-target="#complex-types">Complex types</a></li>
  <li><a href="#vector-and-matrix-types" id="toc-vector-and-matrix-types" class="nav-link" data-scroll-target="#vector-and-matrix-types">Vector and matrix types</a></li>
  <li><a href="#array-types" id="toc-array-types" class="nav-link" data-scroll-target="#array-types">Array types</a></li>
  <li><a href="#tuple-types" id="toc-tuple-types" class="nav-link" data-scroll-target="#tuple-types">Tuple types</a></li>
  <li><a href="#constrained-data-types" id="toc-constrained-data-types" class="nav-link" data-scroll-target="#constrained-data-types">Constrained data types</a></li>
  </ul></li>
  <li><a href="#numerical-data-types" id="toc-numerical-data-types" class="nav-link" data-scroll-target="#numerical-data-types">Primitive numerical data types</a>
  <ul class="collapse">
  <li><a href="#integers" id="toc-integers" class="nav-link" data-scroll-target="#integers">Integers</a></li>
  <li><a href="#reals" id="toc-reals" class="nav-link" data-scroll-target="#reals">Reals</a></li>
  <li><a href="#promoting-integers-to-reals" id="toc-promoting-integers-to-reals" class="nav-link" data-scroll-target="#promoting-integers-to-reals">Promoting integers to reals</a></li>
  </ul></li>
  <li><a href="#complex-numerical-data-type" id="toc-complex-numerical-data-type" class="nav-link" data-scroll-target="#complex-numerical-data-type">Complex numerical data type</a>
  <ul class="collapse">
  <li><a href="#constructing-and-accessing-complex-numbers" id="toc-constructing-and-accessing-complex-numbers" class="nav-link" data-scroll-target="#constructing-and-accessing-complex-numbers">Constructing and accessing complex numbers</a></li>
  <li><a href="#promoting-real-to-complex" id="toc-promoting-real-to-complex" class="nav-link" data-scroll-target="#promoting-real-to-complex">Promoting real to complex</a></li>
  </ul></li>
  <li><a href="#scalar-data-types-and-variable-declarations" id="toc-scalar-data-types-and-variable-declarations" class="nav-link" data-scroll-target="#scalar-data-types-and-variable-declarations">Scalar data types and variable declarations</a>
  <ul class="collapse">
  <li><a href="#unconstrained-integer" id="toc-unconstrained-integer" class="nav-link" data-scroll-target="#unconstrained-integer">Unconstrained integer</a></li>
  <li><a href="#constrained-integer" id="toc-constrained-integer" class="nav-link" data-scroll-target="#constrained-integer">Constrained integer</a></li>
  <li><a href="#unconstrained-real" id="toc-unconstrained-real" class="nav-link" data-scroll-target="#unconstrained-real">Unconstrained real</a></li>
  <li><a href="#unconstrained-complex" id="toc-unconstrained-complex" class="nav-link" data-scroll-target="#unconstrained-complex">Unconstrained complex</a></li>
  <li><a href="#constrained-real" id="toc-constrained-real" class="nav-link" data-scroll-target="#constrained-real">Constrained real</a></li>
  <li><a href="#affinely-transformed-real" id="toc-affinely-transformed-real" class="nav-link" data-scroll-target="#affinely-transformed-real">Affinely transformed real</a></li>
  <li><a href="#expressions-as-bounds-and-offsetmultiplier" id="toc-expressions-as-bounds-and-offsetmultiplier" class="nav-link" data-scroll-target="#expressions-as-bounds-and-offsetmultiplier">Expressions as bounds and offset/multiplier</a></li>
  <li><a href="#declaring-optional-variables" id="toc-declaring-optional-variables" class="nav-link" data-scroll-target="#declaring-optional-variables">Declaring optional variables</a></li>
  </ul></li>
  <li><a href="#vector-and-matrix-data-types" id="toc-vector-and-matrix-data-types" class="nav-link" data-scroll-target="#vector-and-matrix-data-types">Vector and matrix data types</a>
  <ul class="collapse">
  <li><a href="#indexing-from-1" id="toc-indexing-from-1" class="nav-link" data-scroll-target="#indexing-from-1">Indexing from 1</a></li>
  <li><a href="#vectors" id="toc-vectors" class="nav-link" data-scroll-target="#vectors">Vectors</a></li>
  <li><a href="#complex-vectors" id="toc-complex-vectors" class="nav-link" data-scroll-target="#complex-vectors">Complex vectors</a></li>
  <li><a href="#unit-simplexes" id="toc-unit-simplexes" class="nav-link" data-scroll-target="#unit-simplexes">Unit simplexes</a></li>
  <li><a href="#unit-vectors" id="toc-unit-vectors" class="nav-link" data-scroll-target="#unit-vectors">Unit vectors</a></li>
  <li><a href="#ordered-vectors" id="toc-ordered-vectors" class="nav-link" data-scroll-target="#ordered-vectors">Ordered vectors</a></li>
  <li><a href="#positive-ordered-vectors" id="toc-positive-ordered-vectors" class="nav-link" data-scroll-target="#positive-ordered-vectors">Positive, ordered vectors</a></li>
  <li><a href="#row-vectors" id="toc-row-vectors" class="nav-link" data-scroll-target="#row-vectors">Row vectors</a></li>
  <li><a href="#complex-row-vectors" id="toc-complex-row-vectors" class="nav-link" data-scroll-target="#complex-row-vectors">Complex row vectors</a></li>
  <li><a href="#matrices" id="toc-matrices" class="nav-link" data-scroll-target="#matrices">Matrices</a></li>
  <li><a href="#complex-matrices" id="toc-complex-matrices" class="nav-link" data-scroll-target="#complex-matrices">Complex matrices</a></li>
  <li><a href="#covariance-matrices" id="toc-covariance-matrices" class="nav-link" data-scroll-target="#covariance-matrices">Covariance matrices</a></li>
  <li><a href="#correlation-matrices" id="toc-correlation-matrices" class="nav-link" data-scroll-target="#correlation-matrices">Correlation matrices</a></li>
  <li><a href="#cholesky-factors-of-covariance-matrices" id="toc-cholesky-factors-of-covariance-matrices" class="nav-link" data-scroll-target="#cholesky-factors-of-covariance-matrices">Cholesky factors of covariance matrices</a></li>
  <li><a href="#cholesky-factors-of-correlation-matrices" id="toc-cholesky-factors-of-correlation-matrices" class="nav-link" data-scroll-target="#cholesky-factors-of-correlation-matrices">Cholesky factors of correlation matrices</a></li>
  <li><a href="#assigning-constrained-variables" id="toc-assigning-constrained-variables" class="nav-link" data-scroll-target="#assigning-constrained-variables">Assigning constrained variables</a></li>
  <li><a href="#promoting-real-to-complex-matrixes" id="toc-promoting-real-to-complex-matrixes" class="nav-link" data-scroll-target="#promoting-real-to-complex-matrixes">Promoting real to complex matrixes</a></li>
  <li><a href="#expressions-as-size-declarations" id="toc-expressions-as-size-declarations" class="nav-link" data-scroll-target="#expressions-as-size-declarations">Expressions as size declarations</a></li>
  <li><a href="#accessing-vector-and-matrix-elements" id="toc-accessing-vector-and-matrix-elements" class="nav-link" data-scroll-target="#accessing-vector-and-matrix-elements">Accessing vector and matrix elements</a></li>
  <li><a href="#size-declaration-restrictions" id="toc-size-declaration-restrictions" class="nav-link" data-scroll-target="#size-declaration-restrictions">Size declaration restrictions</a></li>
  </ul></li>
  <li><a href="#array-data-types.section" id="toc-array-data-types.section" class="nav-link" data-scroll-target="#array-data-types.section">Array data types</a>
  <ul class="collapse">
  <li><a href="#declaring-array-variables" id="toc-declaring-array-variables" class="nav-link" data-scroll-target="#declaring-array-variables">Declaring array variables</a></li>
  <li><a href="#accessing-array-elements-and-subarrays" id="toc-accessing-array-elements-and-subarrays" class="nav-link" data-scroll-target="#accessing-array-elements-and-subarrays">Accessing array elements and subarrays</a></li>
  <li><a href="#assigning" id="toc-assigning" class="nav-link" data-scroll-target="#assigning">Assigning</a></li>
  <li><a href="#arrays-of-matrices-and-vectors" id="toc-arrays-of-matrices-and-vectors" class="nav-link" data-scroll-target="#arrays-of-matrices-and-vectors">Arrays of matrices and vectors</a></li>
  <li><a href="#partial-array-assignment" id="toc-partial-array-assignment" class="nav-link" data-scroll-target="#partial-array-assignment">Partial array assignment</a></li>
  <li><a href="#mixing-array-vector-and-matrix-types" id="toc-mixing-array-vector-and-matrix-types" class="nav-link" data-scroll-target="#mixing-array-vector-and-matrix-types">Mixing array, vector, and matrix types</a></li>
  <li><a href="#size-declaration-restrictions-1" id="toc-size-declaration-restrictions-1" class="nav-link" data-scroll-target="#size-declaration-restrictions-1">Size declaration restrictions</a></li>
  <li><a href="#size-zero-arrays" id="toc-size-zero-arrays" class="nav-link" data-scroll-target="#size-zero-arrays">Size zero arrays</a></li>
  </ul></li>
  <li><a href="#tuple-data-type" id="toc-tuple-data-type" class="nav-link" data-scroll-target="#tuple-data-type">Tuple data type</a>
  <ul class="collapse">
  <li><a href="#declaring-tuple-variables" id="toc-declaring-tuple-variables" class="nav-link" data-scroll-target="#declaring-tuple-variables">Declaring tuple variables</a></li>
  <li><a href="#accessing-tuple-elements" id="toc-accessing-tuple-elements" class="nav-link" data-scroll-target="#accessing-tuple-elements">Accessing tuple elements</a></li>
  <li><a href="#assigning-tuple-elements" id="toc-assigning-tuple-elements" class="nav-link" data-scroll-target="#assigning-tuple-elements">Assigning tuple elements</a></li>
  <li><a href="#unpacking-assignment-of-tuples" id="toc-unpacking-assignment-of-tuples" class="nav-link" data-scroll-target="#unpacking-assignment-of-tuples">Unpacking assignment of tuples</a></li>
  </ul></li>
  <li><a href="#variable-types-vs.-constraints-and-sizes" id="toc-variable-types-vs.-constraints-and-sizes" class="nav-link" data-scroll-target="#variable-types-vs.-constraints-and-sizes">Variable types vs.&nbsp;constraints and sizes</a>
  <ul class="collapse">
  <li><a href="#type-information-excludes-sizes" id="toc-type-information-excludes-sizes" class="nav-link" data-scroll-target="#type-information-excludes-sizes">Type information excludes sizes</a></li>
  <li><a href="#type-information-excludes-constraints" id="toc-type-information-excludes-constraints" class="nav-link" data-scroll-target="#type-information-excludes-constraints">Type information excludes constraints</a></li>
  <li><a href="#type-naming-notation" id="toc-type-naming-notation" class="nav-link" data-scroll-target="#type-naming-notation">Type naming notation</a></li>
  </ul></li>
  <li><a href="#variable-declaration" id="toc-variable-declaration" class="nav-link" data-scroll-target="#variable-declaration">Variable declaration</a></li>
  <li><a href="#compound-variable-declaration-and-definition" id="toc-compound-variable-declaration-and-definition" class="nav-link" data-scroll-target="#compound-variable-declaration-and-definition">Compound variable declaration and definition</a>
  <ul class="collapse">
  <li><a href="#assignment-typing" id="toc-assignment-typing" class="nav-link" data-scroll-target="#assignment-typing">Assignment typing</a></li>
  <li><a href="#rhs-expressions" id="toc-rhs-expressions" class="nav-link" data-scroll-target="#rhs-expressions">Right-hand side expressions</a></li>
  <li><a href="#scope-within-expressions" id="toc-scope-within-expressions" class="nav-link" data-scroll-target="#scope-within-expressions">Scope within expressions</a></li>
  </ul></li>
  <li><a href="#declaring-multiple-variables-at-once" id="toc-declaring-multiple-variables-at-once" class="nav-link" data-scroll-target="#declaring-multiple-variables-at-once">Declaring multiple variables at once</a>
  <ul class="collapse">
  <li><a href="#types-for-multiple-declarations" id="toc-types-for-multiple-declarations" class="nav-link" data-scroll-target="#types-for-multiple-declarations">Types for multiple declarations</a></li>
  <li><a href="#combining-with-other-features" id="toc-combining-with-other-features" class="nav-link" data-scroll-target="#combining-with-other-features">Combining with other features</a></li>
  </ul></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/stan-dev/docs/edit/master/src/reference-manual/types.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/stan-dev/docs/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">




<section id="data-types.chapter" class="level1">
<h1>Data Types and Declarations</h1>
<p>This chapter covers the data types for expressions in Stan. Every variable used in a Stan program must have a declared data type. Only values of that type will be assignable to the variable (except for temporary states of transformed data and transformed parameter values). This follows the convention of programming languages like C++, not the conventions of scripting languages like Python or statistical languages such as R or BUGS.</p>
<p>The motivation for strong, static typing is threefold.</p>
<ol type="1">
<li>Strong typing forces the programmerâ€™s intent to be declared with the variable, making programs easier to comprehend and hence easier to debug and maintain.</li>
<li>Strong typing allows programming errors relative to the declared intent to be caught sooner (at compile time) rather than later (at run time). The Stan compiler (called through an interface such as CmdStan, RStan, or PyStan) will flag any type errors and indicate the offending expressions quickly when the program is compiled.</li>
<li>Constrained types will catch runtime data, initialization, and intermediate value errors as soon as they occur rather than allowing them to propagate and potentially pollute final results.</li>
</ol>
<p>Strong typing disallows assigning the same variable to objects of different types at different points in the program or in different invocations of the program.</p>
<section id="overview-of-data-types" class="level2">
<h2 class="anchored" data-anchor-id="overview-of-data-types">Overview of data types</h2>
<p>Arguments for built-in and user-defined functions and local variables are required to be basic data types, meaning an unconstrained scalar, vector, or matrix type, or an array of such.</p>
<p>Passing arguments to functions in Stan works just like assignment to basic types. Stan functions are only specified for the basic data types of their arguments, including array dimensionality, but not for sizes or constraints. Of course, functions often check constraints as part of their behavior.</p>
<section id="primitive-types" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="primitive-types">Primitive types</h3>
<p>Stan provides two primitive data types, <code>real</code> for continuous values and <code>int</code> for integer values. These are both considered scalar types.</p>
</section>
<section id="complex-types" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="complex-types">Complex types</h3>
<p>Stan provides a complex number data type <code>complex</code>, where a complex number contains both a real and an imaginary component, both of which are of type <code>real</code>. Complex types are considered scalar types.</p>
</section>
<section id="vector-and-matrix-types" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="vector-and-matrix-types">Vector and matrix types</h3>
<p>Stan provides three real-valued matrix data types, <code>vector</code> for column vectors, <code>row_vector</code> for row vectors, and <code>matrix</code> for matrices.</p>
<p>Stan also provides three complex-valued matrix data types, <code>complex_vector</code> for column vectors, <code>complex_row_vector</code> for row vectors, and <code>complex_matrix</code> for matrices.</p>
</section>
<section id="array-types" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="array-types">Array types</h3>
<p>Any type (including the constrained types discussed in the next section) can be made into an array type by declaring array arguments. For example,</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span>[<span class="dv">10</span>] <span class="dt">real</span> x;</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span>[<span class="dv">6</span>, <span class="dv">7</span>] <span class="dt">matrix</span>[<span class="dv">3</span>, <span class="dv">3</span>] m;</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span>[<span class="dv">12</span>, <span class="dv">8</span>, <span class="dv">15</span>] <span class="dt">complex</span> z;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>declares <code>x</code> to be a one-dimensional array of size 10 containing real values, declares <code>m</code> to be a two-dimensional array of size <span class="math inline">\(6 \times 7\)</span> containing values that are <span class="math inline">\(3 \times 3\)</span> matrices, and declares <code>z</code> to be a <span class="math inline">\(12 \times 8 \times 15\)</span> array of complex numbers.</p>
<p>Prior to 2.26 Stan models used a different syntax which has since been removed. See the <a href="../reference-manual/removals.html">Removed Features</a> chapter for more details.</p>
</section>
<section id="tuple-types" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="tuple-types">Tuple types</h3>
<p>For any sequence of types, Stan provides a tuple data type. For example,</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="dt">tuple</span>(<span class="dt">real</span>, <span class="dt">array</span>[<span class="dv">5</span>] <span class="dt">int</span>) xi;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>declares <code>xi</code> to be a tuple holding two values, the first of which is of type type <code>real</code> and the second of which a 5-dimensional array of type <code>int</code>.</p>
</section>
<section id="constrained-data-types" class="level3">
<h3 class="anchored" data-anchor-id="constrained-data-types">Constrained data types</h3>
<p>Declarations of variables other than local variables may be provided with constraints. These constraints are not part of the underlying data type for a variable, but determine error checking in the transformed data, transformed parameter, and generated quantities block, and the transform from unconstrained to constrained space in the parameters block.</p>
<p>All of the basic data types other than <code>complex</code> may be given lower and upper bounds using syntax such as</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span>&lt;<span class="kw">lower</span>=<span class="dv">1</span>&gt; N;</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="dt">real</span>&lt;<span class="kw">upper</span>=<span class="dv">0</span>&gt; log_p;</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="dt">vector</span>&lt;<span class="kw">lower</span>=-<span class="dv">1</span>, <span class="kw">upper</span>=<span class="dv">1</span>&gt;[<span class="dv">3</span>] rho;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>There are also special data types for structured vectors and matrices. There are four constrained vector data types, <code>simplex</code> for unit simplexes, <code>unit_vector</code> for unit-length vectors, <code>ordered</code> for ordered vectors of scalars and <code>positive_ordered</code> for vectors of positive ordered scalars. There are specialized matrix data types <code>corr_matrix</code> and <code>cov_matrix</code> for correlation matrices (symmetric, positive definite, unit diagonal) and covariance matrices (symmetric, positive definite). The type <code>cholesky_factor_cov</code> is for Cholesky factors of covariance matrices (lower triangular, positive diagonal, product with own transpose is a covariance matrix). The type <code>cholesky_factor_corr</code> is for Cholesky factors of correlation matrices (lower triangular, positive diagonal, unit-length rows).</p>
<p>Constraints provide error checking for variables defined in the <code>data</code>, <code>transformed data</code>, <code>transformed parameters</code>, and <code>generated quantities</code> blocks. Constraints are critical for variables declared in the <code>parameters</code> block, where they determine the transformation from constrained variables (those satisfying the declared constraint) to unconstrained variables (those ranging over all of <span class="math inline">\(\mathbb{R}^n\)</span>).</p>
<p>It is worth calling out the most important aspect of constrained data types:</p>
<div style="margin:0 2em 0 2em">
<p><em>The model must have support (non-zero density, equivalently finite log density) at parameter values that satisfy the declared constraints.</em></p>
</div>
<p>If this condition is violated with parameter values that satisfy declared constraints but do not have finite log density, then the samplers and optimizers may have any of a number of pathologies including just getting stuck, failure to initialize, excessive Metropolis rejection, or biased draws due to inability to explore the tails of the distribution.</p>
</section>
</section>
<section id="numerical-data-types" class="level2">
<h2 class="anchored" data-anchor-id="numerical-data-types">Primitive numerical data types</h2>
<p>Unfortunately, the lovely mathematical abstraction of integers and real numbers is only partially supported by finite-precision computer arithmetic.</p>
<section id="integers" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="integers">Integers</h3>
<p>Stan uses 32-bit (4-byte) integers for all of its integer representations. The maximum value that can be represented as an integer is <span class="math inline">\(2^{31}-1\)</span>; the minimum value is <span class="math inline">\(-(2^{31})\)</span>.</p>
<p>When integers overflow, their value is determined by the underlying architecture. On most, their values wrap, but this cannot be guaranteed. Thus it is up to the Stan programmer to make sure the integer values in their programs stay in range. In particular, every intermediate expression must have an integer value that is in range.</p>
<p>Integer arithmetic works in the expected way for addition, subtraction, and multiplication, but truncates the result of division (see <a href="https://mc-stan.org/docs/functions-reference/integer-valued_basic_functions.html#int-arithmetic">the Stan Functions Reference integer-valued arithmetic operators section</a> for more information).</p>
</section>
<section id="reals" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="reals">Reals</h3>
<p>Stan uses 64-bit (8-byte) floating point representations of real numbers. Stan roughly<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> follows the IEEE 754 standard for floating-point computation. The range of a 64-bit number is roughly <span class="math inline">\(\pm 2^{1022}\)</span>, which is slightly larger than <span class="math inline">\(\pm 10^{307}\)</span>. It is a good idea to stay well away from such extreme values in Stan models as they are prone to cause overflow.</p>
<p>64-bit floating point representations have roughly 15 decimal digits of accuracy. But when they are combined, the result often has less accuracy. In some cases, the difference in accuracy between two operands and their result is large.</p>
<p>There are three special real values used to represent (1) not-a-number value for error conditions, (2) positive infinity for overflow, and (3) negative infinity for overflow. The behavior of these special numbers follows standard IEEE 754 behavior.</p>
<section id="not-a-number" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="not-a-number">Not-a-number</h4>
<p>The not-a-number value propagates. If an argument to a real-valued function is not-a-number, it either rejects (an exception in the underlying C++) or returns not-a-number itself. For boolean-valued comparison operators, if one of the arguments is not-a-number, the return value is always zero (i.e., false).</p>
</section>
<section id="infinite-values" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="infinite-values">Infinite values</h4>
<p>Positive infinity is greater than all numbers other than itself and not-a-number; negative infinity is similarly smaller. Adding an infinite value to a finite value returns the infinite value. Dividing a finite number by an infinite value returns zero; dividing an infinite number by a finite number returns the infinite number of appropriate sign. Dividing a finite number by zero returns positive infinity. Dividing two infinite numbers produces a not-a-number value as does subtracting two infinite numbers. Some functions are sensitive to infinite values; for example, the exponential function returns zero if given negative infinity and positive infinity if given positive infinity. Often the gradients will break down when values are infinite, making these boundary conditions less useful than they may appear at first.</p>
</section>
</section>
<section id="promoting-integers-to-reals" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="promoting-integers-to-reals">Promoting integers to reals</h3>
<p>Stan automatically promotes integer values to real values if necessary, but does not automatically demote real values to integers. For very large integers, this will cause a rounding error to fewer significant digits in the floating point representation than in the integer representation.</p>
<p>Unlike in C++, real values are never demoted to integers. Therefore, real values may only be assigned to real variables. Integer values may be assigned to either integer variables or real variables. Internally, the integer representation is cast to a floating-point representation. This operation is not without overhead and should thus be avoided where possible.</p>
</section>
</section>
<section id="complex-numerical-data-type" class="level2">
<h2 class="anchored" data-anchor-id="complex-numerical-data-type">Complex numerical data type</h2>
<p>The <code>complex</code> data type is a scalar, but unlike <code>real</code> and <code>int</code> types, it contains two components, a real and imaginary component, both of which are of type <code>real</code>. That is, the real and imaginary components of a complex number are 64-bit, IEEE 754-complaint floating point numbers.</p>
<section id="constructing-and-accessing-complex-numbers" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="constructing-and-accessing-complex-numbers">Constructing and accessing complex numbers</h3>
<p>Imaginary literals are written in mathematical notation using a numeral followed by the suffix <code>i</code>. For example, the following example constructs a complex number <span class="math inline">\(2 - 1.3i\)</span> and assigns it to the variable <code>z</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="dt">complex</span> z = <span class="dv">2</span> - <span class="fl">1.3i</span>;</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="dt">real</span> re = get_real(z);  <span class="co">// re has value 2.0</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="dt">real</span> im = get_imag(z);  <span class="co">// im has value -1.3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The getter functions then extract the real and imaginary components of <code>z</code> and assign them to <code>re</code> and <code>im</code> respectively.</p>
<p>The function <code>to_complex</code> constructs a complex number from its real and imaginary components. The functional form needs to be used whenever the components are not literal numerals, as in the following example.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="dt">vector</span>[K] re;</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="dt">vector</span>[K] im;</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">// ...</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span>:K) {</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">complex</span> z = to_complex(re[k], im[k]);</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ...</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="promoting-real-to-complex" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="promoting-real-to-complex">Promoting real to complex</h3>
<p>Expressions of type <code>real</code> may be assigned to variables of type <code>complex</code>. For example, the following is a valid sequence of Stan statements.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="dt">real</span> x = <span class="fl">5.0</span>;</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="dt">complex</span> z = x;  <span class="co">// get_real(z) == 5.0, get_imag(z) == 0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The real number assigned to a complex number determineâ€™s the complex numberâ€™s real component, with the imaginary component set to zero.</p>
<p>Assignability is transitive, so that expressions of type <code>int</code> may also be assigned to variables of type <code>complex</code>, as in the following example.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> n = <span class="dv">2</span>;</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="dt">complex</span> z = n;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Function arguments also support promotion of integer or real typed expressions to type <code>complex</code>.</p>
</section>
</section>
<section id="scalar-data-types-and-variable-declarations" class="level2">
<h2 class="anchored" data-anchor-id="scalar-data-types-and-variable-declarations">Scalar data types and variable declarations</h2>
<p>All variables used in a Stan program must have an explicitly declared data type. The form of a declaration includes the type and the name of a variable. This section covers scalar types, namely integer, real, and complex. The next section covers vector and matrix types, and the following section array types.</p>
<section id="unconstrained-integer" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="unconstrained-integer">Unconstrained integer</h3>
<p>Unconstrained integers are declared using the <code>int</code> keyword. For example, the variable <code>N</code> is declared to be an integer as follows.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> N;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="constrained-integer" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="constrained-integer">Constrained integer</h3>
<p>Integer data types may be constrained to allow values only in a specified interval by providing a lower bound, an upper bound, or both. For instance, to declare <code>N</code> to be a positive integer, use the following.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span>&lt;<span class="kw">lower</span>=<span class="dv">1</span>&gt; N;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This illustrates that the bounds are inclusive for integers.</p>
<p>To declare an integer variable <code>cond</code> to take only binary values, that is zero or one, a lower and upper bound must be provided, as in the following example.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span>&lt;<span class="kw">lower</span>=<span class="dv">0</span>, <span class="kw">upper</span>=<span class="dv">1</span>&gt; cond;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="unconstrained-real" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="unconstrained-real">Unconstrained real</h3>
<p>Unconstrained real variables are declared using the keyword <code>real</code>. The following example declares <code>theta</code> to be an unconstrained continuous value.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="dt">real</span> theta;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="unconstrained-complex" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="unconstrained-complex">Unconstrained complex</h3>
<p>Unconstrained complex numbers are declared using the keyword <code>complex</code>. The following example declares <code>z</code> to be an unconstrained complex variable.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="dt">complex</span> z;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="constrained-real" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="constrained-real">Constrained real</h3>
<p>Real variables may be bounded using the same syntax as integers. In theory (that is, with arbitrary-precision arithmetic), the bounds on real values would be exclusive. Unfortunately, finite-precision arithmetic rounding errors will often lead to values on the boundaries, so they are allowed in Stan.</p>
<p>The variable <code>sigma</code> may be declared to be non-negative as follows.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="dt">real</span>&lt;<span class="kw">lower</span>=<span class="dv">0</span>&gt; sigma;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The following declares the variable <code>x</code> to be less than or equal to <span class="math inline">\(-1\)</span>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="dt">real</span>&lt;<span class="kw">upper</span>=-<span class="dv">1</span>&gt; x;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To ensure <code>rho</code> takes on values between <span class="math inline">\(-1\)</span> and <span class="math inline">\(1\)</span>, use the following declaration.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="dt">real</span>&lt;<span class="kw">lower</span>=-<span class="dv">1</span>, <span class="kw">upper</span>=<span class="dv">1</span>&gt; rho;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="infinite-constraints" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="infinite-constraints">Infinite constraints</h4>
<p>Lower bounds that are negative infinity or upper bounds that are positive infinity are ignored. Stan provides constants <code>positive_infinity()</code> and <code>negative_infinity()</code> which may be used for this purpose, or they may be supplied as data.</p>
</section>
</section>
<section id="affinely-transformed-real" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="affinely-transformed-real">Affinely transformed real</h3>
<p>Real variables may be declared on a space that has been transformed using an affine transformation <span class="math inline">\(x\mapsto \mu + \sigma * x\)</span> with offset <span class="math inline">\(\mu\)</span> and (positive) multiplier <span class="math inline">\(\sigma\)</span>, using a syntax similar to that for bounds. While these transforms do not change the asymptotic sampling behaviour of the resulting Stan program (in a sense, the model the program implements), they can be useful for making the sampling process more efficient by transforming the geometry of the problem to a more natural multiplier and to a more natural offset for the sampling process, for instance by facilitating a non-centered parameterisation. While these affine transformation declarations do not impose a hard constraint on variables, they behave like the bounds constraints in many ways and could perhaps be viewed as acting as a sort of soft constraint.</p>
<p>The variable <code>x</code> may be declared to have offset <span class="math inline">\(1\)</span> as follows.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="dt">real</span>&lt;<span class="dt">offset</span>=<span class="dv">1</span>&gt; x;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Similarly, it can be declared to have multiplier <span class="math inline">\(2\)</span> as follows.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="dt">real</span>&lt;<span class="dt">multiplier</span>=<span class="dv">2</span>&gt; x;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Finally, we can combine both declarations to declare a variable with offset <span class="math inline">\(1\)</span> and multiplier <span class="math inline">\(2\)</span>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="dt">real</span>&lt;<span class="dt">offset</span>=<span class="dv">1</span>, <span class="dt">multiplier</span>=<span class="dv">2</span>&gt; x;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>As an example, we can give <code>x</code> a normal distribution with non-centered parameterization as follows.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">parameters</span> {</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">real</span>&lt;<span class="dt">offset</span>=mu, <span class="dt">multiplier</span>=sigma&gt; x;</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="kw">model</span> {</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  x ~ normal(mu, sigma);</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Recall that the centered parameterization is achieved with the code</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">parameters</span> {</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">real</span> x;</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="kw">model</span> {</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  x ~ normal(mu, sigma);</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>or equivalently</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">parameters</span> {</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">real</span>&lt;<span class="dt">offset</span>=<span class="dv">0</span>, <span class="dt">multiplier</span>=<span class="dv">1</span>&gt; x;</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="kw">model</span> {</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  x ~ normal(mu, sigma);</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="expressions-as-bounds-and-offsetmultiplier" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="expressions-as-bounds-and-offsetmultiplier">Expressions as bounds and offset/multiplier</h3>
<p>Bounds (and offset and multiplier) for integer or real variables may be arbitrary expressions. The only requirement is that they only include variables that have been declared (though not necessarily defined) before the declaration. array[N] row_vector[D] x; If the bounds themselves are parameters, the behind-the-scenes variable transform accounts for them in the log Jacobian.</p>
<p>For example, it is acceptable to have the following declarations.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> {</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a> <span class="dt">real</span> lb;</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="kw">parameters</span> {</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>   <span class="dt">real</span>&lt;<span class="kw">lower</span>=lb&gt; phi;</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This declares a real-valued parameter <code>phi</code> to take values greater than the value of the real-valued data variable <code>lb</code>. Constraints may be arbitrary expressions, but must be of type <code>int</code> for integer variables and of type <code>real</code> for real variables (including constraints on vectors, row vectors, and matrices). Variables used in constraints can be any variable that has been defined at the point the constraint is used. For instance,</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> {</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>   <span class="dt">int</span>&lt;<span class="kw">lower</span>=<span class="dv">1</span>&gt; N;</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>   <span class="dt">array</span>[N] <span class="dt">real</span> y;</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="kw">parameters</span> {</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>   <span class="dt">real</span>&lt;<span class="kw">lower</span>=min(y), <span class="kw">upper</span>=max(y)&gt; phi;</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This declares a positive integer data variable <code>N</code>, an array <code>y</code> of real-valued data of length <code>N</code>, and then a parameter ranging between the minimum and maximum value of <code>y</code>. As shown in the example code, the functions <code>min()</code> and <code>max()</code> may be applied to containers such as arrays.</p>
<p>A more subtle case involves declarations of parameters or transformed parameters based on parameters declared previously. For example, the following program will work as intended.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">parameters</span> {</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">real</span> a;</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">real</span>&lt;<span class="kw">lower</span>=a&gt; b;  <span class="co">// enforces a &lt; b</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="kw">transformed parameters</span> {</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">real</span> c;</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">real</span>&lt;<span class="kw">lower</span>=c&gt; d;</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  c = a;</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  d = b;</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The parameters instance works because all parameters are defined externally before the block is executed. The transformed parameters case works even though <code>c</code> isnâ€™t defined at the point it is used, because constraints on transformed parameters are only validated at the end of the block. Data variables work like parameter variables, whereas transformed data and generated quantity variables work like transformed parameter variables.</p>
</section>
<section id="declaring-optional-variables" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="declaring-optional-variables">Declaring optional variables</h3>
<p>A variable may be declared with a size that depends on a boolean constant. For example, consider the definition of <code>alpha</code> in the following program fragment.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> {</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">int</span>&lt;<span class="kw">lower</span>=<span class="dv">0</span>, <span class="kw">upper</span>=<span class="dv">1</span>&gt; include_alpha;</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ...</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="kw">parameters</span> {</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">vector</span>[include_alpha ? N : <span class="dv">0</span>] alpha;</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ...</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If <code>include_alpha</code> is true, the model will include the vector <code>alpha</code>; if the flag is false, the model will not include <code>alpha</code> (technically, it will include <code>alpha</code> of size 0, which means it wonâ€™t contain any values and wonâ€™t be included in any output).</p>
<p>This technique is not just useful for containers. If the value of <code>N</code> is set to 1, then the vector <code>alpha</code> will contain a single element and thus <code>alpha[1]</code> behaves like an optional scalar, the existence of which is controlled by <code>include_alpha</code>.</p>
<p>This coding pattern allows a single Stan program to define different models based on the data provided as input. This strategy is used extensively in the implementation of the <a href="https://mc-stan.org/rstanarm">RStanArm package</a>.</p>
</section>
</section>
<section id="vector-and-matrix-data-types" class="level2">
<h2 class="anchored" data-anchor-id="vector-and-matrix-data-types">Vector and matrix data types</h2>
<p>Stan provides three types of container objects: arrays, vectors, and matrices. Vectors and matrices are more limited kinds of data structures than arrays. Vectors are intrinsically one-dimensional collections of real or complex values, whereas matrices are intrinsically two dimensional. Vectors, matrices, and arrays are not assignable to one another, even if their dimensions are identical. A <span class="math inline">\(3 \times 4\)</span> matrix is a different kind of object in Stan than a <span class="math inline">\(3
\times 4\)</span> array.</p>
<p>The intention of using matrix types is to call out their usage in the code. There are three situations in Stan where <em>only</em> vectors and matrices may be used,</p>
<ul>
<li>matrix arithmetic operations (e.g., matrix multiplication)</li>
<li>linear algebra functions (e.g., eigenvalues and determinants), and</li>
<li>multivariate function parameters and outcomes (e.g., multivariate normal distribution arguments).</li>
</ul>
<p>Vectors and matrices cannot be typed to return integer values. They are restricted to <code>real</code> and <code>complex</code> values.</p>
<p>For constructing vectors and matrices in Stan, see <a href="../reference-manual/expressions.html#vector-matrix-array-expressions.section">Vector, Matrix, and Array Expressions</a>.</p>
<section id="indexing-from-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="indexing-from-1">Indexing from 1</h3>
<p>Vectors and matrices, as well as arrays, are indexed starting from one (1) in Stan. This follows the convention in statistics and linear algebra as well as their implementations in the statistical software packages R, MATLAB, BUGS, and JAGS. General computer programming languages, on the other hand, such as C++ and Python, index arrays starting from zero.</p>
</section>
<section id="vectors" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="vectors">Vectors</h3>
<p>Vectors in Stan are column vectors; see below for information on row vectors. Vectors are declared with a size (i.e., a dimensionality). For example, a 3-dimensional real vector is declared with the keyword <code>vector</code>, as follows.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="dt">vector</span>[<span class="dv">3</span>] u;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Vectors may also be declared with constraints, as in the following declaration of a 3-vector of non-negative values.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="dt">vector</span>&lt;<span class="kw">lower</span>=<span class="dv">0</span>&gt;[<span class="dv">3</span>] u;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Similarly, they may be declared with a offset and/or multiplier, as in the following example</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="dt">vector</span>&lt;<span class="dt">offset</span>=<span class="dv">42</span>, <span class="dt">multiplier</span>=<span class="dv">3</span>&gt;[<span class="dv">3</span>] u;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="complex-vectors" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="complex-vectors">Complex vectors</h3>
<p>Like real vectors, complex vectors are column vectors and are declared with a size. For example, a 3-dimensional complex vector is declared with the keyword <code>complex_vector</code>, as follows.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="dt">complex_vector</span>[<span class="dv">3</span>] v;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Complex vector declarations do not support any constraints.</p>
</section>
<section id="unit-simplexes" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="unit-simplexes">Unit simplexes</h3>
<p>A unit simplex is a vector with non-negative values whose entries sum to 1. For instance, <span class="math inline">\([0.2,0.3,0.4,0.1]^{\top}\)</span> is a unit 4-simplex. Unit simplexes are most often used as parameters in categorical or multinomial distributions, and they are also the sampled variate in a Dirichlet distribution. Simplexes are declared with their full dimensionality. For instance, <code>theta</code> is declared to be a unit <span class="math inline">\(5\)</span>-simplex by</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="dt">simplex</span>[<span class="dv">5</span>] theta;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Unit simplexes are implemented as vectors and may be assigned to other vectors and vice-versa. Simplex variables, like other constrained variables, are validated to ensure they contain simplex values; for simplexes, this is only done up to a statically specified accuracy threshold <span class="math inline">\(\epsilon\)</span> to account for errors arising from floating-point imprecision.</p>
<p>In high dimensional problems, simplexes may require smaller step sizes in the inference algorithms in order to remain stable; this can be achieved through higher target acceptance rates for samplers and longer warmup periods, tighter tolerances for optimization with more iterations, and in either case, with less dispersed parameter initialization or custom initialization if there are informative priors for some parameters.</p>
</section>
<section id="unit-vectors" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="unit-vectors">Unit vectors</h3>
<p>A unit vector is a vector with a norm of one. For instance, <span class="math inline">\([0.5,
0.5, 0.5, 0.5]^{\top}\)</span> is a unit 4-vector. Unit vectors are sometimes used in directional statistics. Unit vectors are declared with their full dimensionality. For instance, <code>theta</code> is declared to be a unit <span class="math inline">\(5\)</span>-vector by</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="dt">unit_vector</span>[<span class="dv">5</span>] theta;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Unit vectors are implemented as vectors and may be assigned to other vectors and vice-versa. Unit vector variables, like other constrained variables, are validated to ensure that they are indeed unit length; for unit vectors, this is only done up to a statically specified accuracy threshold <span class="math inline">\(\epsilon\)</span> to account for errors arising from floating-point imprecision.</p>
</section>
<section id="ordered-vectors" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="ordered-vectors">Ordered vectors</h3>
<p>An ordered vector type in Stan represents a vector whose entries are sorted in ascending order. For instance, <span class="math inline">\((-1.3,2.7,2.71)^{\top}\)</span> is an ordered 3-vector. Ordered vectors are most often employed as cut points in ordered logistic regression models (see <a href="https://mc-stan.org/docs/stan-users-guide/regression.html#ordered-logistic.section">section</a>).</p>
<p>The variable <code>c</code> is declared as an ordered 5-vector by</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="dt">ordered</span>[<span class="dv">5</span>] c;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>After their declaration, ordered vectors, like unit simplexes, may be assigned to other vectors and other vectors may be assigned to them. Constraints will be checked after executing the block in which the variables were declared.</p>
</section>
<section id="positive-ordered-vectors" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="positive-ordered-vectors">Positive, ordered vectors</h3>
<p>There is also a positive, ordered vector type which operates similarly to ordered vectors, but all entries are constrained to be positive. For instance, <span class="math inline">\((2,3.7,4,12.9)\)</span> is a positive, ordered 4-vector.</p>
<p>The variable <code>d</code> is declared as a positive, ordered 5-vector by</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="dt">positive_ordered</span>[<span class="dv">5</span>] d;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Like ordered vectors, after their declaration, positive ordered vectors may be assigned to other vectors and other vectors may be assigned to them. Constraints will be checked after executing the block in which the variables were declared.</p>
</section>
<section id="row-vectors" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="row-vectors">Row vectors</h3>
<p>Row vectors are declared with the keyword <code>row_vector</code>. Like (column) vectors, they are declared with a size. For example, a 1093-dimensional row vector <code>u</code> would be declared as</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="dt">row_vector</span>[<span class="dv">1093</span>] u;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Constraints are declared as for vectors, as in the following example of a 10-vector with values between -1 and 1.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="dt">row_vector</span>&lt;<span class="kw">lower</span>=-<span class="dv">1</span>, <span class="kw">upper</span>=<span class="dv">1</span>&gt;[<span class="dv">10</span>] u;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Offset and multiplier are also similar as for the following 3-row-vector with offset -42 and multiplier 3.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="dt">row_vector</span>&lt;<span class="dt">offset</span>=-<span class="dv">42</span>, <span class="dt">multiplier</span>=<span class="dv">3</span>&gt;[<span class="dv">3</span>] u;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Row vectors may not be assigned to column vectors, nor may column vectors be assigned to row vectors. If assignments are required, they may be accommodated through the transposition operator.</p>
</section>
<section id="complex-row-vectors" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="complex-row-vectors">Complex row vectors</h3>
<p>Complex row vectors are declared with the keyword <code>complex_row_vector</code> and given a size in basic declarations. For example, a 12-dimensional complex row vector <code>v</code> would be declared as</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="dt">complex_row_vector</span>[<span class="dv">12</span>] v;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Complex row vectors do not allow constraints.</p>
</section>
<section id="matrices" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="matrices">Matrices</h3>
<p>Matrices are declared with the keyword <code>matrix</code> along with a number of rows and number of columns. For example,</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="dt">matrix</span>[<span class="dv">3</span>, <span class="dv">3</span>] A;</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="dt">matrix</span>[M, N] B;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>declares <code>A</code> to be a <span class="math inline">\(3 \times 3\)</span> matrix and <code>B</code> to be a <span class="math inline">\(M
\times N\)</span> matrix. For the second declaration to be well formed, the variables <code>M</code> and <code>N</code> must be declared as integers in either the data or transformed data block and before the matrix declaration.</p>
<p>Matrices may also be declared with constraints, as in this (<span class="math inline">\(3 \times 4\)</span>) matrix of non-positive values.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="dt">matrix</span>&lt;<span class="kw">upper</span>=<span class="dv">0</span>&gt;[<span class="dv">3</span>, <span class="dv">4</span>] B;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Similarly, matrices can be declared to have a set offset and/or multiplier, as in this matrix with multiplier 5.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="dt">matrix</span>&lt;<span class="dt">multiplier</span>=<span class="dv">5</span>&gt;[<span class="dv">3</span>, <span class="dv">4</span>] B;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="assigning-to-rows-of-a-matrix" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="assigning-to-rows-of-a-matrix">Assigning to rows of a matrix</h4>
<p>Rows of a matrix can be assigned by indexing the left-hand side of an assignment statement. For example, this is possible.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="dt">matrix</span>[M, N] a;</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="dt">row_vector</span>[N] b;</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="co">// ...</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>a[<span class="dv">1</span>] = b;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This copies the values from row vector <code>b</code> to <code>a[1]</code>, which is the first row of the matrix <code>a</code>. If the number of columns in <code>a</code> is not the same as the size of <code>b</code>, a run-time error is raised; the number of columns of <code>a</code> is <code>N</code>, which is also the number of columns of <code>b</code>.</p>
<p>Assignment works by copying values in Stan. That means any subsequent assignment to <code>a[1]</code> does not affect <code>b</code>, nor does an assignment to <code>b</code> affect <code>a</code>.</p>
</section>
</section>
<section id="complex-matrices" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="complex-matrices">Complex matrices</h3>
<p>Complex matrices are declared with the keyword <code>complex_matrix</code> and a number of rows and columns. For example,</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="dt">complex_matrix</span>[<span class="dv">3</span>, <span class="dv">3</span>] C;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Complex matrices do not allow constraints.</p>
</section>
<section id="covariance-matrices" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="covariance-matrices">Covariance matrices</h3>
<p>Matrix variables may be constrained to represent covariance matrices. A matrix is a covariance matrix if it is symmetric and positive definite. Like correlation matrices, covariance matrices only need a single dimension in their declaration. For instance,</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="dt">cov_matrix</span>[K] Omega;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>declares <code>Omega</code> to be a <span class="math inline">\(K \times K\)</span> covariance matrix, where <span class="math inline">\(K\)</span> is the value of the data variable <code>K</code>.</p>
</section>
<section id="correlation-matrices" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="correlation-matrices">Correlation matrices</h3>
<p>Matrix variables may be constrained to represent correlation matrices. A matrix is a correlation matrix if it is symmetric and positive definite, has entries between <span class="math inline">\(-1\)</span> and <span class="math inline">\(1\)</span>, and has a unit diagonal. Because correlation matrices are square, only one dimension needs to be declared. For example,</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="dt">corr_matrix</span>[<span class="dv">3</span>] Sigma;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>declares <code>Sigma</code> to be a <span class="math inline">\(3 \times 3\)</span> correlation matrix.</p>
<p>Correlation matrices may be assigned to other matrices, including unconstrained matrices, if their dimensions match, and vice-versa.</p>
</section>
<section id="cholesky-factors-of-covariance-matrices" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="cholesky-factors-of-covariance-matrices">Cholesky factors of covariance matrices</h3>
<p>Matrix variables may be constrained to represent the Cholesky factors of a covariance matrix. This is often more convenient or more efficient than representing covariance matrices directly.</p>
<p>A Cholesky factor <span class="math inline">\(L\)</span> is an <span class="math inline">\(M \times N\)</span> lower-triangular matrix (if <span class="math inline">\(m &lt; n\)</span> then <span class="math inline">\(L[m, n] =0\)</span>) with a strictly positive diagonal (<span class="math inline">\(L[k, k]
&gt; 0\)</span>) and <span class="math inline">\(M \geq N\)</span>. If <span class="math inline">\(L\)</span> is a Cholesky factor, then <span class="math inline">\(\Sigma = L
\, L^{\top}\)</span> is a covariance matrix (i.e., it is positive definite). The mapping between positive definite matrices and their Cholesky factors is bijectiveâ€”every covariance matrix has a unique Cholesky factorization.</p>
<p>The typical case of a square Cholesky factor may be declared with a single dimension,</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="dt">cholesky_factor_cov</span>[<span class="dv">4</span>] L;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="cholesky-factors-of-positive-semi-definite-matrices" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="cholesky-factors-of-positive-semi-definite-matrices">Cholesky factors of positive semi-definite matrices</h4>
<p>In general, two dimensions may be declared, with the above being equal to <code>cholesky_factor_cov[4, 4]</code>. The type <code>cholesky_factor_cov[M, N]</code> may be used for the general <span class="math inline">\(M \times N\)</span> case to produce positive semi-definite matrices of rank <span class="math inline">\(M\)</span>.</p>
</section>
</section>
<section id="cholesky-factors-of-correlation-matrices" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="cholesky-factors-of-correlation-matrices">Cholesky factors of correlation matrices</h3>
<p>Matrix variables may be constrained to represent the Cholesky factors of a correlation matrix.</p>
<p>A Cholesky factor for a correlation matrix <span class="math inline">\(L\)</span> is a <span class="math inline">\(K \times K\)</span> lower-triangular matrix with positive diagonal entries and rows that are of length 1 (i.e., <span class="math inline">\(\sum_{n=1}^K L_{m,n}^2 = 1\)</span>). If <span class="math inline">\(L\)</span> is a Cholesky factor for a correlation matrix, then <span class="math inline">\(L\,L^{\top}\)</span> is a correlation matrix (i.e., symmetric positive definite with a unit diagonal).</p>
<p>To declare the variable <code>L</code> to be a <code>K</code> by <code>K</code> Cholesky factor of a correlation matrix, the following code may be used.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="dt">cholesky_factor_corr</span>[K] L;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="assigning-constrained-variables" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="assigning-constrained-variables">Assigning constrained variables</h3>
<p>Constrained variables of all types may be assigned to other variables of the same unconstrained type and vice-versa. Matching is interpreted strictly as having the same basic type and number of array dimensions. Constraints are not considered, but basic data types are. For instance, a variable declared to be <code>real&lt;lower=0, upper=1&gt;</code> could be assigned to a variable declared as <code>real</code> and vice-versa. Similarly, a variable declared as <code>matrix[3, 3]</code> may be assigned to a variable declared as <code>cov_matrix[3]</code> or <code>cholesky_factor_cov[3]</code>, and vice-versa.</p>
<p>Checks are carried out at the end of each relevant block of statements to ensure constraints are enforced. This includes run-time size checks. The Stan compiler isnâ€™t able to catch the fact that an attempt may be made to assign a matrix of one dimensionality to a matrix of mismatching dimensionality.</p>
</section>
<section id="promoting-real-to-complex-matrixes" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="promoting-real-to-complex-matrixes">Promoting real to complex matrixes</h3>
<p>Real-valued vectors, row vectors and matrices may be assigned to complex-valued vectors, row vectors and matrices, respectively. For example, the following is legal.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="dt">vector</span>[N] v = ...;</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="dt">complex_vector</span>[N] u = <span class="dv">2</span> * v;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Row vectors and matrices work the same way.</p>
</section>
<section id="expressions-as-size-declarations" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="expressions-as-size-declarations">Expressions as size declarations</h3>
<p>Variables may be declared with sizes given by expressions. Such expressions are constrained to only contain data or transformed data variables. This ensures that all sizes are determined once the data is read in and transformed data variables defined by their statements. For example, the following is legal.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> {</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">int</span>&lt;<span class="kw">lower</span>=<span class="dv">0</span>&gt; N_observed, N_missing;</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ...</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="kw">transformed parameters</span> {</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">vector</span>[N_observed + N_missing] y;</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="accessing-vector-and-matrix-elements" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="accessing-vector-and-matrix-elements">Accessing vector and matrix elements</h3>
<p>If <code>v</code> is a column vector or row vector, then <code>v[2]</code> is the second element in the vector. If <code>m</code> is a matrix, then <code>m[2, 3]</code> is the value in the second row and third column.</p>
<p>Providing a matrix with a single index returns the specified row. For instance, if <code>m</code> is a matrix, then <code>m[2]</code> is the second row. This allows Stan blocks such as</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="dt">matrix</span>[M, N] m;</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="dt">row_vector</span>[N] v;</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="dt">real</span> x;</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="co">// ...</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>v = m[<span class="dv">2</span>];</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>x = v[<span class="dv">3</span>];   <span class="co">// x == m[2][3] == m[2, 3]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The type of <code>m[2]</code> is <code>row_vector</code> because it is the second row of <code>m</code>. Thus it is possible to write <code>m[2][3]</code> instead of <code>m[2, 3]</code> to access the third element in the second row. When given a choice, the form <code>m[2, 3]</code> is preferred.</p>
<p>Complex versions work the same way,</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="dt">complex_matrix</span>[M, N] m = ...;</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="dt">complex_row_vector</span>[N] u = m[<span class="dv">3</span>];</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="dt">complex_vector</span>[M] v = m[ , <span class="dv">2</span>];</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="array-index-style" class="level4">
<h4 class="anchored" data-anchor-id="array-index-style">Array index style</h4>
<p>The form <code>m[2, 3]</code> is more efficient because it does not require the creation and use of an intermediate expression template for <code>m[2]</code>. In later versions, explicit calls to <code>m[2][3]</code> may be optimized to be as efficient as <code>m[2, 3]</code> by the Stan compiler.</p>
</section>
</section>
<section id="size-declaration-restrictions" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="size-declaration-restrictions">Size declaration restrictions</h3>
<p>An integer expression is used to pick out the sizes of vectors, matrices, and arrays. For instance, we can declare a vector of size <code>M + N</code> using</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="dt">vector</span>[M + N] y;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Any integer-denoting expression may be used for the size declaration, providing all variables involved are either data, transformed data, or local variables. That is, expressions used for size declarations may not include parameters or transformed parameters or generated quantities.</p>
</section>
</section>
<section id="array-data-types.section" class="level2">
<h2 class="anchored" data-anchor-id="array-data-types.section">Array data types</h2>
<p>Stan supports arrays of arbitrary dimension. The values in an array can be any type, so that arrays may contain values that are simple reals or integers, vectors, matrices, or other arrays. Arrays are the only way to store sequences of integers, and some functions in Stan, such as discrete distributions, require integer arguments.</p>
<p>A two-dimensional array is just an array of arrays, both conceptually and in terms of current implementation. When an index is supplied to an array, it returns the value at that index. When more than one index is supplied, this indexing operation is chained. For example, if <code>a</code> is a two-dimensional array, then <code>a[m, n]</code> is just a convenient shorthand for <code>a[m][n]</code>.</p>
<p>Vectors, matrices, and arrays are not assignable to one another, even if their dimensions are identical.</p>
<p>For constructing arrays in Stan, see <a href="../reference-manual/expressions.html#vector-matrix-array-expressions.section">Vector, Matrix, and Array Expressions</a>.</p>
<section id="declaring-array-variables" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="declaring-array-variables">Declaring array variables</h3>
<p>Arrays are declared with the keyword <code>array</code> followed by the dimensions enclosed in square brackets, the element type, and the name of the variable.</p>
<p>The variable <code>n</code> is declared as an array of five integers as follows.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span>[<span class="dv">5</span>] <span class="dt">int</span> n;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A two-dimensional array of complex values with three rows and four columns is declared as follows.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span>[<span class="dv">3</span>, <span class="dv">4</span>] <span class="dt">complex</span> a;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A three-dimensional array <code>z</code> of positive reals with five rows, four columns, and two shelves can be declared as follows.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span>[<span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">2</span>] <span class="dt">real</span>&lt;<span class="kw">lower</span>=<span class="dv">0</span>&gt; z;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Arrays may also be declared to contain vectors. For example,</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span>[<span class="dv">3</span>] <span class="dt">vector</span>[<span class="dv">7</span>] mu;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>declares <code>mu</code> to be an array of size 3 containing vectors with 7 elements. Arrays may also contain matrices. The example</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span>[<span class="dv">15</span>, <span class="dv">12</span>] <span class="dt">complex_matrix</span>[<span class="dv">7</span>, <span class="dv">2</span>] mu;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>declares a 15 by 12 array of <span class="math inline">\(7 \times 2\)</span> complex matrices. Any of the constrained types may also be used in arrays, as in the declaration</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span>[<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>] <span class="dt">cholesky_factor_cov</span>[<span class="dv">5</span>, <span class="dv">6</span>] mu;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>of a <span class="math inline">\(2 \times 3 \times 4\)</span> array of <span class="math inline">\(5 \times 6\)</span> Cholesky factors of covariance matrices.</p>
</section>
<section id="accessing-array-elements-and-subarrays" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="accessing-array-elements-and-subarrays">Accessing array elements and subarrays</h3>
<p>If <code>x</code> is a 1-dimensional array of length 5, then <code>x[1]</code> is the first element in the array and <code>x[5]</code> is the last. For a <span class="math inline">\(3
\times 4\)</span> array <code>y</code> of two dimensions, <code>y[1, 1]</code> is the first element and <code>y[3, 4]</code> the last element. For a three-dimensional array <code>z</code>, the first element is <code>z[1, 1, 1]</code>, and so on.</p>
<p>Subarrays of arrays may be accessed by providing fewer than the full number of indexes. For example, suppose <code>y</code> is a two-dimensional array with three rows and four columns. Then <code>y[3]</code> is one-dimensional array of length four. This means that <code>y[3][1]</code> may be used instead of <code>y[3, 1]</code> to access the value of the first column of the third row of <code>y</code>. The form <code>y[3, 1]</code> is the preferred form (see <a href="#array-index-style">note</a> in this chapter).</p>
</section>
<section id="assigning" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="assigning">Assigning</h3>
<p>Subarrays may be manipulated and assigned just like any other variables. Similar to the behavior of matrices, Stan allows blocks such as</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span>[<span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>] <span class="dt">real</span> w;</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span>[<span class="dv">10</span>, <span class="dv">11</span>] <span class="dt">real</span> x;</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span>[<span class="dv">11</span>] <span class="dt">real</span> y;</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="dt">real</span> z;</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="co">// ...</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>x = w[<span class="dv">5</span>];</span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>y = x[<span class="dv">4</span>];  <span class="co">// y == w[5][4] == w[5, 4]</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>z = y[<span class="dv">3</span>];  <span class="co">// z == w[5][4][3] == w[5, 4, 3]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Complex-valued arrays work the same way.</p>
</section>
<section id="arrays-of-matrices-and-vectors" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="arrays-of-matrices-and-vectors">Arrays of matrices and vectors</h3>
<p>Arrays of vectors and matrices are accessed in the same way as arrays of doubles. Consider the following vector and scalar declarations.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span>[<span class="dv">3</span>, <span class="dv">4</span>] <span class="dt">vector</span>[<span class="dv">5</span>] a;</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span>[<span class="dv">4</span>] <span class="dt">vector</span>[<span class="dv">5</span>] b;</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="dt">vector</span>[<span class="dv">5</span>] c;</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="dt">real</span> x;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>With these declarations, the following assignments are legal.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>b = a[<span class="dv">1</span>];       <span class="co">// result is array of vectors</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>c = a[<span class="dv">1</span>, <span class="dv">3</span>];    <span class="co">// result is vector</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>c = b[<span class="dv">3</span>];       <span class="co">//   same result as above</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>x = a[<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>]; <span class="co">// result is scalar</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>x = b[<span class="dv">3</span>, <span class="dv">5</span>];    <span class="co">//   same result as above</span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>x = c[<span class="dv">5</span>];       <span class="co">//   same result as above</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Row vectors and other derived vector types (simplex and ordered) behave the same way in terms of indexing.</p>
<p>Consider the following matrix, vector and scalar declarations.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span>[<span class="dv">3</span>, <span class="dv">4</span>] <span class="dt">matrix</span>[<span class="dv">6</span>, <span class="dv">5</span>] d;</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span>[<span class="dv">4</span>] <span class="dt">matrix</span>[<span class="dv">6</span>, <span class="dv">5</span>] e;</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="dt">matrix</span>[<span class="dv">6</span>, <span class="dv">5</span>] f;</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="dt">row_vector</span>[<span class="dv">5</span>] g;</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="dt">real</span> x;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>With these declarations, the following definitions are legal.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>e = d[<span class="dv">1</span>];           <span class="co">// result is array of matrices</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>f = d[<span class="dv">1</span>, <span class="dv">3</span>];        <span class="co">// result is matrix</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>f = e[<span class="dv">3</span>];           <span class="co">//   same result as above</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>g = d[<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">2</span>];     <span class="co">// result is row vector</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>g = e[<span class="dv">3</span>, <span class="dv">2</span>];        <span class="co">//   same result as above</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>g = f[<span class="dv">2</span>];           <span class="co">//   same result as above</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>x = d[<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">2</span>];  <span class="co">// result is scalar</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>x = e[<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">2</span>];     <span class="co">//   same result as above</span></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>x = f[<span class="dv">5</span>, <span class="dv">2</span>];        <span class="co">//   same result as above</span></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>x = g[<span class="dv">2</span>];           <span class="co">//   same result as above</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>As shown, the result <code>f[2]</code> of supplying a single index to a matrix is the indexed row, here row 2 of matrix <code>f</code>.</p>
</section>
<section id="partial-array-assignment" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="partial-array-assignment">Partial array assignment</h3>
<p>Subarrays of arrays may be assigned by indexing on the left-hand side of an assignment statement. For example, the following is legal.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span>[I, J, K] <span class="dt">real</span> x;</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span>[J, K] <span class="dt">real</span> y;</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span>[K] <span class="dt">real</span> z;</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="co">// ...</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">1</span>] = y;</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">1</span>, <span class="dv">1</span>] = z;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The sizes must match. Here, <code>x[1]</code> is a <code>J</code> by <code>K</code> array, as is <code>y</code>.</p>
<p>Partial array assignment also works for arrays of matrices, vectors, and row vectors.</p>
</section>
<section id="mixing-array-vector-and-matrix-types" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="mixing-array-vector-and-matrix-types">Mixing array, vector, and matrix types</h3>
<p>Arrays, row vectors, column vectors and matrices are not interchangeable in Stan. Thus a variable of any one of these fundamental types is not assignable to any of the others, nor may it be used as an argument where the other is required (use as arguments follows the assignment rules).</p>
<section id="mixing-vectors-and-arrays" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="mixing-vectors-and-arrays">Mixing vectors and arrays</h4>
<p>For example, vectors cannot be assigned to arrays or vice-versa.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span>[<span class="dv">4</span>] <span class="dt">real</span> a;</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="dt">vector</span>[<span class="dv">4</span>] b;</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="dt">row_vector</span>[<span class="dv">4</span>] c;</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="co">// ...</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>a = b; <span class="co">// illegal assignment of vector to array</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>b = a; <span class="co">// illegal assignment of array to vector</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>a = c; <span class="co">// illegal assignment of row vector to array</span></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>c = a; <span class="co">// illegal assignment of array to row vector</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="mixing-row-and-column-vectors" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="mixing-row-and-column-vectors">Mixing row and column vectors</h4>
<p>It is not even legal to assign row vectors to column vectors or vice versa.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="dt">vector</span>[<span class="dv">4</span>] b;</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="dt">row_vector</span>[<span class="dv">4</span>] c;</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="co">// ...</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>b = c; <span class="co">// illegal assignment of row vector to column vector</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>c = b; <span class="co">// illegal assignment of column vector to row vector</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="mixing-matrices-and-arrays" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="mixing-matrices-and-arrays">Mixing matrices and arrays</h4>
<p>The same holds for matrices, where 2-dimensional arrays may not be assigned to matrices or vice-versa.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span>[<span class="dv">3</span>, <span class="dv">4</span>] <span class="dt">real</span> a;</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="dt">matrix</span>[<span class="dv">3</span>, <span class="dv">4</span>] b;</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="co">// ...</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>a = b;  <span class="co">// illegal assignment of matrix to array</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>b = a;  <span class="co">// illegal assignment of array to matrix</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="mixing-matrices-and-vectors" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="mixing-matrices-and-vectors">Mixing matrices and vectors</h4>
<p>A <span class="math inline">\(1 \times N\)</span> matrix cannot be assigned a row vector or vice versa.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="dt">matrix</span>[<span class="dv">1</span>, <span class="dv">4</span>] a;</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="dt">row_vector</span>[<span class="dv">4</span>] b;</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="co">// ...</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>a = b;  <span class="co">// illegal assignment of row vector to matrix</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>b = a;  <span class="co">// illegal assignment of matrix to row vector</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Similarly, an <span class="math inline">\(M \times 1\)</span> matrix may not be assigned to a column vector.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="dt">matrix</span>[<span class="dv">4</span>, <span class="dv">1</span>] a;</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="dt">vector</span>[<span class="dv">4</span>] b;</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="co">// ...</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>a = b;  <span class="co">// illegal assignment of column vector to matrix</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>b = a;  <span class="co">// illegal assignment of matrix to column vector</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="size-declaration-restrictions-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="size-declaration-restrictions-1">Size declaration restrictions</h3>
<p>An integer expression is used to pick out the sizes of arrays. The same restrictions as for vector and matrix sizes apply, namely that the size is declared with an integer-denoting expression that does not contain any parameters, transformed parameters, or generated quantities.</p>
</section>
<section id="size-zero-arrays" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="size-zero-arrays">Size zero arrays</h3>
<p>If any of an arrayâ€™s dimensions is size zero, the entire array will be of size zero. That is, if we declare</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span>[<span class="dv">3</span>, <span class="dv">0</span>] <span class="dt">real</span> a;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>then the resulting size of <code>a</code> is zero and querying any of its dimensions at run time will result in the value zero. Declared as above, <code>a[1]</code> will be a size-zero one-dimensional array. For comparison, declaring</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span>[<span class="dv">0</span>, <span class="dv">3</span>] <span class="dt">real</span> b;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>also produces an array with an overall size of zero, but in this case, there is no way to index legally into <code>b</code>, because <code>b[0]</code> is undefined. The array will behave at run time as if itâ€™s a <span class="math inline">\(0 \times
0\)</span> array. For example, the result of <code>to_matrix(b)</code> will be a <span class="math inline">\(0 \times 0\)</span> matrix, not a <span class="math inline">\(0 \times 3\)</span> matrix.</p>
</section>
</section>
<section id="tuple-data-type" class="level2">
<h2 class="anchored" data-anchor-id="tuple-data-type">Tuple data type</h2>
<p>Stan supports tuples of arbitrary size. The values in a tuple can be of arbitrary type, but the component types must be declared along with the declaration of the tuple. Tuples can be manipulated as a whole, or their elements may be accessed and set individually.</p>
<section id="declaring-tuple-variables" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="declaring-tuple-variables">Declaring tuple variables</h3>
<p>Tuples are declared with the keyword <code>tuple</code> followed by a parenthesized sequence of types, which determine the types of the respective tuple entries. For example, a tuple with three elements may be declared as</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="dt">tuple</span>(<span class="dt">int</span>, <span class="dt">vector</span>[<span class="dv">3</span>], <span class="dt">complex</span>) abc;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Tuples must have at least two entries, so the following declarations are illegal.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="dt">tuple</span>() nil;  <span class="co">// ILLEGAL</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="dt">tuple</span>(<span class="dt">int</span>) n;  <span class="co">// ILLEGAL</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Tuples can be assigned as a whole if their elements can be assigned individually. For example, <code>a</code> can be assigned to <code>b</code> in the following example because <code>int</code> can be promoted to <code>complex</code>.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="dt">tuple</span>(<span class="dt">int</span>, <span class="dt">real</span>) a;</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="dt">tuple</span>(<span class="dt">complex</span>, <span class="dt">real</span>) b = a;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Tuple types may have elements which are declared as tuples, such as the following example.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="dt">tuple</span>(<span class="dt">int</span>, <span class="dt">tuple</span>(<span class="dt">real</span>, <span class="dt">complex</span>)) x;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this case, it would probably be simpler to use a 3-tuple type, <code>tuple(int, real, complex)</code>.</p>
<p>Tuples can be declared with constraints anywhere that ordinary variables can (i.e., as top-level block variables). That means any context in which it is legal to have a declaration</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="dt">real</span>&lt;<span class="kw">lower</span>=<span class="dv">0</span>&gt; sigma;</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="dt">real</span>&lt;<span class="kw">lower</span>=<span class="dv">0</span>, <span class="kw">upper</span>=<span class="dv">1</span>&gt; theta;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>it is legal to have a tuple with constraints such as</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="dt">tuple</span>(<span class="dt">real</span>&lt;<span class="kw">lower</span>=<span class="dv">0</span>&gt;, <span class="dt">real</span>&lt;<span class="kw">lower</span>=<span class="dv">0</span>, <span class="kw">upper</span>=<span class="dv">1</span>&gt;) sigma_theta;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="accessing-tuple-elements" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="accessing-tuple-elements">Accessing tuple elements</h3>
<p>Tuple elements may be accessed directly. For example, with our declaration of <code>abc</code> from the last section, Stan uses <code>abc.1</code> for the first element, <code>abc.2</code> for the second, and <code>abc.3</code> for the third. These numbers must be integer literals (i.e., they cannot be variables), and must be within the size of the number of elements of tuples. The types of elements are as declared, so that <code>abc.1</code> is of type <code>int</code>, <code>abc.2</code> of type <code>vector[3]</code> and <code>abc.3</code> of type <code>complex</code>.</p>
</section>
<section id="assigning-tuple-elements" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="assigning-tuple-elements">Assigning tuple elements</h3>
<p>Tuple elements can be assigned individually, allowing, e.g.,</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="dt">tuple</span>(<span class="dt">int</span>, <span class="dt">real</span>) ab;</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>ab<span class="fl">.1</span> = <span class="dv">123</span>;</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>ab<span class="fl">.2</span> = <span class="fl">12.9</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>As with other assignments, promotions will happen if necessary (of <code>int</code> to <code>real</code> and of <code>real</code> to <code>complex</code>, along with the corresponding container type promotions).</p>
</section>
<section id="unpacking-assignment-of-tuples" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="unpacking-assignment-of-tuples">Unpacking assignment of tuples</h3>
<p>For convenience of using values stored in tuples, Stan supports â€œunpackingâ€ (or â€œdestructuringâ€) of tuples in an assignment statement.</p>
<p>Given a tuple <code>t</code> of type <code>tuple(T1, ..., Tn)</code> and a sequence of <a href="#rhs-expressions">assignable expressions</a> of types <code>v1</code>, â€¦, <code>vn</code>, where each <code>vi</code> has a <a href="../reference-manual/statements.html#promotion">type which is assignable</a> from type <code>Ti</code>, individual elements of the tuple may be assigned to the corresponding variables in the sequence by the statement</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>(v1, <span class="co">/*...*/</span>, vn) = t;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that the above parenthesis are required, unlike in some other languages with similar features (e.g., Python).</p>
<p>These unpacking assignments can be nested if the tuple on the right hand side contains nested tuples.</p>
<p>For example, if <code>T</code> is a tuple of type <code>tuple(int, (real, real), complex)</code>, then the program</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> i;</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="dt">real</span> x, y;</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="dt">complex</span> z;</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>(i, (x, y), z) = T;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Assigns the result of <code>T.1</code> to <code>i</code>, the result of <code>T.2.1</code> to <code>x</code>, the result of <code>T.2.2</code> to <code>y</code>, and the result of <code>T.3</code> to <code>z</code>.</p>
<p>The left hand side must match in size the tuple on the right. Additionally, the same variable may not appear more than once in the left hand side of an unpacking assignment.</p>
</section>
</section>
<section id="variable-types-vs.-constraints-and-sizes" class="level2">
<h2 class="anchored" data-anchor-id="variable-types-vs.-constraints-and-sizes">Variable types vs.&nbsp;constraints and sizes</h2>
<p>The type information associated with a variable only contains the underlying type and dimensionality of the variable.</p>
<section id="type-information-excludes-sizes" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="type-information-excludes-sizes">Type information excludes sizes</h3>
<p>The size associated with a given variable is not part of its data type. For example, declaring a variable using</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span>[<span class="dv">3</span>] <span class="dt">real</span> a;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>declares the variable <code>a</code> to be an array. The fact that it was declared to have size 3 is part of its declaration, but not part of its underlying type.</p>
<section id="when-are-sizes-checked" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="when-are-sizes-checked">When are sizes checked?</h4>
<p>Sizes are determined dynamically (at run time) and thus cannot be type-checked statically when the program is compiled. As a result, any conformance error on size will raise a run-time error. For example, trying to assign an array of size 5 to an array of size 6 will cause a run-time error. Similarly, multiplying an <span class="math inline">\(N
\times M\)</span> by a <span class="math inline">\(J \times K\)</span> matrix will raise a run-time error if <span class="math inline">\(M
\neq J\)</span>.</p>
</section>
</section>
<section id="type-information-excludes-constraints" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="type-information-excludes-constraints">Type information excludes constraints</h3>
<p>Like sizes, constraints are not treated as part of a variableâ€™s type in Stan when it comes to the compile-time check of operations it may participate in. Anywhere Stan accepts a matrix as an argument, it will syntactically accept a correlation matrix or covariance matrix or Cholesky factor. Thus a covariance matrix may be assigned to a matrix and vice-versa.</p>
<p>Similarly, a bounded real may be assigned to an unconstrained real and vice-versa.</p>
<section id="when-are-function-argument-constraints-checked" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="when-are-function-argument-constraints-checked">When are function argument constraints checked?</h4>
<p>For arguments to functions, constraints are sometimes, but not always checked when the function is called. Exclusions include C++ standard library functions. All probability functions and cumulative distribution functions check that their arguments are appropriate at run time as the function is called.</p>
</section>
<section id="when-are-declared-variable-constraints-checked" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="when-are-declared-variable-constraints-checked">When are declared variable constraints checked?</h4>
<p>For data variables, constraints are checked after the variable is read from a data file or other source. For transformed data variables, the check is done after the statements in the transformed data block have executed. Thus it is legal for intermediate values of variables to not satisfy declared constraints.</p>
<p>For parameters, constraints are enforced by the transform applied and do not need to be checked. For transformed parameters, the check is done after the statements in the transformed parameter block have executed.</p>
<p>For all blocks defining variables (transformed data, transformed parameters, generated quantities), real values are initialized to <code>NaN</code> and integer values are initialized to the smallest legal integer (i.e., a large absolute value negative number).</p>
<p>For generated quantities, constraints are enforced after the statements in the generated quantities block have executed.</p>
</section>
</section>
<section id="type-naming-notation" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="type-naming-notation">Type naming notation</h3>
<p>In order to refer to data types, it is convenient to have a way to refer to them. The type naming notation outlined in this section is not part of the Stan programming language, but rather a convention adopted in this document to enable a concise description of a type.</p>
<p>Because size information is not part of a data type, data types will be written without size information. For instance, <code>array[] real</code> is the type of one-dimensional array of reals and <code>matrix</code> is the type of matrices. The three-dimensional integer array type is written as <code>array[,,] int</code>, indicating the number slots available for indexing. Similarly, <code>array[,] vector</code> is the type of a two-dimensional array of vectors.</p>
</section>
</section>
<section id="variable-declaration" class="level2">
<h2 class="anchored" data-anchor-id="variable-declaration">Variable declaration</h2>
<p>Variables in Stan are declared by giving a type and a name. For example</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> N;</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="dt">vector</span>[N] y;</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span>[<span class="dv">5</span>] <span class="dt">matrix</span>[<span class="dv">3</span>, <span class="dv">4</span>] A;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>declares a variable <code>N</code> that is an integer, a variable <code>y</code> that is a vector of length <code>N</code> (the previously declared variable), and a variable <code>A</code>, which is a length-5 array where each element is a 3 by 4 matrix.</p>
<p>There are several different places a variable is declared in Stan. They are block variables, like those inside <code>data</code>, which can have <a href="#constrained-data-types">constraints</a> and must include sizes for their types, like in the above examples. Local variables, like those defined inside loops or local blocks cannot be constrained, but still include sizes. Finally, variables declared as <a href="../reference-manual/user-functions.html#argument-types-and-qualifiers">function parameters</a> are not constrained types and <em>exclude</em> sizes.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co">// valid block variables, but not locals or function parameters</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="dt">vector</span>&lt;<span class="kw">lower</span>=<span class="dv">0</span>&gt;[N] u;</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a><span class="co">// valid as a block or local variable, but not a function parameter</span></span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a><span class="dt">array</span>[<span class="dv">3</span>] <span class="dt">int</span> is;</span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a><span class="co">// function parameters exclude sizes and cannot be constrained</span></span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> pretty_print_tri_lower(<span class="dt">matrix</span> x) { ... }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In the following table, the leftmost column is a list of the unconstrained and undimensioned basic types; these are used as function return types and argument types. The middle column is of unconstrained types with dimensions; these are used as local variable types. The variables <code>M</code> and <code>N</code> indicate number of columns and rows, respectively. The variable <code>K</code> is used for square matrices, i.e., <code>K</code> denotes both the number of rows and columns. The rightmost column lists the corresponding constrained types. An expression of any right-hand column type may be assigned to its corresponding left-hand column basic type. At runtime, dimensions are checked for consistency for all variables; containers of any sizes may be assigned to function arguments. The constrained matrix types <code>cov_matrix[K]</code>, <code>corr_matrix[K]</code>, <code>cholesky_factor_cov[K]</code>, and <code>cholesky_factor_corr[K]</code> are only assignable to matrices of dimensions <code>matrix[K, K]</code> types.</p>
<table class="table">
<colgroup>
<col style="width: 22%">
<col style="width: 27%">
<col style="width: 48%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Function Argument (unsized)</th>
<th style="text-align: left;"><pre><code>   Local</code></pre>
<p>(unconstrained)</p></th>
<th style="text-align: left;"><pre><code>              Block
          (constrained)</code></pre></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>int</code></td>
<td style="text-align: left;"><code>int</code></td>
<td style="text-align: left;"><code>int</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>int&lt;lower=L&gt;</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>int&lt;upper=U&gt;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>int&lt;lower=L, upper=U&gt;</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>int&lt;offset=O&gt;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>int&lt;multiplier=M&gt;</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>int&lt;offset=O, multiplier=M&gt;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>real</code></td>
<td style="text-align: left;"><code>real</code></td>
<td style="text-align: left;"><code>real</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>real&lt;lower=L&gt;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>real&lt;upper=U&gt;</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>real&lt;lower=L, upper=U&gt;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>real&lt;offset=O&gt;</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>real&lt;multiplier=M&gt;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>real&lt;offset=O, multiplier=M&gt;</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>complex</code></td>
<td style="text-align: left;"><code>complex</code></td>
<td style="text-align: left;"><code>complex</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>vector</code></td>
<td style="text-align: left;"><code>vector[N]</code></td>
<td style="text-align: left;"><code>vector[N]</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>vector[N]&lt;lower=L&gt;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>vector[N]&lt;upper=U&gt;</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>vector[N]&lt;lower=L, upper=U&gt;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>vector[N]&lt;offset=O&gt;</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>vector[N]&lt;multiplier=M&gt;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>vector[N]&lt;offset=O, multiplier=M&gt;</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>ordered[N]</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>positive_ordered[N]</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>simplex[N]</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>unit_vector[N]</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>row_vector</code></td>
<td style="text-align: left;"><code>row_vector[N]</code></td>
<td style="text-align: left;"><code>row_vector[N]</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>row_vector[N]&lt;lower=L&gt;</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>row_vector[N]&lt;upper=U&gt;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>row_vector[N]&lt;lower=L, upper=U&gt;</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>row_vector[N]&lt;offset=O&gt;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>row_vector[N]&lt;multiplier=M&gt;</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>row_vector[N]&lt;offset=O, multiplier=M&gt;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>matrix</code></td>
<td style="text-align: left;"><code>matrix[M, N]</code></td>
<td style="text-align: left;"><code>matrix[M, N]</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>matrix[M, N]&lt;lower=L&gt;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>matrix[M, N]&lt;upper=U&gt;</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>matrix[M, N]&lt;lower=L, uppers=U&gt;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>matrix[M, N]&lt;offset=O&gt;</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>matrix[M, N]&lt;multiplier=M&gt;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>matrix[M, N]&lt;offset=O, multiplier=M&gt;</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>matrix[K, K]</code></td>
<td style="text-align: left;"><code>corr_matrix[K]</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>matrix[K, K]</code></td>
<td style="text-align: left;"><code>cov_matrix[K]</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>matrix[K, K]</code></td>
<td style="text-align: left;"><code>cholesky_factor_corr[K]</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>matrix[K, K]</code></td>
<td style="text-align: left;"><code>cholesky_factor_cov[K]</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>complex_vector</code></td>
<td style="text-align: left;"><code>complex_vector[M]</code></td>
<td style="text-align: left;"><code>complex_vector[M]</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>complex_row_vector</code></td>
<td style="text-align: left;"><code>complex_row_vector[N]</code></td>
<td style="text-align: left;"><code>complex_row_vector[N]</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>complex_matrix</code></td>
<td style="text-align: left;"><code>complex_matrix[M, N]</code></td>
<td style="text-align: left;"><code>complex_matrix[M,N]</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>array[] vector</code></td>
<td style="text-align: left;"><code>array[M] vector[N]</code></td>
<td style="text-align: left;"><code>array[M] vector[N]</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>array[M] vector[N]&lt;lower=L&gt;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>array[M] vector[N]&lt;upper=U&gt;</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>array[M] vector[N]&lt;lower=L, upper=U&gt;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>array[M] vector[N]&lt;offset=O&gt;</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>array[M] vector[N]&lt;multiplier=M&gt;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>array[M] vector[N]&lt;offset=O, multiplier=M&gt;</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>array[M] ordered[N]</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>array[M] positive_ordered[N]</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>array[M] simplex[N]</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>array[M] unit_vector[N]</code></td>
</tr>
</tbody>
</table>
<p><a name="id:constrained-types.figure"></a></p>
<p>Additional array types follow the same basic template as the final example in the table and can contain any of the previous types. The unsized version of arrays with more than one dimension is specified by using commas, e.g.&nbsp;<code>array[ , ]</code> is a 2-D array.</p>
<p>For more on how function arguments and return types are declared, consult the <a href="https://mc-stan.org/docs/stan-users-guide/user-functions.html#basic-functions.section#type-declarations-for-functions">Userâ€™s Guide chapter on functions</a>.</p>
</section>
<section id="compound-variable-declaration-and-definition" class="level2">
<h2 class="anchored" data-anchor-id="compound-variable-declaration-and-definition">Compound variable declaration and definition</h2>
<p>Stan allows assignable variables to be declared and defined in a single statement. Assignable variables are</p>
<ul>
<li>local variables, and</li>
<li>variables declared in the transformed data, transformed parameters, or generated quantities blocks.</li>
</ul>
<p>For example, the statement</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> N = <span class="dv">5</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>declares the variable <code>N</code> to be an integer scalar type and at the same time defines it to be the value of the expression <code>5</code>.</p>
<section id="assignment-typing" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="assignment-typing">Assignment typing</h3>
<p>The type of the expression on the right-hand side of the assignment must be assignable to the type of the variable being declared. For example, it is legal to have</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="dt">real</span> sum = <span class="dv">0</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>even though <code>0</code> is of type <code>int</code> and <code>sum</code> is of type <code>real</code>, because integer-typed scalar expressions can be assigned to real-valued scalar variables. In all other cases, the type of the expression on the right-hand side of the assignment must be identical to the type of the variable being declared.</p>
<p>Variables of any type may have values assigned to them. For example,</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="dt">matrix</span>[<span class="dv">3</span>, <span class="dv">2</span>] a = b;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>declares a <span class="math inline">\(3 \times 2\)</span> matrix variable <code>a</code> and assigns a copy of the value of <code>b</code> to the variable <code>a</code>. The variable <code>b</code> must be of type <code>matrix</code> for the statement to be well formed. For the code to execute successfully, <code>b</code> must be the same shape as <code>a</code>, but this cannot be validated until run time. Because a copy is assigned, subsequent changes to <code>a</code> do not affect <code>b</code> and subsequent changes to <code>b</code> do not affect <code>a</code>.</p>
</section>
<section id="rhs-expressions" class="level3">
<h3 class="anchored" data-anchor-id="rhs-expressions">Right-hand side expressions</h3>
<p>The right-hand side may be any expression which has a type which is assignable to the variable being declared. For example,</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="dt">matrix</span>[<span class="dv">3</span>, <span class="dv">2</span>] a = <span class="fl">0.5</span> * (b + c);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>assigns the matrix variable <code>a</code> to half of the sum of <code>b</code> and <code>c</code>. The only requirement on <code>b</code> and <code>c</code> is that the expression <code>b + c</code> be of type <code>matrix</code>. For example, <code>b</code> could be of type <code>matrix</code> and <code>c</code> of type <code>real</code>, because adding a matrix to a scalar produces a matrix, and the multiplying by a scalar produces another matrix.</p>
<p>Similarly,</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="dt">complex</span> z = <span class="dv">2</span> + <span class="fl">3i</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>assigns the the complex number <span class="math inline">\(2 + 3i\)</span> to the complex scalar <code>z</code>. The right-hand side expression can be a call to a user defined function, allowing general algorithms to be applied that might not be otherwise expressible as simple expressions (e.g., iterative or recursive algorithms).</p>
</section>
<section id="scope-within-expressions" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="scope-within-expressions">Scope within expressions</h3>
<p>Any variable that is in scope and any function that is available in the block in which the compound declaration and definition appears may be used in the expression on the right-hand side of the compound declaration and definition statement.</p>
</section>
</section>
<section id="declaring-multiple-variables-at-once" class="level2">
<h2 class="anchored" data-anchor-id="declaring-multiple-variables-at-once">Declaring multiple variables at once</h2>
<p>Stan will interpret multiple comma-separated variable names following a single type as declaring multiple new variables. This is available for all variable declarations in all blocks.</p>
<section id="types-for-multiple-declarations" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="types-for-multiple-declarations">Types for multiple declarations</h3>
<p>The code:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="dt">real</span> x, y;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>is equivalent to</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="dt">real</span> x;</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="dt">real</span> y;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>As a result, all declarations on the same line must be of the same type.</p>
</section>
<section id="combining-with-other-features" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="combining-with-other-features">Combining with other features</h3>
<p>The ability to declare multiple variables can be combined with assignments whenever a declare-define is valid, as documented in <a href="#compound-variable-declaration-and-definition">the section introducing compound declarations and definitions</a> :</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="dt">real</span> x = <span class="dv">3</span>, y = <span class="fl">5.6</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><a href="#constrained-data-types">Constrained data types</a> can also be declared together, so long as the constraint for each variable is the same:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode stan code-with-copy"><code class="sourceCode stan"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="dt">real</span>&lt;<span class="kw">lower</span>=<span class="dv">0</span>&gt; x, y;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>


</section>
</section>
</section>


<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Stan compiles integers to <code>int</code> and reals to <code>double</code> types in C++. Precise details of rounding will depend on the compiler and hardware architecture on which the code is run.<a href="#fnref1" class="footnote-back" role="doc-backlink">â†©ï¸Ž</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../reference-manual/whitespace.html" class="pagination-link" aria-label="Whitespace">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Whitespace</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../reference-manual/expressions.html" class="pagination-link" aria-label="Expressions">
        <span class="nav-page-text">Expressions</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/stan-dev/docs/edit/master/src/reference-manual/types.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/stan-dev/docs/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>