<!DOCTYPE html>
<html lang="" xml:lang="">
<head>
<link rel="canonical" href="https://mc-stan.org/docs/cmdstan-guide/installation.html" />
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1 CmdStan Installation | CmdStan User’s Guide</title>
  <meta name="description" content="CmdStan user’s guide." />
  <meta name="generator" content="bookdown 0.23 and GitBook 2.6.7" />

  <meta property="og:title" content="1 CmdStan Installation | CmdStan User’s Guide" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="/img/logo-tm.pdf" />
  <meta property="og:description" content="CmdStan user’s guide." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1 CmdStan Installation | CmdStan User’s Guide" />
  
  <meta name="twitter:description" content="CmdStan user’s guide." />
  <meta name="twitter:image" content="/img/logo-tm.pdf" />

<meta name="author" content="Stan Development Team" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="quickstart-guide.html"/>
<link rel="next" href="example-model-and-data.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="stan-manual.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li style="font-size:110%; font-weight:400; font-family: Verdana, Helvetica, sans; line-height:1.4; margin: 0.5em 0 0 1em"><a href="https://mc-stan.org/docs/cmdstan-guide/index.html" style="color:#4183C4">CmdStan User's Guide</a></li>

<li class="divider"></li>
<li><a href="index.html#introduction"><i style='font-size: 110%; color:#990017;'>Introduction</i></a></li>
<li><a href="quickstart-guide.html#quickstart-guide"><i style='font-size: 110%; color:#990017;'>QuickStart Guide</i></a></li>
<li class="chapter" data-level="1" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html"><i class="fa fa-check"></i><b>1</b> CmdStan Installation</a>
<ul>
<li class="chapter" data-level="1.1" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html#conda-install"><i class="fa fa-check"></i><b>1.1</b> Installation via <code>conda</code></a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html#cmdstan-install-location-under-conda"><i class="fa fa-check"></i><b>1.1.1</b> CmdStan install location under conda</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html#installation-from-github"><i class="fa fa-check"></i><b>1.2</b> Installation from GitHub</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html#downloading-the-source-code"><i class="fa fa-check"></i><b>1.2.1</b> Downloading the source code</a></li>
<li class="chapter" data-level="1.2.2" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html#building-cmdstan"><i class="fa fa-check"></i><b>1.2.2</b> Building CmdStan</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html#checking-the-stan-compiler"><i class="fa fa-check"></i><b>1.3</b> Checking the Stan compiler</a></li>
<li class="chapter" data-level="1.4" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html#troubleshooting-the-installation"><i class="fa fa-check"></i><b>1.4</b> Troubleshooting the installation</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html#common-problems"><i class="fa fa-check"></i><b>1.4.1</b> Common problems</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html#cpp-toolchain"><i class="fa fa-check"></i><b>1.5</b> C++ Toolchain</a></li>
<li class="chapter" data-level="1.6" data-path="cmdstan-installation.html"><a href="cmdstan-installation.html#gnu-make"><i class="fa fa-check"></i><b>1.6</b> Using GNU Make</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="example-model-and-data.html"><a href="example-model-and-data.html"><i class="fa fa-check"></i><b>2</b> Example Model and Data</a></li>
<li class="chapter" data-level="3" data-path="compiling-a-stan-program.html"><a href="compiling-a-stan-program.html"><i class="fa fa-check"></i><b>3</b> Compiling a Stan Program</a>
<ul>
<li class="chapter" data-level="3.1" data-path="compiling-a-stan-program.html"><a href="compiling-a-stan-program.html#invoking-the-make-utility"><i class="fa fa-check"></i><b>3.1</b> Invoking the Make utility</a></li>
<li class="chapter" data-level="3.2" data-path="compiling-a-stan-program.html"><a href="compiling-a-stan-program.html#dependencies"><i class="fa fa-check"></i><b>3.2</b> Dependencies</a></li>
<li class="chapter" data-level="3.3" data-path="compiling-a-stan-program.html"><a href="compiling-a-stan-program.html#compiler-errors"><i class="fa fa-check"></i><b>3.3</b> Compiler errors</a></li>
<li class="chapter" data-level="3.4" data-path="compiling-a-stan-program.html"><a href="compiling-a-stan-program.html#troubleshooting-c-compiler-or-linker-errors"><i class="fa fa-check"></i><b>3.4</b> Troubleshooting C++ compiler or linker errors</a></li>
<li class="chapter" data-level="3.5" data-path="compiling-a-stan-program.html"><a href="compiling-a-stan-program.html#c-compilation-and-linking-flags"><i class="fa fa-check"></i><b>3.5</b> C++ compilation and linking flags</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="compiling-a-stan-program.html"><a href="compiling-a-stan-program.html#optimizing-by-ignoring-range-checks"><i class="fa fa-check"></i><b>3.5.1</b> Optimizing by ignoring range checks</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="mcmc-intro.html"><a href="mcmc-intro.html"><i class="fa fa-check"></i><b>4</b> MCMC Sampling</a>
<ul>
<li class="chapter" data-level="4.1" data-path="mcmc-intro.html"><a href="mcmc-intro.html#running-the-sampler"><i class="fa fa-check"></i><b>4.1</b> Running the sampler</a></li>
<li class="chapter" data-level="4.2" data-path="mcmc-intro.html"><a href="mcmc-intro.html#multi-chain-sampling"><i class="fa fa-check"></i><b>4.2</b> Running multiple chains</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="mcmc-intro.html"><a href="mcmc-intro.html#using-the-num_chains-argument-to-run-multiple-chains"><i class="fa fa-check"></i><b>4.2.1</b> Using the num_chains argument to run multiple chains</a></li>
<li class="chapter" data-level="4.2.2" data-path="mcmc-intro.html"><a href="mcmc-intro.html#using-shell-for-running-multiple-chains"><i class="fa fa-check"></i><b>4.2.2</b> Using shell for running multiple chains</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="mcmc-intro.html"><a href="mcmc-intro.html#mcmc_output_csv"><i class="fa fa-check"></i><b>4.3</b> Stan CSV output file</a></li>
<li class="chapter" data-level="4.4" data-path="mcmc-intro.html"><a href="mcmc-intro.html#summarizing-sampler-outputs-with-stansummary"><i class="fa fa-check"></i><b>4.4</b> Summarizing sampler output(s) with <code>stansummary</code></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="optimization.html"><a href="optimization.html"><i class="fa fa-check"></i><b>5</b> Optimization</a></li>
<li class="chapter" data-level="6" data-path="variational-inference.html"><a href="variational-inference.html"><i class="fa fa-check"></i><b>6</b> Variational Inference</a></li>
<li class="chapter" data-level="7" data-path="gc-intro.html"><a href="gc-intro.html"><i class="fa fa-check"></i><b>7</b> Generating Quantities of Interest from a Fitted Model</a></li>
<li><a href="reference-manual.html#reference-manual"><i style='font-size: 110%; color:#990017;'>Reference Manual</i></a></li>
<li class="chapter" data-level="8" data-path="command-line-interface-overview.html"><a href="command-line-interface-overview.html"><i class="fa fa-check"></i><b>8</b> Command-Line Interface Overview</a>
<ul>
<li class="chapter" data-level="8.1" data-path="command-line-interface-overview.html"><a href="command-line-interface-overview.html#input-data-argument"><i class="fa fa-check"></i><b>8.1</b> Input data argument</a></li>
<li class="chapter" data-level="8.2" data-path="command-line-interface-overview.html"><a href="command-line-interface-overview.html#output-control-arguments"><i class="fa fa-check"></i><b>8.2</b> Output control arguments</a></li>
<li class="chapter" data-level="8.3" data-path="command-line-interface-overview.html"><a href="command-line-interface-overview.html#initialize-model-parameters-argument"><i class="fa fa-check"></i><b>8.3</b> Initialize model parameters argument</a></li>
<li class="chapter" data-level="8.4" data-path="command-line-interface-overview.html"><a href="command-line-interface-overview.html#random-number-generator-arguments"><i class="fa fa-check"></i><b>8.4</b> Random number generator arguments</a></li>
<li class="chapter" data-level="8.5" data-path="command-line-interface-overview.html"><a href="command-line-interface-overview.html#chain-identifier-argument-id"><i class="fa fa-check"></i><b>8.5</b> Chain identifier argument: <code>id</code></a></li>
<li class="chapter" data-level="8.6" data-path="command-line-interface-overview.html"><a href="command-line-interface-overview.html#command-line-help"><i class="fa fa-check"></i><b>8.6</b> Command line help</a></li>
<li class="chapter" data-level="8.7" data-path="command-line-interface-overview.html"><a href="command-line-interface-overview.html#error-messages-and-return-codes"><i class="fa fa-check"></i><b>8.7</b> Error messages and return codes</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="mcmc-config.html"><a href="mcmc-config.html"><i class="fa fa-check"></i><b>9</b> MCMC Sampling using Hamiltonian Monte Carlo</a>
<ul>
<li class="chapter" data-level="9.1" data-path="mcmc-config.html"><a href="mcmc-config.html#iterations"><i class="fa fa-check"></i><b>9.1</b> Iterations</a></li>
<li class="chapter" data-level="9.2" data-path="mcmc-config.html"><a href="mcmc-config.html#adaptation"><i class="fa fa-check"></i><b>9.2</b> Adaptation</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="mcmc-config.html"><a href="mcmc-config.html#step-size-optimization-configuration"><i class="fa fa-check"></i><b>9.2.1</b> Step size optimization configuration</a></li>
<li class="chapter" data-level="9.2.2" data-path="mcmc-config.html"><a href="mcmc-config.html#warmup-schedule-configuration"><i class="fa fa-check"></i><b>9.2.2</b> Warmup schedule configuration</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="mcmc-config.html"><a href="mcmc-config.html#algorithm"><i class="fa fa-check"></i><b>9.3</b> Algorithm</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="mcmc-config.html"><a href="mcmc-config.html#samples-from-a-set-of-fixed-parameters"><i class="fa fa-check"></i><b>9.3.1</b> Samples from a set of fixed parameters</a></li>
<li class="chapter" data-level="9.3.2" data-path="mcmc-config.html"><a href="mcmc-config.html#hmc-samplers"><i class="fa fa-check"></i><b>9.3.2</b> HMC samplers</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="mcmc-config.html"><a href="mcmc-config.html#sampler-diag-file"><i class="fa fa-check"></i><b>9.4</b> Sampler diagnostic file</a></li>
<li class="chapter" data-level="9.5" data-path="mcmc-config.html"><a href="mcmc-config.html#examples"><i class="fa fa-check"></i><b>9.5</b> Examples</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="mcmc-config.html"><a href="mcmc-config.html#running-multiple-chains-with-a-specified-rng-seed"><i class="fa fa-check"></i><b>9.5.1</b> Running multiple chains with a specified RNG seed</a></li>
<li class="chapter" data-level="9.5.2" data-path="mcmc-config.html"><a href="mcmc-config.html#changing-the-default-warmup-and-sampling-iterations"><i class="fa fa-check"></i><b>9.5.2</b> Changing the default warmup and sampling iterations</a></li>
<li class="chapter" data-level="9.5.3" data-path="mcmc-config.html"><a href="mcmc-config.html#saving-warmup-draws"><i class="fa fa-check"></i><b>9.5.3</b> Saving warmup draws</a></li>
<li class="chapter" data-level="9.5.4" data-path="mcmc-config.html"><a href="mcmc-config.html#initializing-parameters"><i class="fa fa-check"></i><b>9.5.4</b> Initializing parameters</a></li>
<li class="chapter" data-level="9.5.5" data-path="mcmc-config.html"><a href="mcmc-config.html#specifying-the-metric-and-stepsize"><i class="fa fa-check"></i><b>9.5.5</b> Specifying the metric and stepsize</a></li>
<li class="chapter" data-level="9.5.6" data-path="mcmc-config.html"><a href="mcmc-config.html#changing-the-nuts-hmc-adaptation-parameters"><i class="fa fa-check"></i><b>9.5.6</b> Changing the NUTS-HMC adaptation parameters</a></li>
<li class="chapter" data-level="9.5.7" data-path="mcmc-config.html"><a href="mcmc-config.html#increasing-the-tree-depth"><i class="fa fa-check"></i><b>9.5.7</b> Increasing the tree-depth</a></li>
<li class="chapter" data-level="9.5.8" data-path="mcmc-config.html"><a href="mcmc-config.html#capturing-hamiltonian-diagnostics-and-gradients"><i class="fa fa-check"></i><b>9.5.8</b> Capturing Hamiltonian diagnostics and gradients</a></li>
<li class="chapter" data-level="9.5.9" data-path="mcmc-config.html"><a href="mcmc-config.html#suppressing-progress-updates-to-the-console"><i class="fa fa-check"></i><b>9.5.9</b> Suppressing progress updates to the console</a></li>
<li class="chapter" data-level="9.5.10" data-path="mcmc-config.html"><a href="mcmc-config.html#everything-example"><i class="fa fa-check"></i><b>9.5.10</b> Everything example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="maximum-likelihood-estimation.html"><a href="maximum-likelihood-estimation.html"><i class="fa fa-check"></i><b>10</b> Maximum Likelihood Estimation</a>
<ul>
<li class="chapter" data-level="10.1" data-path="maximum-likelihood-estimation.html"><a href="maximum-likelihood-estimation.html#optimization-algorithms"><i class="fa fa-check"></i><b>10.1</b> Optimization algorithms</a></li>
<li class="chapter" data-level="10.2" data-path="maximum-likelihood-estimation.html"><a href="maximum-likelihood-estimation.html#the-quasi-newton-optimizers"><i class="fa fa-check"></i><b>10.2</b> The quasi-Newton optimizers</a></li>
<li class="chapter" data-level="10.3" data-path="maximum-likelihood-estimation.html"><a href="maximum-likelihood-estimation.html#the-newton-optimizer"><i class="fa fa-check"></i><b>10.3</b> The Newton optimizer</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="variational-inference-algorithm-advi.html"><a href="variational-inference-algorithm-advi.html"><i class="fa fa-check"></i><b>11</b> Variational Inference Algorithm: ADVI</a>
<ul>
<li class="chapter" data-level="11.1" data-path="variational-inference-algorithm-advi.html"><a href="variational-inference-algorithm-advi.html#variational-algorithms"><i class="fa fa-check"></i><b>11.1</b> Variational algorithms</a></li>
<li class="chapter" data-level="11.2" data-path="variational-inference-algorithm-advi.html"><a href="variational-inference-algorithm-advi.html#configuration"><i class="fa fa-check"></i><b>11.2</b> Configuration</a></li>
<li class="chapter" data-level="11.3" data-path="variational-inference-algorithm-advi.html"><a href="variational-inference-algorithm-advi.html#csv-output"><i class="fa fa-check"></i><b>11.3</b> CSV output</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="standalone-generate-quantities.html"><a href="standalone-generate-quantities.html"><i class="fa fa-check"></i><b>12</b> Standalone Generate Quantities</a></li>
<li class="chapter" data-level="13" data-path="extracting-log-probabilities-and-gradients-for-diagnostics.html"><a href="extracting-log-probabilities-and-gradients-for-diagnostics.html"><i class="fa fa-check"></i><b>13</b> Extracting log probabilities and gradients for diagnostics</a>
<ul>
<li class="chapter" data-level="13.1" data-path="extracting-log-probabilities-and-gradients-for-diagnostics.html"><a href="extracting-log-probabilities-and-gradients-for-diagnostics.html#configuration-1"><i class="fa fa-check"></i><b>13.1</b> Configuration</a></li>
<li class="chapter" data-level="13.2" data-path="extracting-log-probabilities-and-gradients-for-diagnostics.html"><a href="extracting-log-probabilities-and-gradients-for-diagnostics.html#csv-output-1"><i class="fa fa-check"></i><b>13.2</b> CSV output</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="diagnosing-hmc-by-comparison-of-gradients.html"><a href="diagnosing-hmc-by-comparison-of-gradients.html"><i class="fa fa-check"></i><b>14</b> Diagnosing HMC by Comparison of Gradients</a></li>
<li class="chapter" data-level="15" data-path="parallelization.html"><a href="parallelization.html"><i class="fa fa-check"></i><b>15</b> Parallelization</a>
<ul>
<li class="chapter" data-level="15.1" data-path="parallelization.html"><a href="parallelization.html#multi-threading-with-tbb"><i class="fa fa-check"></i><b>15.1</b> Multi-threading with TBB</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="parallelization.html"><a href="parallelization.html#compiling"><i class="fa fa-check"></i><b>15.1.1</b> Compiling</a></li>
<li class="chapter" data-level="15.1.2" data-path="parallelization.html"><a href="parallelization.html#running"><i class="fa fa-check"></i><b>15.1.2</b> Running</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="parallelization.html"><a href="parallelization.html#multi-processing-with-mpi"><i class="fa fa-check"></i><b>15.2</b> Multi-processing with MPI</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="parallelization.html"><a href="parallelization.html#dependencies-1"><i class="fa fa-check"></i><b>15.2.1</b> Dependencies</a></li>
<li class="chapter" data-level="15.2.2" data-path="parallelization.html"><a href="parallelization.html#compiling-1"><i class="fa fa-check"></i><b>15.2.2</b> Compiling</a></li>
<li class="chapter" data-level="15.2.3" data-path="parallelization.html"><a href="parallelization.html#running-1"><i class="fa fa-check"></i><b>15.2.3</b> Running</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="parallelization.html"><a href="parallelization.html#opencl"><i class="fa fa-check"></i><b>15.3</b> OpenCL</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="parallelization.html"><a href="parallelization.html#dependencies-2"><i class="fa fa-check"></i><b>15.3.1</b> Dependencies</a></li>
<li class="chapter" data-level="15.3.2" data-path="parallelization.html"><a href="parallelization.html#compiling-2"><i class="fa fa-check"></i><b>15.3.2</b> Compiling</a></li>
<li class="chapter" data-level="15.3.3" data-path="parallelization.html"><a href="parallelization.html#running-2"><i class="fa fa-check"></i><b>15.3.3</b> Running</a></li>
</ul></li>
</ul></li>
<li><a href="cmdstan-tools.html#cmdstan-tools"><i style='font-size: 110%; color:#990017;'>CmdStan Tools</i></a></li>
<li class="chapter" data-level="16" data-path="stanc.html"><a href="stanc.html"><i class="fa fa-check"></i><b>16</b> <code>stanc</code>: Translating Stan to C++</a>
<ul>
<li class="chapter" data-level="16.1" data-path="stanc.html"><a href="stanc.html#instantiating-the-stanc-binary"><i class="fa fa-check"></i><b>16.1</b> Instantiating the <code>stanc</code> binary</a></li>
<li class="chapter" data-level="16.2" data-path="stanc.html"><a href="stanc.html#the-stan-compiler-program"><i class="fa fa-check"></i><b>16.2</b> The Stan compiler program</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="stansummary.html"><a href="stansummary.html"><i class="fa fa-check"></i><b>17</b> <code>stansummary</code>: MCMC Output Analysis</a>
<ul>
<li class="chapter" data-level="17.1" data-path="stansummary.html"><a href="stansummary.html#building-the-stansummary-command"><i class="fa fa-check"></i><b>17.1</b> Building the stansummary command</a></li>
<li class="chapter" data-level="17.2" data-path="stansummary.html"><a href="stansummary.html#running-the-stansummary-program"><i class="fa fa-check"></i><b>17.2</b> Running the <code>stansummary</code> program</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="stansummary.html"><a href="stansummary.html#sampler-parameters"><i class="fa fa-check"></i><b>17.2.1</b> Sampler parameters</a></li>
<li class="chapter" data-level="17.2.2" data-path="stansummary.html"><a href="stansummary.html#model-parameters-and-quantities-of-interest"><i class="fa fa-check"></i><b>17.2.2</b> Model parameters and quantities of interest</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="stansummary.html"><a href="stansummary.html#command-line-options"><i class="fa fa-check"></i><b>17.3</b> Command-line options</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="diagnose.html"><a href="diagnose.html"><i class="fa fa-check"></i><b>18</b> <code>diagnose</code>: Diagnosing Biased Hamiltonian Monte Carlo Inferences</a>
<ul>
<li class="chapter" data-level="18.1" data-path="diagnose.html"><a href="diagnose.html#building-the-diagnose-command"><i class="fa fa-check"></i><b>18.1</b> Building the diagnose command</a></li>
<li class="chapter" data-level="18.2" data-path="diagnose.html"><a href="diagnose.html#running-the-diagnose-command"><i class="fa fa-check"></i><b>18.2</b> Running the diagnose command</a></li>
<li class="chapter" data-level="18.3" data-path="diagnose.html"><a href="diagnose.html#diagnose-warnings-and-recommendations"><i class="fa fa-check"></i><b>18.3</b> <code>diagnose</code> warnings and recommendations</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="diagnose.html"><a href="diagnose.html#divergent-transitions-after-warmup"><i class="fa fa-check"></i><b>18.3.1</b> Divergent transitions after warmup</a></li>
<li class="chapter" data-level="18.3.2" data-path="diagnose.html"><a href="diagnose.html#maximum-treedepth-exceeded"><i class="fa fa-check"></i><b>18.3.2</b> Maximum treedepth exceeded</a></li>
<li class="chapter" data-level="18.3.3" data-path="diagnose.html"><a href="diagnose.html#low-e-bfmi-values---sampler-transitions-hmc-potential-energy."><i class="fa fa-check"></i><b>18.3.3</b> Low E-BFMI values - sampler transitions HMC potential energy.</a></li>
<li class="chapter" data-level="18.3.4" data-path="diagnose.html"><a href="diagnose.html#low-effective-sample-sizes"><i class="fa fa-check"></i><b>18.3.4</b> Low effective sample sizes</a></li>
<li class="chapter" data-level="18.3.5" data-path="diagnose.html"><a href="diagnose.html#high-hatr"><i class="fa fa-check"></i><b>18.3.5</b> High <span class="math inline">\(\hat{R}\)</span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="print-deprecated-mcmc-output-analysis.html"><a href="print-deprecated-mcmc-output-analysis.html"><i class="fa fa-check"></i><b>19</b> <code>print</code> (deprecated): MCMC Output Analysis</a></li>
<li><a href="appendices.html#appendices"><i style='font-size: 110%; color:#990017;'>Appendices</i></a></li>
<li class="chapter" data-level="20" data-path="stan_csv.html"><a href="stan_csv.html"><i class="fa fa-check"></i><b>20</b> Stan CSV File Format</a>
<ul>
<li class="chapter" data-level="20.1" data-path="stan_csv.html"><a href="stan_csv.html#csv-column-names-and-order"><i class="fa fa-check"></i><b>20.1</b> CSV column names and order</a></li>
<li class="chapter" data-level="20.2" data-path="stan_csv.html"><a href="stan_csv.html#mcmc-sampler-csv-output"><i class="fa fa-check"></i><b>20.2</b> MCMC sampler CSV output</a>
<ul>
<li class="chapter" data-level="20.2.1" data-path="stan_csv.html"><a href="stan_csv.html#sampler-stan-csv-output-file"><i class="fa fa-check"></i><b>20.2.1</b> Sampler Stan CSV output file</a></li>
<li class="chapter" data-level="20.2.2" data-path="stan_csv.html"><a href="stan_csv.html#diagnostic-csv-output-file"><i class="fa fa-check"></i><b>20.2.2</b> Diagnostic CSV output file</a></li>
<li class="chapter" data-level="20.2.3" data-path="stan_csv.html"><a href="stan_csv.html#profiling-csv-output-file"><i class="fa fa-check"></i><b>20.2.3</b> Profiling CSV output file</a></li>
</ul></li>
<li class="chapter" data-level="20.3" data-path="stan_csv.html"><a href="stan_csv.html#optimization-output"><i class="fa fa-check"></i><b>20.3</b> Optimization output</a></li>
<li class="chapter" data-level="20.4" data-path="stan_csv.html"><a href="stan_csv.html#variational-inference-output"><i class="fa fa-check"></i><b>20.4</b> Variational inference output</a></li>
<li class="chapter" data-level="20.5" data-path="stan_csv.html"><a href="stan_csv.html#generate-quantities-outputs"><i class="fa fa-check"></i><b>20.5</b> Generate quantities outputs</a></li>
<li class="chapter" data-level="20.6" data-path="stan_csv.html"><a href="stan_csv.html#diagnose-method-outputs"><i class="fa fa-check"></i><b>20.6</b> Diagnose method outputs</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="json.html"><a href="json.html"><i class="fa fa-check"></i><b>21</b> JSON Format for CmdStan</a>
<ul>
<li class="chapter" data-level="21.1" data-path="json.html"><a href="json.html#creating-json-files"><i class="fa fa-check"></i><b>21.1</b> Creating JSON files</a></li>
<li class="chapter" data-level="21.2" data-path="json.html"><a href="json.html#json-syntax-summary"><i class="fa fa-check"></i><b>21.2</b> JSON syntax summary</a></li>
<li class="chapter" data-level="21.3" data-path="json.html"><a href="json.html#stan-data-types-in-json-notation"><i class="fa fa-check"></i><b>21.3</b> Stan data types in JSON notation</a>
<ul>
<li class="chapter" data-level="21.3.1" data-path="json.html"><a href="json.html#empty-arrays-in-json"><i class="fa fa-check"></i><b>21.3.1</b> Empty arrays in JSON</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="22" data-path="rdump.html"><a href="rdump.html"><i class="fa fa-check"></i><b>22</b> RDump Format for CmdStan</a>
<ul>
<li class="chapter" data-level="22.1" data-path="rdump.html"><a href="rdump.html#creating-dump-files"><i class="fa fa-check"></i><b>22.1</b> Creating dump files</a></li>
<li class="chapter" data-level="22.2" data-path="rdump.html"><a href="rdump.html#scalar-variables"><i class="fa fa-check"></i><b>22.2</b> Scalar variables</a></li>
<li class="chapter" data-level="22.3" data-path="rdump.html"><a href="rdump.html#sequence-variables"><i class="fa fa-check"></i><b>22.3</b> Sequence variables</a></li>
<li class="chapter" data-level="22.4" data-path="rdump.html"><a href="rdump.html#array-variables"><i class="fa fa-check"></i><b>22.4</b> Array variables</a></li>
<li class="chapter" data-level="22.5" data-path="rdump.html"><a href="rdump.html#matrix--and-vector-valued-variables"><i class="fa fa-check"></i><b>22.5</b> Matrix- and vector-valued variables</a>
<ul>
<li class="chapter" data-level="22.5.1" data-path="rdump.html"><a href="rdump.html#vector-dump-format"><i class="fa fa-check"></i><b>22.5.1</b> Vector dump format</a></li>
<li class="chapter" data-level="22.5.2" data-path="rdump.html"><a href="rdump.html#matrix-dump-format"><i class="fa fa-check"></i><b>22.5.2</b> Matrix dump format</a></li>
<li class="chapter" data-level="22.5.3" data-path="rdump.html"><a href="rdump.html#arrays-of-vectors-and-matrices"><i class="fa fa-check"></i><b>22.5.3</b> Arrays of vectors and matrices</a></li>
</ul></li>
<li class="chapter" data-level="22.6" data-path="rdump.html"><a href="rdump.html#complex-valued-variables"><i class="fa fa-check"></i><b>22.6</b> Complex-valued variables</a></li>
<li class="chapter" data-level="22.7" data-path="rdump.html"><a href="rdump.html#integer--and-real-valued-variables"><i class="fa fa-check"></i><b>22.7</b> Integer- and real-valued variables</a>
<ul>
<li class="chapter" data-level="22.7.1" data-path="rdump.html"><a href="rdump.html#scientific-notation"><i class="fa fa-check"></i><b>22.7.1</b> Scientific notation</a></li>
<li class="chapter" data-level="22.7.2" data-path="rdump.html"><a href="rdump.html#infinite-and-not-a-number-values"><i class="fa fa-check"></i><b>22.7.2</b> Infinite and not-a-number values</a></li>
</ul></li>
<li class="chapter" data-level="22.8" data-path="rdump.html"><a href="rdump.html#quoted-variable-names"><i class="fa fa-check"></i><b>22.8</b> Quoted variable names</a></li>
<li class="chapter" data-level="22.9" data-path="rdump.html"><a href="rdump.html#line-breaks"><i class="fa fa-check"></i><b>22.9</b> Line breaks</a></li>
<li class="chapter" data-level="22.10" data-path="rdump.html"><a href="rdump.html#bnf-grammar-for-dump-data"><i class="fa fa-check"></i><b>22.10</b> BNF grammar for dump data</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="using-external-cpp-code.html"><a href="using-external-cpp-code.html"><i class="fa fa-check"></i><b>23</b> Using external C++ code</a></li>
<li><a href="bibliography.html#bibliography"><i style='font-size: 110%; color:#990017;'>Bibliography</i></a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">CmdStan User’s Guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">

<div>
This is an old version, <a href="https://mc-stan.org/docs/cmdstan-guide/installation.html">view current version</a>.
</div>
<div id="cmdstan-installation" class="section level1" number="1">
<h1><span class="header-section-number">1</span> CmdStan Installation</h1>
<p>There are a few ways that you can install CmdStan.
Depending on your operating system and your level of expertise,
you can either:</p>
<ul>
<li><p>Use the <a href="https://docs.conda.io/en/latest/">conda</a> package management system
to install a pre-built version of CmdStan along with the required dependencies.
<em>Recommended for Windows users</em>.</p></li>
<li><p>Install the source code from <a href="https://github.com/stan-dev/cmdstan">GitHub CmdStan repository</a>.
This requires a modern C++ compiler and toolchain.
See the <a href="cmdstan-installation.html#cpp-toolchain">C++ Toolchain</a> section for further details.</p></li>
</ul>
<div id="conda-install" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Installation via <code>conda</code></h2>
<p>With conda, you can install CmdStan from the
<a href="https://conda-forge.org/">conda-forge channel</a>.
This will install a pre-built version of CmdStan along with the required
dependencies (i.e. a C++ compiler, a version of Make, and required
libraries) detailed below under [Source installation].
The conda installation is designed so one can use the R or Python
bindings to CmdStan seamlessly. Additionally, it provides the command
<code>cmdstan_model</code> to activate the CmdStan makefile from anywhere.</p>
<p><em>Note</em>: This requires that conda has been installed already on your machine.
You can either install <a href="https://docs.conda.io/en/latest/miniconda.html">miniconda</a>, a free, minimal installer for conda
or you can get the full <a href="https://docs.continuum.io/anaconda/">Anaconda</a> system
which provides graphical installer wizards for <a href="https://www.anaconda.com/products/distribution#macos">MacOS</a>
and <a href="https://www.anaconda.com/products/distribution#windows">Windows</a> users.</p>
<p>We recommend installing CmdStan in a new conda environment:</p>
<pre><code> conda create -n stan -c conda-forge cmdstan</code></pre>
<p>This command creates a new conda environment named <code>stan</code> and
downloads and installs the <code>cmdstan</code> package
as well as CmdStan and the required C++ toolchain.</p>
<p>To install into an existing conda environment, use the conda <code>install</code> command instead of <code>create</code>:</p>
<pre><code> conda install -c conda-forge cmdstan</code></pre>
<p>Whichever installation method you use, afterwards you must
activate the new environment or deactivate/activate the existing one.
For example, if you installed cmdstan into a new environment <code>stan</code>,
run the command</p>
<pre><code> conda activate stan</code></pre>
<p>By default, the latest release of CmdStan is installed.
If you require a specific release of CmdStan, CmdStan versions
2.26.1 and <em>newer</em> can be installed by specifying
<code>cmdstan==VERSION</code> in the install command.
For example to install an earlier version of CmdStan into your current
conda environment, run the following command, then re-activate the environment</p>
<pre><code>conda install -c conda-forge cmdstan=2.27.0</code></pre>
<div id="cmdstan-install-location-under-conda" class="section level3" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> CmdStan install location under conda</h3>
<p>A Conda environment is a directory that contains a specific collection of Conda packages.
To see the locations of your conda environments, use the command</p>
<pre><code> conda info -e</code></pre>
<p>The shell environment variable <code>CONDA_PREFIX</code> points to the active conda environment (if any).
Both CmdStan and the C++ toolchain are installed into the
<code>bin</code> subdirectory of the conda environment directory, i.e.,
<code>$CONDA_PREFIX/bin/cmdstan</code> (Linux, MacOS), <code>%CONDA_PREFIX%\bin\cmdstan</code> (Windows).</p>
<p>Please report conda-specific install problems directly to the
conda-forge issue tracker,
<a href="https://github.com/conda-forge/cmdstan-feedstock/issues">here</a>.</p>
</div>
</div>
<div id="installation-from-github" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Installation from GitHub</h2>
<p>Installation from GitHub consists of the following steps:</p>
<ul>
<li><p>Verify that you have a modern C++ toolchain.
See the <a href="cmdstan-installation.html#cpp-toolchain">C++ Toolchain</a> section for details.</p></li>
<li><p>Download the CmdStan source code from GitHub</p></li>
<li><p>Build the CmdStan libraries and executables</p></li>
<li><p>Check the installation by compiling and running the CmdStan example model <code>bernoulli.stan</code>.</p></li>
</ul>
<div id="downloading-the-source-code" class="section level3" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Downloading the source code</h3>
<p>The GitHub source code is divided into sub-modules, each in its own repository.
The CmdStan repo contains just the <code>cmdstan</code> module;
the Stan inference engine algorithms and Stan math library functions
are specified as <a href="https://git-scm.com/book/en/v2/Git-Tools-Submodules">submodules</a>
and stored in the GitHub repositories
<a href="https://github.com/stan-dev/stan">stan</a> and <a href="https://github.com/stan-dev/math">math</a>,
respectively.</p>
<p>A <a href="https://github.com/stan-dev/cmdstan/releases">CmdStan release</a> is
compressed tarfile which contains CmdStan and the Stan and math library submodules.
The most recent CmdStan release is always available as <a href="https://github.com/stan-dev/cmdstan/releases/latest" class="uri">https://github.com/stan-dev/cmdstan/releases/latest</a>.
A CmdStan release is versioned by major, minor, patch numbers, e.g., “2.29.2.”
The release tarfile unpacks into a directory named “cmdstan-<version number>,”
e.g. “cmdstan-2.29.2.”</p>
<p>By cloning the CmdStan repository with argument <code>--recursive</code>,
Git automatically initializes and updates each submodule in the repository,
including nested submodules if any of the submodules
in the repository have submodules themselves.
The following command will download the source code from the current
development branch of CmdStan into a directory named <code>cmdstan</code>:</p>
<pre><code>&gt; git clone https://github.com/stan-dev/cmdstan.git --recursive</code></pre>
<p>Throughout this manual, we refer to this top-level CmdStan source directory as <strong><code>&lt;cmdstan-home&gt;</code></strong>.
This directory contains the following subdirectories:</p>
<ul>
<li>directory <code>cmdstan/stan</code> contains the sub-module <code>stan</code> (<a href="https://github.com/stan-dev/stan" class="uri">https://github.com/stan-dev/stan</a>)</li>
<li>directory <code>cmdstan/stan/lib/stan_math</code> contains the sub-module <code>math</code> (<a href="https://github.com/stan-dev/math" class="uri">https://github.com/stan-dev/math</a>)</li>
</ul>
</div>
<div id="building-cmdstan" class="section level3" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> Building CmdStan</h3>
<p>Building CmdStan involves preparing a set of executable programs
and compiling the command line interface and supporting libraries.
The CmdStan tools are:</p>
<ul>
<li><p><code>stanc</code>: the Stan compiler (translates Stan language to C++).</p></li>
<li><p><code>stansummary</code>: a basic posterior analysis tool.
The <code>stansummary</code> utility processes one or more output files from a run
or set of runs of Stan’s HMC sampler.
For all parameters and quantities of interest in the Stan program,
<code>stansummary</code> reports a set of statistics including mean, standard deviation,
percentiles, effective number of samples, and <span class="math inline">\(\hat{R}\)</span> values.</p></li>
<li><p><code>diagnose</code>: a basic sampler diagnostic tool which checks for indications
that the HMC sampler was unable to sample from the full posterior.</p></li>
</ul>
<p>CmdStan releases include pre-built binaries of the Stan language
compiler :
<code>bin/linux-stanc</code>, <code>bin/mac-stanc</code> and
<code>bin/windows-stanc</code>. The CmdStan makefile <code>build</code> task
copies the appropriate binary to <code>bin/stanc</code>. For CmdStan
installations which have been cloned of downloaded from the CmdStan
GitHub repository, the makefile task will download the appropriate
OS-specific binary from the stanc3 repository’s nightly release.</p>
<p>Steps to build CmdStan:</p>
<ul>
<li><p>Open a command-line terminal window and change directories to the CmdStan home directory.</p></li>
<li><p>Run the makefile target <code>build</code> which instantiates the CmdStan utilities
and compiles all necessary C++ libraries.</p></li>
</ul>
<pre><code>&gt; cd &lt;cmdstan-home&gt;
&gt; make build    # on Windows use mingw32-make</code></pre>
<p>If your computer has multiple cores and sufficient ram, the build process
can be parallelized by providing the <code>-j</code> option. For example, to build on 4 cores, type:</p>
<pre><code>&gt; make -j4 build    # on Windows use mingw32-make</code></pre>
<p>When <code>make build</code> is successful, the directory <code>&lt;cmdstan-home&gt;/bin/</code>
will contain the executables <code>stanc</code>, <code>stansummary</code>, and <code>diagnose</code> (on Windows, corresponding <code>.exe</code> files)
and the final lines of console output will show the version of CmdStan
that has just been built, e.g.:</p>
<pre><code>--- CmdStan v2.29.2 built ---</code></pre>
<p><strong>Warning:</strong> <em>The Make program may take 10+ minutes and consume 2+ GB of memory to build CmdStan.</em></p>
<p><strong>Windows only:</strong> CmdStan requires that the Intel TBB library,
which is built by the above command, can be found by the Windows system.
This requires that the directory
<code>&lt;cmdstan-home&gt;/stan/lib/stan_math/lib/tbb</code> is part of the
<code>PATH</code> environment variable.
See <a href="https://helpdeskgeek.com/windows-10/add-windows-path-environment-variable/">these instructions</a>
for details on changing the <code>PATH</code>.
To permanently make this setting for the current user, you may execute:</p>
<pre><code>&gt; mingw32-make install-tbb</code></pre>
<p>After changing the <code>PATH</code> environment variable, you must open an new shell
in order for the new environment variable settings to take effect.
(This is not necessary on Mac and Linux systems because they can use the
absolute path to the Intel TBB library when linking into Stan programs.)</p>
</div>
</div>
<div id="checking-the-stan-compiler" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Checking the Stan compiler</h2>
<p>To check that the CmdStan installation is complete
and in working order, run the following series of commands
from the folder which CmdStan was installed.</p>
<p>On Linux and macOS:</p>
<pre><code># compile the example
&gt; make examples/bernoulli/bernoulli

# fit to provided data (results of 10 trials, 2 out of 10 successes)
&gt; ./examples/bernoulli/bernoulli sample data file=examples/bernoulli/bernoulli.data.json

# default output written to file `output.csv`,
# default num_samples is 1000, output file should have approx. 1050 lines
&gt; ls -l output.csv

# run the `bin/stansummary utility to summarize parameter estimates
&gt; bin/stansummary output.csv</code></pre>
<p>On Windows:</p>
<pre><code># compile the example
&gt; mingw32-make examples/bernoulli/bernoulli.exe

# fit to provided data (results of 10 trials, 2 out of 10 successes)
&gt; ./examples/bernoulli/bernoulli.exe sample data file=examples/bernoulli/bernoulli.data.json

# run the `bin/stansummary.exe utility to summarize parameter estimates
&gt; bin/stansummary.exe output.csv</code></pre>
<p>The sample data in file <code>bernoulli.json.data</code> specifies 2 out of 10 successes, therefore
the range <code>mean(theta)</code><span class="math inline">\(\pm\)</span><code>sd(theta)</code> should include 0.2.</p>
</div>
<div id="troubleshooting-the-installation" class="section level2" number="1.4">
<h2><span class="header-section-number">1.4</span> Troubleshooting the installation</h2>
<p>Updates to CmdStan, changes in compiler options, or updates to the
C++ toolchain may result in errors when trying to compile a Stan program.
Often, these problems can be resolved by removing the existing CmdStan binaries
and recompiling. To do this, you must run the makefile commands
from the <code>&lt;cmdstan-home&gt;</code> directory:</p>
<pre><code>&gt; cd &lt;cmdstan-home&gt;
&gt; make clean-all    # on Windows use mingw32-make
&gt; make build</code></pre>
<div id="common-problems" class="section level3" number="1.4.1">
<h3><span class="header-section-number">1.4.1</span> Common problems</h3>
<p>This section contains solutions to problems reported on <a href="https://discourse.mc-stan.org" class="uri">https://discourse.mc-stan.org</a></p>
<p><strong>Compiler error message about PCH file</strong></p>
<p>To speed up compilation, the Stan makefile pre-compiles parts of the core Stan library.
If these pre-compiled files are out of sync with the compiled model, the compiler will complain, e.g.:</p>
<pre><code>error: PCH file uses an older PCH format that is no longer supported</code></pre>
<p>In this case, clean and rebuild CmdStan, as shown in the previous section.</p>
<p><strong>Windows: ‘mingw32-make’ is not recognised</strong></p>
<p>If the C++ toolchain has been installed but not properly registered,
then the call to <code>mingw32-make</code> will result in error message:</p>
<pre><code>&#39;mingw32-make&#39; is not recognised as an internal or external command</code></pre>
<p>To fix this, you should make sure that the RTools installation is
in your <code>PATH</code> environment variable.
In addition, if you have the RTools 4.0 toolchain, then call the utility <code>pacman</code>
to register the right version of make:</p>
<pre><code>pacman -Sy mingw-w64-x86_64-make</code></pre>
<p>See: <a href="https://discourse.mc-stan.org/t/cmdstan-installation-on-windows/11287/6" class="uri">https://discourse.mc-stan.org/t/cmdstan-installation-on-windows/11287/6</a></p>
<p><strong>Windows: ‘g++’ or ‘cut’ is not recognized</strong></p>
<p>The CmdStan makefile uses a few shell utilities which might not be present in Windows,
resulting in the error message:</p>
<pre><code>&#39;cut&#39; is not recognized as an internal or external command, operable program or batch file.</code></pre>
<p>The solution is to add <code>mingw_64/bin</code> directory to the user <code>PATH</code> environment variable. See:
<a href="https://discourse.mc-stan.org/t/errors-when-using-cmdstan-model/14984/21" class="uri">https://discourse.mc-stan.org/t/errors-when-using-cmdstan-model/14984/21</a></p>
</div>
</div>
<div id="cpp-toolchain" class="section level2" number="1.5">
<h2><span class="header-section-number">1.5</span> C++ Toolchain</h2>
<p>Compiling a Stan program requires a modern C++ compiler and the GNU Make build utility (a.k.a. “gmake”).
These vary by operating system.</p>
<div id="linux" class="section level4" number="1.5.0.1">
<h4><span class="header-section-number">1.5.0.1</span> Linux</h4>
<p>The required C++ compiler is <code>g++ 4.9 3</code>.
On most systems the GNU Make utility is pre-installed and is the default <code>make</code> utility.
There is usually a pre-installed C++ compiler as well, however, it may not be new enough.
To check, run commands:</p>
<pre><code>g++ --version
make --version</code></pre>
<p>If these are at least at <code>g++</code> version 4.9.3 or later and
<code>make</code> version 3.81 or later, no additional installations are
necessary. It may still be desirable to update the C++ compiler
<code>g++</code>, because later versions are faster.</p>
<p>To install the latest version of these tools (or upgrade an older
version), use the following commands or their equivalent for your
distribution, install via the commands:</p>
<pre><code>sudo apt install g++
sudo apt install make</code></pre>
<p>If you can’t run <code>sudo</code>, you will need to ask your sysadmin
or cluster administrator to install these tools for you.</p>
</div>
<div id="macos" class="section level4" number="1.5.0.2">
<h4><span class="header-section-number">1.5.0.2</span> MacOS</h4>
<p>To install a C++ development
environment on a Mac, use Apple’s Xcode development environment
<a href="https://developer.apple.com/xcode/" class="uri">https://developer.apple.com/xcode/</a>.</p>
<p>From the <a href="https://developer.apple.com/xcode/">Xcode home page</a>
<code>View in Mac App Store</code>.</p>
<ul>
<li>From the App Store, click <code>Install</code>, enter an Apple ID, and wait
for Xcode to finish installing.</li>
<li>Open the Xcode application, click top-level menu <code>Preferences</code>,
click top-row button <code>Downloads</code>, click button for
<code>Components</code>, click on the <code>Install</code> button to the right of
the <code>Command Line Tools</code> entry, then wait for it to finish
installing.</li>
<li>Click the top-level menu item <code>Xcode</code>, then click item <code>Quit Xcode</code> to quit.</li>
</ul>
<p>To test, open the Terminal application and enter:</p>
<pre><code>clang++ --version
make --version</code></pre>
<p>If you have installed XCode, but don’t have <code>make</code>, you can install the
XCode command-line tools via command:</p>
<pre><code>xcode-select --install</code></pre>
</div>
<div id="windows" class="section level4" number="1.5.0.3">
<h4><span class="header-section-number">1.5.0.3</span> Windows</h4>
<p>The Windows toolchain consists of programs <code>g++</code>, the C++ compiler, and <code>mingw32-make</code>, the GNU Make utility.
To check if these are present,
open a command shell<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>
and type:</p>
<pre><code>g++ --version
mingw32-make --version</code></pre>
<p>We recommend using the <a href="https://cran.r-project.org/bin/windows/Rtools/rtools40.html">RTools 4.0</a> toolchain
which contains a <code>g++ 8</code> compiler and <code>mingw32-make</code>, the native Windows equivalent of the GNU Make utility.
RTools provides an
<a href="https://github.com/r-windows/rtools-installer/releases/download/2022-02-06/rtools40-x86_64.exe">installer</a>
utility. After running the installer, you must add
the location of the Rtools compiler and make utilities
to the <code>PATH</code> environment variable. If you have <code>Rtools40</code>, these should be:</p>
<pre><code>C:\RTools\RTools40\usr\bin
C:\RTools\RTools40\mingw64\bin</code></pre>
<p>See <a href="https://helpdeskgeek.com/windows-10/add-windows-path-environment-variable/">these instructions</a>
for details on changing the <code>PATH</code>.</p>
<p><strong>32-bit Builds</strong></p>
<p>CmdStan defaults to a 64-bit build. On a 32-bit operating system, you must specify
the make variable <code>BIT=32</code> as part of the <code>make</code> command, described in the next section.</p>
</div>
</div>
<div id="gnu-make" class="section level2" number="1.6">
<h2><span class="header-section-number">1.6</span> Using GNU Make</h2>
<p>CmdStan relies on the GNU Make utility to build both the
Stan model executables and the CmdStan tools.</p>
<p>GNU Make builds executable programs and libraries from source code by reading files
called Makefiles which specify how to derive the target program.
A Makefile consists of a set of recursive rules where each rule
specifies a target, its dependencies,
and the specific operations required to build the target.
Specifying dependencies for a target provides a way to control
the build process so that targets which depend on other files will
be updated as needed <em>only</em> when there are changes to those other files.
Thus Make provides an efficient way to manage complex software.</p>
<p>The CmdStan Makefile is in the <code>&lt;cmdstan-home&gt;</code> directory
and is named <code>makefile</code>. This is one of the default
<a href="https://www.gnu.org/software/make/manual/html_node/Makefile-Names.html">GNU Makefile names</a>,
which allows you to omit the <code>-f makefile</code> argument to the Make command.
Because the CmdStan Makefile includes several other Makefiles,
<strong>Make only works properly when invoked from the <code>&lt;cmdstan-home&gt;</code> directory</strong>;
attempts to use this Makefile from another directory by specifying the
full path to the file <code>makefile</code> won’t work.
For example, trying to call Make from another directory by specifying
the full path the the makefile results in the following set of error messages:</p>
<pre><code>make -f ~/github/stan-dev/cmdstan/makefile
/Users/mitzi/github/stan-dev/cmdstan/makefile:58: make/stanc: No such file or directory
/Users/mitzi/github/stan-dev/cmdstan/makefile:59: make/program: No such file or directory
/Users/mitzi/github/stan-dev/cmdstan/makefile:60: make/tests: No such file or directory
/Users/mitzi/github/stan-dev/cmdstan/makefile:61: make/command: No such file or directory
make: *** No rule to make target `make/command&#39;.  Stop.</code></pre>
<p>The <a href="cmdstan-installation.html#conda-install">conda-forge <code>cmdstan</code> package</a> provides a solution to this problem
via <code>cmdstan_model</code> command which lets you run the CmdStan makefile from anywhere
to compile a Stan model.</p>
<p>Makefile syntax allows general pattern rules based on file suffixes.
Stan programs must be stored in files with suffix <code>.stan</code>; the
CmdStan makefile rules specify how to transform the Stan source code
into a binary executable.
For example, to compile the Stan program <code>my_program.stan</code> in directory <code>../my_dir/</code>,
the make target is <code>../my_dir/my_program</code> or <code>../my_dir/my_program.exe</code> (on Windows).</p>
<p>To call Make, you invoke the utility name, either <code>make</code> or <code>mingw32-make</code>, followed by, in order:</p>
<ul>
<li><p>zero or more <a href="https://www.gnu.org/software/make/manual/html_node/Options-Summary.html">Make program options</a>, then specify any Make variables as a series of</p></li>
<li><p>zero of more Make variables, described below</p></li>
<li><p>zero or more <em>target</em> names; the set of names is determined by the Makefile rules.</p></li>
</ul>
<pre><code>make &lt;flags&gt; &lt;variables&gt; &lt;targets&gt;</code></pre>
<p><strong>Makefile Variables</strong></p>
<p>Make targets can be preceded by any number of Makefile variable name=value pairs.
For example, to compile <code>../my_dir/my_program.stan</code> for an OpenCL (GPU) machine,
set the makefile variable <code>STAN_OPENCL</code> to <code>TRUE</code>:</p>
<pre><code>&gt; make STAN_OPENCL=TRUE ../my_dir/my_program    # on Windows use mingw32-make</code></pre>
<p>Makefile variables can also be set by creating a file named <code>local</code> in the
CmdStan <code>make</code> subdirectory which contains a list of <code>&lt;VARIABLE&gt;=&lt;VALUE&gt;</code> pairs,
one per line. For example, if you are working on a 32-bit machine,
you would put the line <code>BIT=32</code> into the file <code>&lt;cmdstan-home&gt;/make/local</code>
so that all CmdStan programs and Stan models compile properly.</p>
<p>The complete set of Makefile variables can be found in file
<code>&lt;cmdstan-home&gt;/cmdstan/stan/lib/stan_math/make/compiler_flags</code>.</p>
<p><strong>Make Targets</strong></p>
<p>When invoked without any arguments at all, Make prints a help message:</p>
<pre><code>&gt; make    # on Windows use mingw32-make
--------------------------------------------------------------------------------
CmdStan v2.23.0 help

  Build CmdStan utilities:
    &gt; make build

    This target will:
    1. Install the Stan compiler bin/stanc from stanc3 binaries.
    2. Build the print utility bin/print (deprecated; will be removed in v3.0)
    3. Build the stansummary utility bin/stansummary
    4. Build the diagnose utility bin/diagnose
    5. Build all libraries and object files compile and link an executable Stan program

    Note: to build using multiple cores, use the -j option to make, e.g.,
    for 4 cores:
    &gt; make build -j4


  Build a Stan program:

    Given a Stan program at foo/bar.stan, build an executable by typing:
    &gt; make foo/bar

    This target will:
    1. Install the Stan compiler (bin/stanc), as needed.
    2. Use the Stan compiler to generate C++ code, foo/bar.hpp.
    3. Compile the C++ code using cc . to generate foo/bar

  Additional make options:
    STANCFLAGS: defaults to &quot;&quot;. These are extra options passed to bin/stanc
      when generating C++ code. If you want to allow undefined functions in the
      Stan program, either add this to make/local or the command line:
          STANCFLAGS = --allow_undefined
    USER_HEADER: when STANCFLAGS has --allow_undefined, this is the name of the
      header file that is included. This defaults to &quot;user_header.hpp&quot; in the
      directory of the Stan program.


  Example - bernoulli model: examples/bernoulli/bernoulli.stan

    1. Build the model:
       &gt; make examples/bernoulli/bernoulli
    2. Run the model:
       &gt; examples/bernoulli/bernoulli sample data file=examples/bernoulli/bernoulli.data.R
    3. Look at the samples:
       &gt; bin/stansummary output.csv


  Clean CmdStan:

    Remove the built CmdStan tools:
    &gt; make clean-all

--------------------------------------------------------------------------------</code></pre>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>To open a Windows command shell, first open the <strong>Start Menu</strong>,
(usually in the lower left of the screen), select option <strong>All Programs</strong>,
then option <strong>Accessories</strong>, then program <strong>Command Prompt</strong>.
Alternatively, enter <code>[Windows+r]</code> (both keys together on the
keyboard), and enter <code>cmd</code> into the text field that pops up in the Run window,
then press <code>[Return]</code> on the keyboard to run.<a href="cmdstan-installation.html#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="quickstart-guide.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="example-model-and-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": {
"link": "https://github.com/stan-dev/docs/tree/master/src/cmdstan-guide/installation.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "static"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
